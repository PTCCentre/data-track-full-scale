/*! For license information please see main.8839386a.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(v,e)||!h.call(d,e)&&(f.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Ce(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==xe||null!==Ee)&&(Ne(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ae=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Ae=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var je=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){je=!0,Me=e}};function qe(e,t,n,r,i,a,o,s,u){je=!1,Me=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,It=!1,Ct=[],Tt=null,Nt=null,Pt=null,Rt=new Map,Dt=new Map,At=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function jt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){It=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Pt&&Ft(Pt)&&(Pt=null),Rt.forEach(Ut),Dt.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return qt(t,e)}if(0<Ct.length){qt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&qt(Tt,e),null!==Nt&&qt(Nt,e),null!==Pt&&qt(Pt,e),Rt.forEach(t),Dt.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Mt(n),null===n.blockedOn&&At.shift()}var Bt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Gt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=jt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=jt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=jt(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,jt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,jt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=M({},cn,{view:0,detail:0}),fn=an(hn),dn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),vn=an(dn),pn=an(M({},dn,{dataTransfer:0})),mn=an(M({},hn,{relatedTarget:0})),yn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var In=M({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(In),Tn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Pn=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),An=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var jn=l&&"TextEvent"in window&&!Ln,Mn=l&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Fr(e,0)}function Yn(e){if(H(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Sr("animationend"),Cr=Sr("animationiteration"),Tr=Sr("animationstart"),Nr=Sr("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Pr.set(e,t),u(t,[e])}for(var Ar=0;Ar<Rr.length;Ar++){var Or=Rr[Ar];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Ir,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(qe.apply(this,arguments),je){if(!je)throw Error(a(198));var l=Me;je=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Ir:case Cr:case Tr:u=yn;break;case Nr:u=Pn;break;case"scroll":u=fn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==f&&(null!=(p=De(v,f))&&l.push(Kr(v,p,d)))),h)break;v=v.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=vn,p="onMouseLeave",f="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,p="onPointerLeave",f="onPointerEnter",v="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(p,v+"leave",u,n,i)).target=h,s.relatedTarget=d,p=null,gi(i)===r&&((l=new l(f,v+"enter",c,n,i)).target=d,l.relatedTarget=h,p=l),h=p,u&&c)e:{for(f=c,v=0,d=l=u;d;d=Hr(d))v++;for(d=0,p=f;p;p=Hr(p))d++;for(;0<v-d;)l=Hr(l),v--;for(;0<d-v;)f=Hr(f),d--;for(;v--;){if(l===f||null!==f&&l===f.alternate)break e;l=Hr(l),f=Hr(f)}l=null}else l=null;null!==u&&Qr(o,s,u,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Xn;else if(Wn(s))if($n)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=De(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=De(n,a))&&o.unshift(Kr(n,u,s)):i||null!=(u=De(n,a))&&o.push(Kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,vi="__reactContainer$"+hi,pi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ci={},Ti=Ei(Ci),Ni=Ei(!1),Pi=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Si(Ni),Si(Ti)}function Oi(e,t,n){if(Ti.current!==Ci)throw Error(a(168));Ii(Ti,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=Ti.current,Ii(Ti,e),Ii(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ti),Ii(Ti,e)):Si(Ni),Ii(Ni,n)}var Fi=null,Ui=!1,Vi=!1;function qi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Wi=0,Ki=null,Gi=0,Hi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){Bi[Wi++]=Gi,Bi[Wi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Xi,Hi[Qi++]=$i,Hi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=Bi[--Wi],Bi[Wi]=null,Gi=Bi[--Wi],Bi[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Si(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ca(e){null===Ia?Ia=[e]:Ia.push(e)}function Ta(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Aa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,p=s;switch(f=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){h=v.call(d,h,f);break e}h=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(f="function"===typeof(v=p.payload)?v.call(d,h,f):v)||void 0===f)break e;h=M({},h,f);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);ju|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Aa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Aa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Aa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Pi:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Pi:Ti.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ga(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ga(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ga(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case D:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ha(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function p(i,a,s,u){for(var c=null,l=null,h=a,p=a=0,m=null;null!==h&&p<s.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var y=d(i,h,s[p],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y,h=m}if(p===s.length)return n(i,h),ia&&Ji(i,p),c;if(null===h){for(;p<s.length;p++)null!==(h=f(i,s[p],u))&&(a=o(h,a,p),null===l?c=h:l.sibling=h,l=h);return ia&&Ji(i,p),c}for(h=r(i,h);p<s.length;p++)null!==(m=v(h,i,p,s[p],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function m(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,p=s,m=s=0,y=null,g=u.next();null!==p&&!g.done;m++,g=u.next()){p.index>m?(y=p,p=null):y=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=y);break}e&&p&&null===k.alternate&&t(i,p),s=o(k,s,m),null===h?l=k:h.sibling=k,h=k,p=y}if(g.done)return n(i,p),ia&&Ji(i,m),l;if(null===p){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return ia&&Ji(i,m),l}for(p=r(i,p);!g.done;m++,g=u.next())null!==(g=v(p,i,m,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),s=o(g,s,m),null===h?l=g:h.sibling=g,h=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ga(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Oc(o.type,o.key,o.props,null,r.mode,u)).ref=Ga(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,u)).return=r,r=a}return s(r);case D:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return p(r,a,o,u);if(L(o))return m(r,a,o,u);Ha(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ii(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=ue(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var so=Ei(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,vo=0,po=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==mo&&null!==mo.next,vo=0,yo=mo=po=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?po.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===mo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?po.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?po.memoizedState=yo=e:yo=yo.next=e}return yo}function To(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((vo&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,po.lanes|=h,ju|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,ju|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=po,r=Co(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(a(349));0!==(30&vo)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Mo(e)}function Lo(e,t,n){return n((function(){jo(t)&&Mo(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Fo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function qo(e,t,n,r){var i=Io();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Bo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Go(e,t){return zo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=pt(),po.lanes|=n,ju|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return Co().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ta(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ca(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ta(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===po||null!==t&&t===po}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Nu)throw Error(a(349));0!==(30&vo)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Nu.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(To)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Co(),mo.memoizedState,e)},useTransition:function(){return[No(To)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1},cs={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:$o,useReducer:Po,useRef:Vo,useState:function(){return Po(To)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Po(To)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function vs(e,t,n){(n=Aa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Ku=r),fs(0,t)},n}function ps(e,t,n){(n=Aa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Aa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Ac(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Cs(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Au,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Au,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Au,Du),Du|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Au,Du),Du|=r;return ws(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var a=Di(n)?Pi:Ti.current;return a=Ri(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ts(e,t,n,r,i){if(Di(n)){var a=!0;ji(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Bs(e,t),Ba(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Di(n)?Pi:Ti.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Wa(t,o,r,c),Pa=!1;var f=t.memoizedState;o.state=f,Ma(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ni.current||Pa?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Pa||za(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ma(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Sa(u):u=Ri(t,u=Di(n)?Pi:Ti.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Wa(t,o,r,u),Pa=!1,f=t.memoizedState,o.state=f,Ma(t,r,o,i);var v=t.memoizedState;s!==h||f!==v||Ni.current||Pa?("function"===typeof d&&(Va(t,n,d,r),v=t.memoizedState),(c=Pa||za(t,n,c,r,f,v,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Is(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Rs(e,t,n,r,i){return da(),va(i),t.flags|=256,ws(e,t,n,r),t.child}var Ds,As,Os,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=jc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Nu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return pc(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Hi[Qi++]=Xi,Hi[Qi++]=$i,Hi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Ac(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ac(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?js(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Ac(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&va(r),Xa(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,a);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Di(t.type)&&Ai(),Gs(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ti),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Gs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)As(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,Ds(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Ou&&(Ou=3):pc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return _a(t.type._context),Gs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ks(o,!1);else{if(0!==Ou||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ks(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zu&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Gs(t),null}else 2*$e()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ii(so,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ti),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ds=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},As=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Xs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[pi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Xs||Zs(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Xs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,fu(e,t,n),Xs=r):fu(e,t,n);break;default:fu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function pu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pu(t,e),yu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){Ec(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:pu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(pu(t,e),yu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?me(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(pu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(pu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:pu(t,e),yu(e);break;case 13:pu(t,e),yu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qu=$e())),4&r&&vu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(l=Xs)||h,pu(t,e),Xs=l):pu(t,e),yu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(f=Js=h;null!==Js;){switch(v=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Zs(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){wu(f);continue}}null!==v?(v.return=d,Js=v):wu(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=pe("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Js=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=o,(Xs=u)&&!c)for(Js=i;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Js=u):_u(i);for(;null!==a;)Js=a,ku(a,t,n),a=a.sibling;Js=i,Ys=s,Xs=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):bu(e)}}function bu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(a(163))}Xs||512&t.flags&&iu(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function _u(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var xu,Eu=Math.ceil,Su=b.ReactCurrentDispatcher,Iu=b.ReactCurrentOwner,Cu=b.ReactCurrentBatchConfig,Tu=0,Nu=null,Pu=null,Ru=0,Du=0,Au=Ei(0),Ou=0,Lu=null,ju=0,Mu=0,Fu=0,Uu=null,Vu=null,qu=0,zu=1/0,Bu=null,Wu=!1,Ku=null,Gu=null,Hu=!1,Qu=null,Yu=0,Xu=0,$u=null,Ju=-1,Zu=0;function ec(){return 0!==(6&Tu)?$e():-1!==Ju?Ju:Ju=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tu)&&0!==Ru?Ru&-Ru:null!==pa.transition?(0===Zu&&(Zu=pt()),Zu):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xu)throw Xu=0,$u=null,Error(a(185));yt(e,n,r),0!==(2&Tu)&&e===Nu||(e===Nu&&(0===(2&Tu)&&(Mu|=n),4===Ou&&sc(e,Ru)),rc(e,r),1===n&&0===Tu&&0===(1&t.mode)&&(zu=$e()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Nu?Ru:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,qi(e)}(uc.bind(null,e)):qi(uc.bind(null,e)),oi((function(){0===(6&Tu)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ju=-1,Zu=0,0!==(6&Tu))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===Nu?Ru:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Tu;Tu|=2;var o=vc();for(Nu===e&&Ru===t||(Bu=null,zu=$e()+500,fc(e,t));;)try{gc();break}catch(u){dc(e,u)}wa(),Su.current=o,Tu=i,null!==Pu?t=0:(Nu=null,Ru=0,t=Ou)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=vt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vu,Bu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qu+500-$e())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vu,Bu),t);break}wc(e,Vu,Bu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vu,Bu),r);break}wc(e,Vu,Bu);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vu,Vu=n,null!==t&&oc(t)),e}function oc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sc(e,t){for(t&=~Fu,t&=~Mu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Tu))throw Error(a(327));_c();var t=ft(e,0);if(0===(1&t))return rc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vu,Bu),rc(e,$e()),null}function cc(e,t){var n=Tu;Tu|=1;try{return e(t)}finally{0===(Tu=n)&&(zu=$e()+500,Ui&&zi())}}function lc(e){null!==Qu&&0===Qu.tag&&0===(6&Tu)&&_c();var t=Tu;Tu|=1;var n=Cu.transition,r=kt;try{if(Cu.transition=null,kt=1,e)return e()}finally{kt=r,Cu.transition=n,0===(6&(Tu=t))&&zi()}}function hc(){Du=Au.current,Si(Au)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:io(),Si(Ni),Si(Ti),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nu=e,Pu=e=Ac(e.current,null),Ru=Du=t,Ou=0,Lu=null,Fu=Mu=ju=0,Vu=Uu=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function dc(e,t){for(;;){var n=Pu;try{if(wa(),ho.current=os,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,yo=mo=po=null,ko=!1,bo=0,Iu.current=null,null===n||null===n.return){Ou=1,Lu=t,Pu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ru,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=ys(s);if(null!==v){v.flags&=-257,gs(v,s,u,0,t),1&v.mode&&ms(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){ms(o,l,t),pc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gs(y,s,u,0,t),va(ls(c,u));break e}}o=c=ls(c,u),4!==Ou&&(Ou=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ja(o,vs(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Gu||!Gu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,ja(o,ps(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function vc(){var e=Su.current;return Su.current=os,null===e?os:e}function pc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Nu||0===(268435455&ju)&&0===(268435455&Mu)||sc(Nu,Ru)}function mc(e,t){var n=Tu;Tu|=2;var r=vc();for(Nu===e&&Ru===t||(Bu=null,fc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Tu=n,Su.current=r,null!==Pu)throw Error(a(261));return Nu=null,Ru=0,Ou}function yc(){for(;null!==Pu;)kc(Pu)}function gc(){for(;null!==Pu&&!Ye();)kc(Pu)}function kc(e){var t=xu(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?bc(e):Pu=t,Iu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hs(n,t,Du)))return void(Pu=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Ou=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Ou&&(Ou=5)}function wc(e,t,n){var r=kt,i=Cu.transition;try{Cu.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qu);if(0!==(6&Tu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Nu&&(Pu=Nu=null,Ru=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hu||(Hu=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cu.transition,Cu.transition=null;var s=kt;kt=1;var u=Tu;Tu|=4,Iu.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var v;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(v=f.firstChild);)d=f,f=v;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(v=f.nextSibling))break;d=(f=d).parentNode}f=v}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}p=tu,tu=!1}(e,n),mu(n,e),vr(ti),Wt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Xe(),Tu=u,kt=s,Cu.transition=o}else e.current=n;if(Hu&&(Hu=!1,Qu=e,Yu=i),o=e.pendingLanes,0===o&&(Gu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Ku,Ku=null,e;0!==(1&Yu)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===$u?Xu++:(Xu=0,$u=e):Xu=0,zi()}(e,t,n,r)}finally{Cu.transition=i,kt=r}return null}function _c(){if(null!==Qu){var e=bt(Yu),t=Cu.transition,n=kt;try{if(Cu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Yu=0,0!==(6&Tu))throw Error(a(331));var i=Tu;for(Tu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Js=l;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Js=f;else for(;null!==Js;){var d=(h=Js).sibling,v=h.return;if(au(h),h===l){Js=null;break}if(null!==d){d.return=v,Js=d;break}Js=v}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Js=g;break e}Js=o.return}}var k=e.current;for(Js=k;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else e:for(s=k;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){Ec(u,u.return,_)}if(u===s){Js=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Js=w;break e}Js=u.return}}if(Tu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cu.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=vs(0,t=ls(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=Oa(t,e=ps(t,e=ls(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Ru&n)===n&&(4===Ou||3===Ou&&(130023424&Ru)===Ru&&500>$e()-qu?fc(e,0):Fu|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return He(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Dc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case E:s=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=o,e;case A:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case C:s=9;break e;case T:s=11;break e;case R:s=14;break e;case D:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=zc(null),n=e.current,(a=Aa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Aa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&ji(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Ii(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ii(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Ri(t,Ti.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Is(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Ms(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ii(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Aa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xs(e,t,r,i=ma(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Bs(e,t),t.tag=1,Di(r)?(e=!0,ji(t)):e=!1,Ea(t,n),Ba(t,r,i),Ka(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Kc(o);s.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Kc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[vi]=u.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Kc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[vi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&Tu)&&(zu=$e()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Ce,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,s),e[vi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},670:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+T(u,0):a,w(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+T(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},A={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:A,ReactCurrentOwner:x};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,v=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!p)if(null!==r(c))p=!0,A(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){p=!1,m&&(m=!1,g(I),I=-1),v=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&O(w,h.startTime-n),u=!1}return u}finally{f=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,I=-1,C=5,T=-1;function N(){return!(t.unstable_now()-T<C)}function P(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=P,x=function(){D.postMessage(null)}}else x=function(){y(P,0)};function A(e){S=e,E||(E=!0,x())}function O(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,A(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(I),I=-1):m=!0,O(w,a-o))):(e.sortIndex=s,n(c,e),p||v||(p=!0,A(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".93df1837.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="theconnect:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/data-track-full-scale/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunktheconnect=self.webpackChunktheconnect||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ye},SDK_VERSION:function(){return gn},_DEFAULT_ENTRY_NAME:function(){return an},_addComponent:function(){return cn},_addOrOverwriteComponent:function(){return ln},_apps:function(){return sn},_clearComponents:function(){return vn},_components:function(){return un},_getProvider:function(){return fn},_registerComponent:function(){return hn},_removeServiceInstance:function(){return dn},deleteApp:function(){return _n},getApp:function(){return bn},getApps:function(){return wn},initializeApp:function(){return kn},onLog:function(){return Sn},registerVersion:function(){return En},setLogLevel:function(){return In}});var t,r=n(791),i=n.t(r,2);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function k(e){var t=m();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function b(e,t,n){return b=m()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&d(i,n.prototype),i},b.apply(null,arguments)}function w(e){var t="function"===typeof Map?new Map:void 0;return w=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,e)},w(e)}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var x,E="popstate";function S(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function I(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function C(e,t){return{usr:e.state,key:e.key,idx:t}}function T(e,t,n,r){return void 0===n&&(n=null),_({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?P(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function N(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function P(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function R(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,h=t.Pop,f=null,d=v();function v(){return(l.state||{idx:null}).idx}function p(){h=t.Pop;var e=v(),n=null==e?null:e-d;d=e,f&&f({action:h,location:y.location,delta:n})}function m(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:N(e);return S(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(_({},l.state,{idx:d}),""));var y={get action(){return h},get location(){return e(s,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(E,p),f=e,function(){s.removeEventListener(E,p),f=null}},createHref:function(e){return n(s,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;var i=T(y.location,e,n);r&&r(i,e);var a=C(i,d=v()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(dr){s.location.assign(o)}c&&f&&f({action:h,location:y.location,delta:1})},replace:function(e,n){h=t.Replace;var i=T(y.location,e,n);r&&r(i,e);var a=C(i,d=v()),o=y.createHref(i);l.replaceState(a,"",o),c&&f&&f({action:h,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(x||(x={}));function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function L(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=P(e):(S(!(i=_({},e)).pathname||!i.pathname.includes("?"),A("?","pathname","search",i)),S(!i.pathname||!i.pathname.includes("#"),A("#","pathname","hash",i)),S(!i.search||!i.search.includes("#"),A("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?P(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:M(a),hash:F(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var j=function(e){return e.join("/").replace(/\/\/+/g,"/")},M=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},F=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},U=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n)}(w(Error));var V=["post","put","patch","delete"],q=(new Set(V),["get"].concat(V));new Set(q),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var z="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},B=r.useState,W=r.useEffect,K=r.useLayoutEffect,G=r.useDebugValue;function H(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!z(n,r)}catch(dr){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var Q=r.createContext(null);var Y=r.createContext(null);var X=r.createContext(null);var $=r.createContext({outlet:null,matches:[]});var J=r.createContext(null);function Z(){return null!=r.useContext(X)}function ee(){return Z()||S(!1),r.useContext(X).location}function te(){Z()||S(!1);var e=r.useContext(Y),t=e.basename,n=e.navigator,i=r.useContext($).matches,a=ee().pathname,o=JSON.stringify(O(i).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);r.useEffect((function(){s.current=!0}));var u=r.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=L(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:j([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return u}function ne(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext($).matches,a=ee().pathname,o=JSON.stringify(O(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return L(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}var re,ie;r.Component;!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(re||(re={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ie||(ie={}));var ae;function oe(e){S(!1)}function se(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,h=e.static,f=void 0!==h&&h;Z()&&S(!1);var d=i.replace(/^\/*/,"/"),v=r.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof s&&(s=P(s));var p=s,m=p.pathname,y=void 0===m?"/":m,g=p.search,k=void 0===g?"":g,b=p.hash,w=void 0===b?"":b,_=p.state,x=void 0===_?null:_,E=p.key,I=void 0===E?"default":E,C=r.useMemo((function(){var e=D(y,d);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:I}}),[d,y,k,w,x,I]);return null==C?null:r.createElement(Y.Provider,{value:v},r.createElement(X.Provider,{children:o,value:{location:C,navigationType:c}}))}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(ae||(ae={}));var ue=new Promise((function(){}));r.Component;function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ce.apply(this,arguments)}function le(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var he=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function fe(e){var t=e.basename,n=e.children,i=e.window,a=r.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),R((function(e,t){var n=e.location;return T("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:N(t)}),null,e)}({window:i,v5Compat:!0}));var o=a.current,u=s(r.useState({action:o.action,location:o.location}),2),c=u[0],l=u[1];return r.useLayoutEffect((function(){return o.listen(l)}),[o]),r.createElement(se,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o})}function de(e){var t=e.basename,n=e.children,i=e.window,a=r.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),R((function(e,t){var n=P(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash;return T("",{pathname:i,search:o,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:N(t))}),(function(e,t){I("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}({window:i,v5Compat:!0}));var o=a.current,u=s(r.useState({action:o.action,location:o.location}),2),c=u[0],l=u[1];return r.useLayoutEffect((function(){return o.listen(l)}),[o]),r.createElement(se,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o})}var ve="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,pe=r.forwardRef((function(e,t){var n=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,c=e.to,l=e.preventScrollReset,h=le(e,he),f="string"===typeof c?c:N(c),d=/^[a-z+]+:\/\//i.test(f)||f.startsWith("//"),v=f,p=!1;if(ve&&d){var m=new URL(window.location.href),y=f.startsWith("//")?new URL(m.protocol+f):new URL(f);y.origin===m.origin?v=y.pathname+y.search+y.hash:p=!0}var g=function(e,t){var n=(void 0===t?{}:t).relative;Z()||S(!1);var i=r.useContext(Y),a=i.basename,o=i.navigator,s=ne(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==a&&(h="/"===c?a:j([a,c])),o.createHref({pathname:h,search:l,hash:u})}(v,{relative:i}),k=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,c=te(),l=ee(),h=ne(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:N(l)===N(h);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,h,a,o,i,e,s,u])}(v,{replace:o,state:s,target:u,preventScrollReset:l,relative:i});return r.createElement("a",ce({},h,{href:d?f:g,onClick:p||a?n:function(e){n&&n(e),e.defaultPrevented||k(e)},ref:t,target:u}))}));var me,ye;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(me||(me={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ye||(ye={}));var ge=n(670);function ke(){ke=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new I(i||[]);return r(o,"_invoke",{value:_(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var f={};function d(){}function v(){}function p(){}var m={};u(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=p.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=h(e[r],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:v,configurable:!0}),v.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function be(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(dr){return void n(dr)}s.done?t(u):Promise.resolve(u).then(r,i)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){be(a,r,i,o,s,"next",e)}function s(e){be(a,r,i,o,s,"throw",e)}o(void 0)}))}}function _e(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}var Ee=!1,Se=!1,Ie="${JSCORE_VERSION}",Ce=function(e,t){if(!e)throw Te(t)},Te=function(e){return new Error("Firebase Database ("+Ie+") INTERNAL ASSERT FAILED: "+e)},Ne=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ne(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new Re;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Re=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return f(n)}(w(Error)),De=function(e){var t=Ne(e);return Pe.encodeByteArray(t,!0)},Ae=function(e){return De(e).replace(/\./g,"")},Oe=function(e){try{return Pe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Le(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Le(e[n],t[n]));return e}var je=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Me=function(){try{return je()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/data-track-full-scale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Oe(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Fe=function(e){var t,n;return null===(n=null===(t=Me())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ue=function(){var e;return null===(e=Me())||void 0===e?void 0:e.config},Ve=function(e){var t;return null===(t=Me())||void 0===t?void 0:t["_".concat(e)]},qe=function(){function e(){var t=this;u(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return f(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ze(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(a)),""].join(".")}function Be(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function We(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Ke(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ge(){return!0===Ee||!0===Se}function He(){return!function(){var e,t=null===(e=Me())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ye=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),Xe.prototype.create),a}return f(n)}(w(Error)),Xe=function(){function e(t,n,r){u(this,e),this.service=t,this.serviceName=n,this.errors=r}return f(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?$e(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ye(n,a,t);return o}}]),e}();function $e(e,t){return e.replace(Je,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Je=/\{\$([^}]+)}/g;function Ze(e){return JSON.parse(e)}function et(e){return JSON.stringify(e)}var tt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ze(Oe(a[0])||""),n=Ze(Oe(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function it(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function at(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ot(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(st(s)&&st(u)){if(!ot(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function st(e){return null!==e&&"object"===typeof e}function ut(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ct(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function lt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ht=function(){function e(){u(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return f(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],v=0;v<80;v++){v<40?v<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):v<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var p=(c<<5|c>>>27)+s+d+u+n[v]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=p}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ft(e,t){var n=new dt(e,t);return n.subscribe.bind(n)}var dt=function(){function e(t,n){var r=this;u(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return f(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=xe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=vt),void 0===r.error&&(r.error=vt),void 0===r.complete&&(r.complete=vt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function vt(){}var pt=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function mt(e,t){return"".concat(e," failed: ").concat(t," argument ")}function yt(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(mt(e,t)+"must be a valid function.")}function gt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(mt(e,t)+"must be a valid context object.")}var kt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function bt(e){return e&&e._delegate?e._delegate:e}function wt(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _t=function(){function e(t,n,r){u(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return f(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),xt="[DEFAULT]",Et=function(){function e(t,n){u(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return f(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new qe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xt})}catch(c){}var t,n=xe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(wt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),wt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=xe(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],h=this.normalizeInstanceIdentifier(c);r===h&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(oN){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===xt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(oN){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt;return this.component?this.component.multipleInstances?e:xt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var St,It,Ct=function(){function e(t){u(this,e),this.name=t,this.providers=new Map}return f(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Et(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Tt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(It||(It={}));var Nt={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},Pt=It.INFO,Rt=(_e(St={},It.DEBUG,"log"),_e(St,It.VERBOSE,"log"),_e(St,It.INFO,"info"),_e(St,It.WARN,"warn"),_e(St,It.ERROR,"error"),St),Dt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Rt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},At=function(){function e(t){u(this,e),this.name=t,this._logLevel=Pt,this._logHandler=Dt,this._userLogHandler=null,Tt.push(this)}return f(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in It))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Nt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.DEBUG].concat(t)),this._logHandler.apply(this,[this,It.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.VERBOSE].concat(t)),this._logHandler.apply(this,[this,It.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.INFO].concat(t)),this._logHandler.apply(this,[this,It.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.WARN].concat(t)),this._logHandler.apply(this,[this,It.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,It.ERROR].concat(t)),this._logHandler.apply(this,[this,It.ERROR].concat(t))}}]),e}();function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jt,Mt;var Ft=new WeakMap,Ut=new WeakMap,Vt=new WeakMap,qt=new WeakMap,zt=new WeakMap;var Bt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ut.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Vt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Wt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Mt||(Mt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ht(this),n),Gt(Ft.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gt(e.apply(Ht(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ht(this),t].concat(r));return Vt.set(a,t.sort?t.sort():[t]),Gt(a)}}function Kt(e){return"function"===typeof e?Wt(e):(e instanceof IDBTransaction&&function(e){if(!Ut.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ut.set(e,t)}}(e),t=e,(jt||(jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Bt):e);var t}function Gt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Gt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ft.set(t,e)})).catch((function(){})),zt.set(t,e),t}(e);if(qt.has(e))return qt.get(e);var t=Kt(e);return t!==e&&(qt.set(e,t),zt.set(t,e)),t}var Ht=function(e){return zt.get(e)};var Qt,Yt,Xt=["get","getKey","getAll","getAllKeys","count"],$t=["put","add","delete","clear"],Jt=new Map;function Zt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Jt.get(t))return Jt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=$t.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Xt.includes(n))){var a=function(){var e=we(ke().mark((function e(t){var a,o,s,u,c,l,h=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Jt.set(t,a),a}}}Bt=function(e){return Lt(Lt({},e),{},{get:function(t,n,r){return Zt(t,n)||e.get(t,n,r)},has:function(t,n){return!!Zt(t,n)||e.has(t,n)}})}(Bt);var en=function(){function e(t){u(this,e),this.container=t}return f(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var tn="@firebase/app",nn="0.9.10",rn=new At("@firebase/app"),an="[DEFAULT]",on=(_e(Qt={},tn,"fire-core"),_e(Qt,"@firebase/app-compat","fire-core-compat"),_e(Qt,"@firebase/analytics","fire-analytics"),_e(Qt,"@firebase/analytics-compat","fire-analytics-compat"),_e(Qt,"@firebase/app-check","fire-app-check"),_e(Qt,"@firebase/app-check-compat","fire-app-check-compat"),_e(Qt,"@firebase/auth","fire-auth"),_e(Qt,"@firebase/auth-compat","fire-auth-compat"),_e(Qt,"@firebase/database","fire-rtdb"),_e(Qt,"@firebase/database-compat","fire-rtdb-compat"),_e(Qt,"@firebase/functions","fire-fn"),_e(Qt,"@firebase/functions-compat","fire-fn-compat"),_e(Qt,"@firebase/installations","fire-iid"),_e(Qt,"@firebase/installations-compat","fire-iid-compat"),_e(Qt,"@firebase/messaging","fire-fcm"),_e(Qt,"@firebase/messaging-compat","fire-fcm-compat"),_e(Qt,"@firebase/performance","fire-perf"),_e(Qt,"@firebase/performance-compat","fire-perf-compat"),_e(Qt,"@firebase/remote-config","fire-rc"),_e(Qt,"@firebase/remote-config-compat","fire-rc-compat"),_e(Qt,"@firebase/storage","fire-gcs"),_e(Qt,"@firebase/storage-compat","fire-gcs-compat"),_e(Qt,"@firebase/firestore","fire-fst"),_e(Qt,"@firebase/firestore-compat","fire-fst-compat"),_e(Qt,"fire-js","fire-js"),_e(Qt,"firebase","fire-js-all"),Qt),sn=new Map,un=new Map;function cn(e,t){try{e.container.addComponent(t)}catch(n){rn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ln(e,t){e.container.addOrOverwriteComponent(t)}function hn(e){var t=e.name;if(un.has(t))return rn.debug("There were multiple attempts to register component ".concat(t,".")),!1;un.set(t,e);var n,r=xe(sn.values());try{for(r.s();!(n=r.n()).done;){cn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function fn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function dn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:an;fn(e,t).clearInstance(n)}function vn(){un.clear()}var pn=(_e(Yt={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),_e(Yt,"bad-app-name","Illegal App name: '{$appName}"),_e(Yt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),_e(Yt,"app-deleted","Firebase App named '{$appName}' already deleted"),_e(Yt,"no-options","Need to provide options, when not being deployed to hosting via source."),_e(Yt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_e(Yt,"invalid-log-argument","First argument to `onLog` must be null or a function."),_e(Yt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),_e(Yt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),_e(Yt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),_e(Yt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Yt),mn=new Xe("app","Firebase",pn),yn=function(){function e(t,n,r){var i=this;u(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",(function(){return i}),"PUBLIC"))}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw mn.create("app-deleted",{appName:this._name})}}]),e}(),gn="9.22.0";function kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:an,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw mn.create("bad-app-name",{appName:String(a)});if(n||(n=Ue()),!n)throw mn.create("no-options");var o=sn.get(a);if(o){if(ot(n,o.options)&&ot(i,o.config))return o;throw mn.create("duplicate-app",{appName:a})}var s,u=new Ct(a),c=xe(un.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;u.addComponent(l)}}catch(f){c.e(f)}finally{c.f()}var h=new yn(n,i,u);return sn.set(a,h),h}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=sn.get(e);if(!t&&e===an&&Ue())return kn();if(!t)throw mn.create("no-app",{appName:e});return t}function wn(){return Array.from(sn.values())}function _n(e){return xn.apply(this,arguments)}function xn(){return xn=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!sn.has(n)){e.next=6;break}return sn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),xn.apply(this,arguments)}function En(e,t,n){var r,i=null!==(r=on[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void rn.warn(s.join(" "))}hn(new _t("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Sn(e,t){if(null!==e&&"function"!==typeof e)throw mn.create("invalid-log-argument");!function(e,t){var n,r=xe(Tt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Nt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:It[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function In(e){var t;t=e,Tt.forEach((function(e){e.setLogLevel(t)}))}var Cn="firebase-heartbeat-store",Tn=null;function Nn(){return Tn||(Tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Gt(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Gt(s.result),e.oldVersion,e.newVersion,Gt(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Cn)}}).catch((function(e){throw mn.create("idb-open",{originalErrorMessage:e.message})}))),Tn}function Pn(e){return Rn.apply(this,arguments)}function Rn(){return Rn=we(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nn();case 3:return n=e.sent,e.next=6,n.transaction(Cn).objectStore(Cn).get(On(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Ye?rn.warn(e.t0.message):(i=mn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),rn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Rn.apply(this,arguments)}function Dn(e,t){return An.apply(this,arguments)}function An(){return An=we(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nn();case 3:return r=e.sent,i=r.transaction(Cn,"readwrite"),a=i.objectStore(Cn),e.next=8,a.put(n,On(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Ye?rn.warn(e.t0.message):(o=mn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),rn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),An.apply(this,arguments)}function On(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ln=function(){function e(t){var n=this;u(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Vn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return f(e,[{key:"triggerHeartbeat",value:function(){var e=we(ke().mark((function e(){var t,n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=jn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=we(ke().mark((function e(){var t,n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=jn(),n=Mn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ae(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jn(){return(new Date).toISOString().substring(0,10)}function Mn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=xe(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),qn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),qn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Fn,Un,Vn=function(){function e(t){u(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return f(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(dr){t(dr)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Pn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Dn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Dn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(wt(r.heartbeats),wt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function qn(e){return Ae(JSON.stringify({version:2,heartbeats:e})).length}Fn="",hn(new _t("platform-logger",(function(e){return new en(e)}),"PRIVATE")),hn(new _t("heartbeat",(function(e){return new Ln(e)}),"PRIVATE")),En(tn,nn,Fn),En(tn,nn,"esm2017"),En("fire-js","");var zn=function(){function e(t,n){var r=this;u(this,e),this._delegate=t,this.firebase=n,cn(t,new _t("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),_n(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:an;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:an;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){cn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ln(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Bn=(_e(Un={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),_e(Un,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Un),Wn=new Xe("app-compat","Firebase",Bn);var Kn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=kn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(nt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:En,setLogLevel:In,onLog:Sn,apps:null,SDK_VERSION:gn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(hn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Wn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Le(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!nt(n,e=e||an))throw Wn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(zn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Le(n,e)},createSubscribe:ft,ErrorFactory:Xe,deepExtend:Le}),n}(),Gn=new At("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Gn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Hn=self.firebase.SDK_VERSION;Hn&&Hn.indexOf("LITE")>=0&&Gn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Qn=Kn;!function(e){En("@firebase/app-compat","0.2.10",e)}();Qn.registerVersion("firebase","9.22.0","app-compat");var Yn="@firebase/database",Xn="0.14.4",$n="";function Jn(e){$n=e}var Zn=function(){function e(t){u(this,e),this.domStorage_=t,this.prefix_="firebase:"}return f(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),et(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ze(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),er=function(){function e(){u(this,e),this.cache_={},this.isInMemoryStorage=!0}return f(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return nt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),tr=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Zn(t)}}catch(n){}return new er},nr=tr("localStorage"),rr=tr("sessionStorage"),ir=new At("@firebase/database"),ar=function(){var e=1;return function(){return e++}}(),or=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ce(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ht;n.update(t);var r=n.digest();return Pe.encodeByteArray(r)},sr=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?et(r):r,t+=" "}return t},ur=null,cr=!0,lr=function(e,t){Ce(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ir.logLevel=It.VERBOSE,ur=ir.log.bind(ir),t&&rr.set("logging_enabled",!0)):"function"===typeof e?ur=e:(ur=null,rr.remove("logging_enabled"))},hr=function(){if(!0===cr&&(cr=!1,null===ur&&!0===rr.get("logging_enabled")&&lr(!0)),ur){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=sr.apply(null,t);ur(r)}},fr=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];hr.apply(void 0,[e].concat(n))}},dr=function(){var e="FIREBASE INTERNAL ERROR: "+sr.apply(void 0,arguments);ir.error(e)},vr=function(){var e="FIREBASE FATAL ERROR: ".concat(sr.apply(void 0,arguments));throw ir.error(e),new Error(e)},pr=function(){var e="FIREBASE WARNING: "+sr.apply(void 0,arguments);ir.warn(e)},mr=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},yr="[MIN_NAME]",gr="[MAX_NAME]",kr=function(e,t){if(e===t)return 0;if(e===yr||t===gr)return-1;if(t===yr||e===gr)return 1;var n=Cr(e),r=Cr(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},br=function(e,t){return e===t?0:e<t?-1:1},wr=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+et(t))},_r=function e(t){if("object"!==typeof t||null===t)return et(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=et(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},xr=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Er(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Sr=function(e){Ce(!mr(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Ir=new RegExp("^-?(0*)\\d{1,10}$"),Cr=function(e){if(Ir.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Tr=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw pr("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Nr=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Pr=function(){function e(t,n){var r=this;u(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){pr('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Rr=function(){function e(t,n,r){var i=this;u(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pr(e)}}]),e}(),Dr=function(){function e(t){u(this,e),this.accessToken=t}return f(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Dr.OWNER="owner";var Ar="5",Or=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Lr="ac",jr="websocket",Mr="long_polling",Fr=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];u(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nr.get("host:"+t)||this._host}return f(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nr.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Ur(e,t,n){var r;if(Ce("string"===typeof t,"typeof type must == string"),Ce("object"===typeof n,"typeof params must == object"),t===jr)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Mr)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Er(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Vr=function(){function e(){u(this,e),this.counters_={}}return f(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;nt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Le(void 0,this.counters_)}}]),e}(),qr={},zr={};function Br(e){var t=e.toString();return qr[t]||(qr[t]=new Vr),qr[t]}var Wr=function(){function e(t){u(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Tr((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Kr="start",Gr="close",Hr=function(){function e(t,n,r,i,a,o,s){var c=this;u(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fr(t),this.stats_=Br(n),this.urlFn=function(e){return c.appCheckToken&&(e[Lr]=c.appCheckToken),Ur(n,Mr,e)}}return f(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Wr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ge()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Qr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Kr)n.id=a,n.password=o;else{if(i!==Gr)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Kr]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Ar,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Lr]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Or.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=et(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=De(t),r=xr(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ge()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=et(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ge()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Qr=function(){function e(t,n,r,i){if(u(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ge())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ar(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){hr("frame writing exception"),s.stack&&hr(s.stack),hr(s)}}}return f(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ge()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){hr("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||hr("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Yr=null;"undefined"!==typeof MozWebSocket?Yr=MozWebSocket:"undefined"!==typeof WebSocket&&(Yr=WebSocket);var Xr=function(){function e(t,n,r,i,a,o,s){u(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fr(this.connId),this.stats_=Br(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return f(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nr.set("previous_websocket_failure",!0);try{var r;if(Ge()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Ar,"/").concat($n,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/data-track-full-scale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Yr(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){nr.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ze(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ce(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=et(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=xr(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Ar,!Ge()&&"undefined"!==typeof location&&location.hostname&&Or.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Lr]=r),i&&(a.p=i),Ur(e,jr,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Yr&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return nr.isInMemoryStorage||!0===nr.get("previous_websocket_failure")}}]),e}();Xr.responsesRequiredToBeHealthy=2,Xr.healthyTimeout=3e4;var $r=function(){function e(t){u(this,e),this.initTransports_(t)}return f(e,[{key:"initTransports_",value:function(t){var n=Xr&&Xr.isAvailable(),r=n&&!Xr.previouslyFailed();if(t.webSocketOnly&&(n||pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Xr];else{var i,a=this.transports_=[],o=xe(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Hr,Xr]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();$r.globalTransportInitialized_=!1;var Jr=function(){function e(t,n,r,i,a,o,s,c,l,h){u(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fr("c:"+this.id+":"),this.transportManager_=new $r(n),this.log_("Connection created"),this.start_()}return f(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Nr((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=wr("t",e),n=wr("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=wr("t",e),n=wr("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=wr("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?dr("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dr("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ar!==n&&pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Nr((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nr((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Zr=function(){function e(){u(this,e)}return f(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),ei=function(){function e(t){u(this,e),this.allowedEvents_=t,this.listeners_={},Ce(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return f(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=wt(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ce(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),ti=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||We()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return f(n,[{key:"getInitialEvent",value:function(e){return Ce("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(ei),ni=function(){function e(t,n){if(u(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return f(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function ri(){return new ni("")}function ii(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ai(e){return e.pieces_.length-e.pieceNum_}function oi(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new ni(e.pieces_,t)}function si(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ui(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ci(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ni(t,0)}function li(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ni)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new ni(n,0)}function hi(e){return e.pieceNum_>=e.pieces_.length}function fi(e,t){var n=ii(e),r=ii(t);if(null===n)return t;if(n===r)return fi(oi(e),oi(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function di(e,t){for(var n=ui(e,0),r=ui(t,0),i=0;i<n.length&&i<r.length;i++){var a=kr(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function vi(e,t){if(ai(e)!==ai(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function pi(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ai(e)>ai(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var mi=f((function e(t,n){u(this,e),this.errorPrefix_=n,this.parts_=ui(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=kt(this.parts_[r]);yi(this)}));function yi(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gi(e))}function gi(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var ki=function(e){v(n,e);var t=k(n);function n(){var e,r,i;return u(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return f(n,[{key:"getInitialEvent",value:function(e){return Ce("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(ei),bi=1e3,wi=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s,c,l){var h;if(u(this,n),(h=t.call(this)).repoInfo_=e,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=o,h.authTokenProvider_=s,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=n.nextPersistentConnectionId_++,h.log_=fr("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=bi,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Ge())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return ki.getInstance().on("visible",h.onVisible_,y(h)),-1===e.host.indexOf("fblocal")&&ti.getInstance().on("online",h.onOnline_,y(h)),h}return f(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(et(i)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new qe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=tt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=tt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ce(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+et(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):dr("Unrecognized action received from server: "+et(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bi),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=we(ke().mark((function e(){var t,r,i,a,o,u,c,l,h,f,d,v,p,m,y=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},h=function(e){Ce(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,v=s(d,2),p=v[0],m=v[1],u?hr("getToken() completed but was canceled"):(hr("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,c=new Jr(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){pr(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&pr(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){hr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){hr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],it(this.interruptReasons_)&&(this.reconnectDelay_=bi,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return _r(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new ni(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){hr("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){hr("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=xe(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=xe(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ge()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+$n.replace(/\./g,"-")]=1,We()?e["framework.cordova"]=1:Ke()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=ti.getInstance().currentlyOnline();return it(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&nt(e,"w")){var n=rt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();pr("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Zr);wi.nextPersistentConnectionId_=0,wi.nextConnectionId_=0;var _i,xi=function(){function e(t,n){u(this,e),this.name=t,this.node=n}return f(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Ei=function(){function e(){u(this,e)}return f(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new xi(yr,e),r=new xi(yr,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return xi.MIN}}]),e}(),Si=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){return kr(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Te("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return xi.MIN}},{key:"maxPost",value:function(){return new xi(gr,_i)}},{key:"makePost",value:function(e,t){return Ce("string"===typeof e,"KeyIndex indexValue must always be a string."),new xi(e,_i)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return _i},set:function(e){_i=e}}]),n}(Ei),Ii=new Si,Ci=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;u(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return f(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Ti=function(){function e(t,n,r,i,a){u(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Ri.EMPTY_NODE,this.right=null!=a?a:Ri.EMPTY_NODE}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Ri.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ri.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Ti.RED=!0,Ti.BLACK=!1;var Ni,Pi=function(){function e(){u(this,e)}return f(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ti(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Ri=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;u(this,e),this.comparator_=t,this.root_=n}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ti.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ti.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Ci(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Ci(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Ci(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Ci(this.root_,null,this.comparator_,!0,e)}}]),e}();function Di(e,t){return kr(e.name,t.name)}function Ai(e,t){return kr(e,t)}Ri.EMPTY_NODE=new Pi;var Oi,Li,ji,Mi=function(e){return"number"===typeof e?"number:"+Sr(e):"string:"+e},Fi=function(e){if(e.isLeafNode()){var t=e.val();Ce("string"===typeof t||"number"===typeof t||"object"===typeof t&&nt(t,".sv"),"Priority must be a string or number.")}else Ce(e===Ni||e.isEmpty(),"priority of unexpected type.");Ce(e===Ni||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ui=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;u(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ce(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Fi(this.priorityNode_)}return f(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return hi(t)?this:".priority"===ii(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ii(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ce(".priority"!==r||1===ai(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(oi(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Mi(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Sr(this.value_):this.value_,this.lazyHash_=or(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ce(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ce(i>=0,"Unknown leaf type: "+n),Ce(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Oi},set:function(e){Oi=e}}]),e}();Ui.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Vi,qi,zi=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?kr(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return xi.MIN}},{key:"maxPost",value:function(){return new xi(gr,new Ui("[PRIORITY-POST]",ji))}},{key:"makePost",value:function(e,t){var n=Li(e);return new xi(t,new Ui("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Ei),Bi=new zi,Wi=Math.log(2),Ki=function(){function e(t){u(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Wi,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return f(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Gi=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new Ti(o,a.node,Ti.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new Ti(o,a.node,Ti.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new Ti(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Ti.BLACK):(s(h,Ti.BLACK),s(h,Ti.RED))}return a}(new Ki(e.length));return new Ri(r||t,a)},Hi={},Qi=function(){function e(t,n){u(this,e),this.indexes_=t,this.indexSet_=n}return f(e,[{key:"get",value:function(e){var t=rt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ri?t:null}},{key:"hasIndex",value:function(e){return nt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ce(t!==Ii,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(xi.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Gi(i,t.getCompare()):Hi;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(at(this.indexes_,(function(e,i){var a=rt(r.indexSet_,i);if(Ce(a,"Missing index implementation for "+i),e===Hi){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(xi.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Gi(o,a.getCompare())}return Hi}var c=n.get(t.name),l=e;return c&&(l=l.remove(new xi(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(at(this.indexes_,(function(e){if(e===Hi)return e;var r=n.get(t.name);return r?e.remove(new xi(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ce(Hi&&Bi,"ChildrenNode.ts has not been loaded"),Vi=Vi||new e({".priority":Hi},{".priority":Bi})}}]),e}(),Yi=function(){function e(t,n,r){u(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Fi(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return f(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||qi}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?qi:t}},{key:"getChild",value:function(e){var t=ii(e);return null===t?this:this.getImmediateChild(t).getChild(oi(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ce(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new xi(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?qi:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ii(e);if(null===n)return t;Ce(".priority"!==ii(e)||1===ai(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(oi(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Bi,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Mi(this.getPriority().val())+":"),this.forEachChild(Bi,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":or(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new xi(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new xi(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new xi(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,xi.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,xi.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xi?-1:0}},{key:"withIndex",value:function(t){if(t===Ii||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Ii||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Bi),r=t.getIterator(Bi),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Ii?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return qi||(qi=new e(new Ri(Ai),null,Qi.Default))}}]),e}();Yi.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Xi=new(function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.call(this,new Ri(Ai),Yi.EMPTY_NODE,Qi.Default)}return f(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Yi.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Yi));Object.defineProperties(xi,{MIN:{value:new xi(yr,Yi.EMPTY_NODE)},MAX:{value:new xi(gr,Xi)}}),Si.__EMPTY_NODE=Yi.EMPTY_NODE,Ui.__childrenNodeConstructor=Yi,Ni=Xi,function(e){ji=e}(Xi);function $i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Yi.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ce(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Ui(n,$i(t))}if(e instanceof Array){var r=Yi.EMPTY_NODE;return Er(e,(function(t,n){if(nt(e,t)&&"."!==t.substring(0,1)){var i=$i(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority($i(t))}var i=[],a=!1,o=e;if(Er(o,(function(e,t){if("."!==e.substring(0,1)){var n=$i(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new xi(e,n)))}})),0===i.length)return Yi.EMPTY_NODE;var s=Gi(i,Di,(function(e){return e.name}),Ai);if(a){var u=Gi(i,Bi.getCompare());return new Yi(s,$i(t),new Qi({".priority":u},{".priority":Bi}))}return new Yi(s,$i(t),Qi.Default)}!function(e){Li=e}($i);var Ji=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).indexPath_=e,Ce(!hi(e)&&".priority"!==ii(e),"Can't create PathIndex with empty path or .priority key"),r}return f(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?kr(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=$i(e),r=Yi.EMPTY_NODE.updateChild(this.indexPath_,n);return new xi(t,r)}},{key:"maxPost",value:function(){var e=Yi.EMPTY_NODE.updateChild(this.indexPath_,Xi);return new xi(gr,e)}},{key:"toString",value:function(){return ui(this.indexPath_,0).join("/")}}]),n}(Ei),Zi=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?kr(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return xi.MIN}},{key:"maxPost",value:function(){return xi.MAX}},{key:"makePost",value:function(e,t){var n=$i(e);return new xi(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Ei),ea=new Zi;function ta(e){return{type:"value",snapshotNode:e}}function na(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ra(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ia(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var aa=function(){function e(t){u(this,e),this.index_=t}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ce(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(ra(t,o)):Ce(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(na(t,n)):a.trackChildChange(ia(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Bi,(function(e,r){t.hasChild(e)||n.trackChildChange(ra(e,r))})),t.isLeafNode()||t.forEachChild(Bi,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(ia(t,r,i))}else n.trackChildChange(na(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Yi.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),oa=function(){function e(t){u(this,e),this.indexedFilter_=new aa(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return f(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new xi(t,n))||(n=Yi.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Yi.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Yi.EMPTY_NODE);var i=this;return t.forEachChild(Bi,(function(e,t){i.matches(new xi(e,t))||(r=r.updateImmediateChild(e,Yi.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),sa=function(){function e(t){var n=this;u(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new oa(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new xi(t,n))||(n=Yi.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Yi.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Yi.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(Yi.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,Yi.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Ce(s.numChildren()===this.limit_,"");var u=new xi(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(ia(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ra(t,h));var v=s.updateImmediateChild(t,Yi.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(na(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(ra(c.name,c.node)),i.trackChildChange(na(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,Yi.EMPTY_NODE)):e}}]),e}(),ua=function(){function e(){u(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bi}return f(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yr}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gr}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Bi}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function ca(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function la(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ha(e,t){var n=e.copy();return n.index_=t,n}function fa(e){var t,n={};if(e.isDefault())return n;if(e.index_===Bi?t="$priority":e.index_===ea?t="$value":e.index_===Ii?t="$key":(Ce(e.index_ instanceof Ji,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=et(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=et(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+et(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=et(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+et(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function da(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Bi&&(t.i=e.index_.toString()),t}var va=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=fr("p:rest:"),o.listens_={},o}return f(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=fa(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),rt(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=fa(e._queryParams),r=e._path.toString(),i=new qe;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ut(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Ze(l.responseText)}catch(n){pr("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&pr("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Zr),pa=function(){function e(){u(this,e),this.rootNode_=Yi.EMPTY_NODE}return f(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function ma(){return{value:null,children:new Map}}function ya(e,t,n){if(hi(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ii(t);e.children.has(r)||e.children.set(r,ma()),ya(e.children.get(r),t=oi(t),n)}}function ga(e,t){if(hi(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Bi,(function(t,n){ya(e,new ni(t),n)})),ga(e,t)}if(e.children.size>0){var r=ii(t);if(t=oi(t),e.children.has(r))ga(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function ka(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){ka(r,new ni(t.toString()+"/"+e),n)}))}var ba,wa=function(){function e(t){u(this,e),this.collection_=t,this.last_=null}return f(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Er(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),_a=function(){function e(t,n){u(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new wa(t);var r=1e4+2e4*Math.random();Nr(this.reportStats_.bind(this),Math.floor(r))}return f(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Er(t,(function(t,i){i>0&&nt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Nr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function xa(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ba||(ba={}));var Ea,Sa=function(){function e(t,n,r){u(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=ba.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f(e,[{key:"operationForChild",value:function(t){if(hi(this.path)){if(null!=this.affectedTree.value)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ni(t));return new e(ri(),n,this.revert)}return Ce(ii(this.path)===t,"operationForChild called for unrelated child."),new e(oi(this.path),this.affectedTree,this.revert)}}]),e}(),Ia=function(){function e(t,n){u(this,e),this.source=t,this.path=n,this.type=ba.LISTEN_COMPLETE}return f(e,[{key:"operationForChild",value:function(t){return hi(this.path)?new e(this.source,ri()):new e(this.source,oi(this.path))}}]),e}(),Ca=function(){function e(t,n,r){u(this,e),this.source=t,this.path=n,this.snap=r,this.type=ba.OVERWRITE}return f(e,[{key:"operationForChild",value:function(t){return hi(this.path)?new e(this.source,ri(),this.snap.getImmediateChild(t)):new e(this.source,oi(this.path),this.snap)}}]),e}(),Ta=function(){function e(t,n,r){u(this,e),this.source=t,this.path=n,this.children=r,this.type=ba.MERGE}return f(e,[{key:"operationForChild",value:function(t){if(hi(this.path)){var n=this.children.subtree(new ni(t));return n.isEmpty()?null:n.value?new Ca(this.source,ri(),n.value):new e(this.source,ri(),n)}return Ce(ii(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,oi(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Na=function(){function e(t,n,r){u(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return f(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(hi(e))return this.isFullyInitialized()&&!this.filtered_;var t=ii(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Pa=f((function e(t){u(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Ra(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Te("Should only compare child_ events.");var r=new xi(t.childName,t.snapshotNode),i=new xi(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Da(e,t){return{eventCache:e,serverCache:t}}function Aa(e,t,n,r){return Da(new Na(t,n,r),e.serverCache)}function Oa(e,t,n,r){return Da(e.eventCache,new Na(t,n,r))}function La(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ja(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Ma=function(){return Ea||(Ea=new Ri(br)),Ea},Fa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ma();u(this,e),this.value=t,this.children=n}return f(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:ri(),value:this.value};if(hi(e))return null;var n=ii(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(oi(e),t);return null!=i?{path:li(new ni(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(hi(t))return this;var n=ii(t),r=this.children.get(n);return null!==r?r.subtree(oi(t)):new e(null)}},{key:"set",value:function(t,n){if(hi(t))return new e(n,this.children);var r=ii(t),i=(this.children.get(r)||new e(null)).set(oi(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(hi(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ii(t),r=this.children.get(n);if(r){var i,a=r.remove(oi(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(hi(e))return this.value;var t=ii(e),n=this.children.get(t);return n?n.get(oi(e)):null}},{key:"setTree",value:function(t,n){if(hi(t))return n;var r,i=ii(t),a=(this.children.get(i)||new e(null)).setTree(oi(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(ri(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(li(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,ri(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(hi(e))return null;var i=ii(e),a=this.children.get(i);return a?a.findOnPath_(oi(e),li(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,ri(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(hi(t))return this;this.value&&r(n,this.value);var i=ii(t),a=this.children.get(i);return a?a.foreachOnPath_(oi(t),li(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(ri(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(li(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Er(t,(function(e,t){n=n.set(new ni(e),t)})),n}}]),e}(),Ua=function(){function e(t){u(this,e),this.writeTree_=t}return f(e,null,[{key:"empty",value:function(){return new e(new Fa(null))}}]),e}();function Va(e,t,n){if(hi(t))return new Ua(new Fa(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=fi(i,t);return a=a.updateChild(o,n),new Ua(e.writeTree_.set(i,a))}var s=new Fa(n),u=e.writeTree_.setTree(t,s);return new Ua(u)}function qa(e,t,n){var r=e;return Er(n,(function(e,n){r=Va(r,li(t,e),n)})),r}function za(e,t){if(hi(t))return Ua.empty();var n=e.writeTree_.setTree(t,new Fa(null));return new Ua(n)}function Ba(e,t){return null!=Wa(e,t)}function Wa(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(fi(n.path,t)):null}function Ka(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Bi,(function(e,n){t.push(new xi(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new xi(e,n.value))})),t}function Ga(e,t){if(hi(t))return e;var n=Wa(e,t);return new Ua(null!=n?new Fa(n):e.writeTree_.subtree(t))}function Ha(e){return e.writeTree_.isEmpty()}function Qa(e,t){return Ya(ri(),e.writeTree_,t)}function Ya(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ce(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ya(li(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(li(e,".priority"),r)),n}function Xa(e,t){return lo(t,e)}function $a(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Ja(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ce(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Za(s,r.path)?i=!1:pi(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=to(e.allWrites,eo,ri()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=za(e.visibleWrites,r.path):Er(r.children,(function(t){e.visibleWrites=za(e.visibleWrites,li(r.path,t))}));return!0}return!1}function Za(e,t){if(e.snap)return pi(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&pi(li(e.path,n),t))return!0;return!1}function eo(e){return e.visible}function to(e,t,n){for(var r=Ua.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)pi(n,o)?r=Va(r,s=fi(n,o),a.snap):pi(o,n)&&(s=fi(o,n),r=Va(r,ri(),a.snap.getChild(s)));else{if(!a.children)throw Te("WriteRecord should have .snap or .children");if(pi(n,o))r=qa(r,s=fi(n,o),a.children);else if(pi(o,n))if(hi(s=fi(o,n)))r=qa(r,ri(),a.children);else{var u=rt(a.children,ii(s));if(u){var c=u.getChild(oi(s));r=Va(r,ri(),c)}}}}}return r}function no(e,t,n,r,i){if(r||i){var a=Ga(e.visibleWrites,t);if(!i&&Ha(a))return n;if(i||null!=n||Ba(a,ri())){return Qa(to(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(pi(e.path,t)||pi(t,e.path))}),t),n||Yi.EMPTY_NODE)}return null}var o=Wa(e.visibleWrites,t);if(null!=o)return o;var s=Ga(e.visibleWrites,t);return Ha(s)?n:null!=n||Ba(s,ri())?Qa(s,n||Yi.EMPTY_NODE):null}function ro(e,t,n,r){return no(e.writeTree,e.treePath,t,n,r)}function io(e,t){return function(e,t,n){var r=Yi.EMPTY_NODE,i=Wa(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Bi,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Ga(e.visibleWrites,t);return n.forEachChild(Bi,(function(e,t){var n=Qa(Ga(a,new ni(e)),t);r=r.updateImmediateChild(e,n)})),Ka(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Ka(Ga(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function ao(e,t,n,r){return function(e,t,n,r,i){Ce(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=li(t,n);if(Ba(e.visibleWrites,a))return null;var o=Ga(e.visibleWrites,a);return Ha(o)?i.getChild(n):Qa(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function oo(e,t){return function(e,t){return Wa(e.visibleWrites,t)}(e.writeTree,li(e.treePath,t))}function so(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=Ga(e.visibleWrites,t),c=Wa(u,ri());if(null!=c)s=c;else{if(null==n)return[];s=Qa(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function uo(e,t,n){return function(e,t,n,r){var i=li(t,n),a=Wa(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Qa(Ga(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function co(e,t){return lo(li(e.treePath,t),e.writeTree)}function lo(e,t){return{treePath:e,writeTree:t}}var ho=function(){function e(){u(this,e),this.changeMap=new Map}return f(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ce("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ce(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ia(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ra(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,na(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Te("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ia(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),fo=new(function(){function e(){u(this,e)}return f(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),vo=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return f(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Na(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uo(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ja(this.viewCache_),i=so(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function po(e,t,n,r,i){var a,o,s=new ho;if(n.type===ba.OVERWRITE){var u=n;u.source.fromUser?a=go(e,t,u.path,u.snap,r,i,s):(Ce(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!hi(u.path),a=yo(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===ba.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=li(n,r);ko(t,ii(c))&&(s=go(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=li(n,r);ko(t,ii(c))||(s=go(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Ce(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=wo(e,t,c.path,c.children,r,i,o,s))}else if(n.type===ba.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=oo(r,n))return t;var s,u=new vo(r,t,i),c=t.eventCache.getNode();if(hi(n)||".priority"===ii(n)){var l;if(t.serverCache.isFullyInitialized())l=ro(r,ja(t));else{var h=t.serverCache.getNode();Ce(h instanceof Yi,"serverChildren would be complete if leaf node"),l=io(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=ii(n),d=uo(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,oi(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Yi.EMPTY_NODE,oi(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ro(r,ja(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=oo(r,ri()),Aa(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=oo(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(hi(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return yo(e,t,n,u.getNode().getChild(n),i,a,s,o);if(hi(n)){var c=new Fa(null);return u.getNode().forEachChild(Ii,(function(e,t){c=c.set(new ni(e),t)})),wo(e,t,n,c,i,a,s,o)}return t}var l=new Fa(null);return r.foreach((function(e,t){var r=li(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),wo(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==ba.LISTEN_COMPLETE)throw Te("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Oa(t,a.getNode(),a.isFullyInitialized()||hi(n),a.isFiltered());return mo(e,o,n,r,fo,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=La(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(ta(La(t)))}}(t,a,h),{viewCache:a,changes:h}}function mo(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=oo(r,n))return t;if(hi(n))if(Ce(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=ja(t),l=io(r,c instanceof Yi?c:Yi.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=ro(r,ja(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=ii(n);if(".priority"===f){Ce(1===ai(n),"Can't have a priority with additional path components");var d=u.getNode(),v=ao(r,n,d,s=t.serverCache.getNode());o=null!=v?e.filter.updatePriority(d,v):u.getNode()}else{var p,m=oi(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=ao(r,n,u.getNode(),s);p=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else p=uo(r,f,t.serverCache);o=null!=p?e.filter.updateChild(u.getNode(),f,p,m,i,a):u.getNode()}}return Aa(t,o,u.isFullyInitialized()||hi(n),e.filter.filtersNodes())}function yo(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(hi(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ii(n);if(!c.isCompleteForPath(n)&&ai(n)>1)return t;var d=oi(n),v=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),v):l.updateChild(c.getNode(),f,v,d,fo,null)}var p=Oa(t,u,c.isFullyInitialized()||hi(n),l.filtersNodes());return mo(e,p,n,i,new vo(i,p,a),s)}function go(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new vo(i,t,a);if(hi(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Aa(t,u,!0,e.filter.filtersNodes());else{var h=ii(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Aa(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=oi(n),v=c.getNode().getImmediateChild(h);if(hi(d))f=r;else{var p=l.getCompleteChild(h);f=null!=p?".priority"===si(d)&&p.getChild(ci(d)).isEmpty()?p:p.updateChild(d,r):Yi.EMPTY_NODE}if(v.equals(f))s=t;else s=Aa(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function ko(e,t){return e.eventCache.isCompleteForChild(t)}function bo(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function wo(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=hi(n)?r:new Fa(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=bo(0,t.serverCache.getNode().getImmediateChild(n),r);c=yo(e,c,new ni(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=bo(0,t.serverCache.getNode().getImmediateChild(n),r);c=yo(e,c,new ni(n),h,i,a,o,s)}})),c}var _o,xo=function(){function e(t,n){u(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new aa(i.getIndex()),o=(r=i).loadsAllData()?new aa(r.getIndex()):r.hasLimit()?new sa(r):new oa(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,c=n.eventCache,l=a.updateFullNode(Yi.EMPTY_NODE,s.getNode(),null),h=o.updateFullNode(Yi.EMPTY_NODE,c.getNode(),null),f=new Na(l,s.isFullyInitialized(),a.filtersNodes()),d=new Na(h,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=Da(d,f),this.eventGenerator_=new Pa(this.query_)}return f(e,[{key:"query",get:function(){return this.query_}}]),e}();function Eo(e,t){var n=ja(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!hi(t)&&!n.getImmediateChild(ii(t)).isEmpty())?n.getChild(t):null}function So(e){return 0===e.eventRegistrations_.length}function Io(e,t,n){var r=[];if(n){Ce(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Co(e,t,n,r){t.type===ba.MERGE&&null!==t.source.queryId&&(Ce(ja(e.viewCache_),"We should always have a full cache before handling merges"),Ce(La(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=po(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ce(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ce(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ce(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,To(e,s.changes,s.viewCache.eventCache.getNode(),null)}function To(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ra(e,i,"child_removed",t,r,n),Ra(e,i,"child_added",t,r,n),Ra(e,i,"child_moved",a,r,n),Ra(e,i,"child_changed",t,r,n),Ra(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var No,Po=f((function e(){u(this,e),this.views=new Map}));function Ro(e){return 0===e.views.size}function Do(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ce(null!=a,"SyncTree gave us an op for an invalid query."),Co(a,t,n,r)}var o,s=[],u=xe(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(Co(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function Ao(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=ro(n,i?r:null),u=!1;s?u=!0:r instanceof Yi?(s=io(n,r),u=!1):(s=Yi.EMPTY_NODE,u=!1);var c=Da(new Na(s,u,!1),new Na(r,i,!1));return new xo(t,c)}return o}function Oo(e,t,n,r,i,a){var o=Ao(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Bi,(function(e,t){r.push(na(e,t))})),n.isFullyInitialized()&&r.push(ta(n.getNode())),To(e,r,n.getNode(),t)}(o,n)}function Lo(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=Vo(e);if("default"===i){var c,l=xe(e.views.entries());try{for(l.s();!(c=l.n()).done;){var h=s(c.value,2),f=h[0],d=h[1];o=o.concat(Io(d,n,r)),So(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(p){l.e(p)}finally{l.f()}}else{var v=e.views.get(i);v&&(o=o.concat(Io(v,n,r)),So(v)&&(e.views.delete(i),v.query._queryParams.loadsAllData()||a.push(v.query)))}return u&&!Vo(e)&&a.push(new(Ce(_o,"Reference.ts has not been loaded"),_o)(t._repo,t._path)),{removed:a,events:o}}function jo(e){var t,n=[],r=xe(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Mo(e,t){var n,r=null,i=xe(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Eo(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Fo(e,t){if(t._queryParams.loadsAllData())return qo(e);var n=t._queryIdentifier;return e.views.get(n)}function Uo(e,t){return null!=Fo(e,t)}function Vo(e){return null!=qo(e)}function qo(e){var t,n=xe(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var zo=1,Bo=f((function e(t){u(this,e),this.listenProvider_=t,this.syncPointTree_=new Fa(null),this.pendingWriteTree_={visibleWrites:Ua.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Wo(e,t,n,r,i){return function(e,t,n,r,i){Ce(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Va(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Zo(e,new Ca({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Ko(e,t,n,r){!function(e,t,n,r){Ce(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=qa(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Fa.fromObject(n);return Zo(e,new Ta({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Go(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$a(e.pendingWriteTree_,t),i=Ja(e.pendingWriteTree_,t);if(i){var a=new Fa(null);return null!=r.snap?a=a.set(ri(),!0):Er(r.children,(function(e){a=a.set(new ni(e),!0)})),Zo(e,new Sa(r.path,a,n))}return[]}function Ho(e,t,n){return Zo(e,new Ca({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Qo(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||Uo(o,t))){var u=Lo(o,t,n,r);Ro(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return Vo(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=us(f),v=0;v<d.length;++v){var p=d[v],m=p.query,y=ns(e,p);e.listenProvider_.startListening(cs(m),rs(e,m),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(cs(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(is(t));e.listenProvider_.stopListening(cs(t),n)}))}ls(e,c)}return s}function Yo(e,t,n,r){var i=as(e,r);if(null!=i){var a=os(i),o=a.path,s=a.queryId,u=fi(o,t);return ss(e,o,new Ca(xa(s),u,n))}return[]}function Xo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=fi(e,i);a=a||Mo(t,n),o=o||Vo(t)}));var s,u=e.syncPointTree_.get(i);if(u?(o=o||Vo(u),a=a||Mo(u,ri())):(u=new Po,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)s=!0;else{s=!1,a=Yi.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=Mo(t,ri());n&&(a=a.updateImmediateChild(e,n))}))}var l=Uo(u,t);if(!l&&!t._queryParams.loadsAllData()){var h=is(t);Ce(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=hs();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=Xa(e.pendingWriteTree_,i),v=Oo(u,t,n,d,a,s);if(!l&&!o&&!r){var p=Fo(u,t);v=v.concat(fs(e,t,p))}return v}function $o(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Mo(n,fi(e,t));if(r)return r}));return no(r,t,i,n,!0)}function Jo(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=fi(e,n);r=r||Mo(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Mo(i,ri()):(i=new Po,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Na(r,!0,!1):null;return function(e){return La(e.viewCache_)}(Ao(i,t,Xa(e.pendingWriteTree_,t._path),a?o.getNode():Yi.EMPTY_NODE,a))}function Zo(e,t){return es(t,e.syncPointTree_,null,Xa(e.pendingWriteTree_,ri()))}function es(e,t,n,r){if(hi(e.path))return ts(e,t,n,r);var i=t.get(ri());null==n&&null!=i&&(n=Mo(i,ri()));var a=[],o=ii(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=co(r,o);a=a.concat(es(s,u,c,l))}return i&&(a=a.concat(Do(i,e,r,n))),a}function ts(e,t,n,r){var i=t.get(ri());null==n&&null!=i&&(n=Mo(i,ri()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=co(r,t),u=e.operationForChild(t);u&&(a=a.concat(ts(u,i,o,s)))})),i&&(a=a.concat(Do(i,e,r,n))),a}function ns(e,t){var n=t.query,r=rs(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Yi.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=as(e,n);if(r){var i=os(r),a=i.path,o=i.queryId,s=fi(a,t);return ss(e,a,new Ia(xa(o),s))}return[]}(e,n._path,r):function(e,t){return Zo(e,new Ia({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Qo(e,n,null,i)}}}function rs(e,t){var n=is(t);return e.queryToTagMap.get(n)}function is(e){return e._path.toString()+"$"+e._queryIdentifier}function as(e,t){return e.tagToQueryMap.get(t)}function os(e){var t=e.indexOf("$");return Ce(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ni(e.substr(0,t))}}function ss(e,t,n){var r=e.syncPointTree_.get(t);return Ce(r,"Missing sync point for query tag that we're tracking"),Do(r,n,Xa(e.pendingWriteTree_,t),null)}function us(e){return e.fold((function(e,t,n){if(t&&Vo(t))return[qo(t)];var r=[];return t&&(r=jo(t)),Er(n,(function(e,t){r=r.concat(t)})),r}))}function cs(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ce(No,"Reference.ts has not been loaded"),No)(e._repo,e._path):e}function ls(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=is(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function hs(){return zo++}function fs(e,t,n){var r=t._path,i=rs(e,t),a=ns(e,n),o=e.listenProvider_.startListening(cs(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ce(!Vo(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!hi(e)&&t&&Vo(t))return[qo(t).query];var r=[];return t&&(r=r.concat(jo(t).map((function(e){return e.query})))),Er(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(cs(l),rs(e,l))}return o}var ds=function(){function e(t){u(this,e),this.node_=t}return f(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),vs=function(){function e(t,n){u(this,e),this.syncTree_=t,this.path_=n}return f(e,[{key:"getImmediateChild",value:function(t){var n=li(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return $o(this.syncTree_,this.path_)}}]),e}(),ps=function(e,t,n){return e&&"object"===typeof e?(Ce(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ms(e[".sv"],t,n):"object"===typeof e[".sv"]?ys(e[".sv"],t):void Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ms=function(e,t,n){if("timestamp"===e)return n.timestamp;Ce(!1,"Unexpected server value: "+e)},ys=function(e,t,n){e.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ce(!1,"Unexpected increment value: "+r);var i=t.node();if(Ce(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},gs=function(e,t,n,r){return bs(t,new vs(n,e),r)},ks=function(e,t,n){return bs(e,new ds(t),n)};function bs(e,t,n){var r,i=e.getPriority().val(),a=ps(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=ps(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Ui(s,$i(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Ui(a))),u.forEachChild(Bi,(function(e,i){var a=bs(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var ws=f((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};u(this,e),this.name=t,this.parent=n,this.node=r}));function _s(e,t){for(var n=t instanceof ni?t:new ni(t),r=e,i=ii(n);null!==i;){var a=rt(r.node.children,i)||{children:{},childCount:0};r=new ws(i,r,a),i=ii(n=oi(n))}return r}function xs(e){return e.node.value}function Es(e,t){e.node.value=t,Ns(e)}function Ss(e){return e.node.childCount>0}function Is(e,t){Er(e.node.children,(function(n,r){t(new ws(n,e,r))}))}function Cs(e,t,n,r){n&&!r&&t(e),Is(e,(function(e){Cs(e,t,!0,r)})),n&&r&&t(e)}function Ts(e){return new ni(null===e.parent?e.name:Ts(e.parent)+"/"+e.name)}function Ns(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===xs(e)&&!Ss(e)}(n),i=nt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ns(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ns(e))}(e.parent,e.name,e)}var Ps=/[\[\].#$\/\u0000-\u001F\u007F]/,Rs=/[\[\].#$\u0000-\u001F\u007F]/,Ds=10485760,As=function(e){return"string"===typeof e&&0!==e.length&&!Ps.test(e)},Os=function(e){return"string"===typeof e&&0!==e.length&&!Rs.test(e)},Ls=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!mr(e)||e&&"object"===typeof e&&nt(e,".sv")},js=function(e,t,n,r){r&&void 0===t||Ms(mt(e,"value"),t,n)},Ms=function e(t,n,r){var i=r instanceof ni?new mi(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+gi(i));if("function"===typeof n)throw new Error(t+"contains a function "+gi(i)+" with contents = "+n.toString());if(mr(n))throw new Error(t+"contains "+n.toString()+" "+gi(i));if("string"===typeof n&&n.length>Ds/3&&kt(n)>Ds)throw new Error(t+"contains a string greater than "+Ds+" utf8 bytes "+gi(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Er(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!As(n)))throw new Error(t+" contains an invalid key ("+n+") "+gi(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=kt(u),yi(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=kt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+gi(i)+" in addition to actual children.")}},Fs=function(e,t,n,r){if(!r||void 0!==t){var i=mt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Er(t,(function(e,t){var r=new ni(e);if(Ms(i,t,li(n,r)),".priority"===si(r)&&!Ls(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=ui(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!As(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(di);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&pi(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Us=function(e,t,n){if(!n||void 0!==t){if(mr(t))throw new Error(mt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ls(t))throw new Error(mt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vs=function(e,t,n,r){if((!r||void 0!==n)&&!As(n))throw new Error(mt(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},qs=function(e,t,n,r){if((!r||void 0!==n)&&!Os(n))throw new Error(mt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},zs=function(e,t){if(".info"===ii(t))throw new Error(e+" failed = Can't modify data under /.info/")},Bs=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!As(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Os(e)}(n))throw new Error(mt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ws=f((function e(){u(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Ks(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||vi(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Gs(e,t,n){Ks(e,n),Qs(e,(function(e){return vi(e,t)}))}function Hs(e,t,n){Ks(e,n),Qs(e,(function(e){return pi(e,t)||pi(t,e)}))}function Qs(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Ys(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ys(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();ur&&hr("event: "+n.toString()),Tr(r)}}}var Xs="repo_interrupt",$s=function(){function e(t,n,r,i){u(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ws,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ma(),this.transactionQueueTree_=new ws,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Js(e,t,n){if(e.stats_=Br(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new va(e.repoInfo_,(function(t,n,r,i){tu(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return nu(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{et(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new wi(e.repoInfo_,t,(function(t,n,r,i){tu(e,t,n,r,i)}),(function(t){nu(e,t)}),(function(t){!function(e,t){Er(t,(function(t,n){ru(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return zr[n]||(zr[n]=t()),zr[n]}(e.repoInfo_,(function(){return new _a(e.stats_,e.server_)})),e.infoData_=new pa,e.infoSyncTree_=new Bo({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Ho(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),ru(e,"connected",!1),e.serverSyncTree_=new Bo({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Hs(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Zs(e){var t=e.infoData_.getNode(new ni(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function eu(e){return(t=(t={timestamp:Zs(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function tu(e,t,n,r,i){e.dataUpdateCount++;var a=new ni(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=at(n,(function(e){return $i(e)}));o=function(e,t,n,r){var i=as(e,r);if(i){var a=os(i),o=a.path,s=a.queryId,u=fi(o,t),c=Fa.fromObject(n);return ss(e,o,new Ta(xa(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=$i(n);o=Yo(e.serverSyncTree_,a,u,i)}else if(r){var c=at(n,(function(e){return $i(e)}));o=function(e,t,n){var r=Fa.fromObject(n);return Zo(e,new Ta({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=$i(n);o=Ho(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=pu(e,a)),Hs(e.eventQueue_,h,o)}function nu(e,t){ru(e,"connected",t),!1===t&&function(e){lu(e,"onDisconnectEvents");var t=eu(e),n=ma();ka(e.onDisconnect_,ri(),(function(r,i){var a=gs(r,i,e.serverSyncTree_,t);ya(n,r,a)}));var r=[];ka(n,ri(),(function(t,n){r=r.concat(Ho(e.serverSyncTree_,t,n));var i=bu(e,t);pu(e,i)})),e.onDisconnect_=ma(),Hs(e.eventQueue_,ri(),r)}(e)}function ru(e,t,n){var r=new ni("/.info/"+t),i=$i(n);e.infoData_.updateSnapshot(r,i);var a=Ho(e.infoSyncTree_,r,i);Hs(e.eventQueue_,r,a)}function iu(e){return e.nextWriteId_++}function au(e,t,n,r,i){lu(e,"set",{path:t.toString(),value:n,priority:r});var a=eu(e),o=$i(n,r),s=$o(e.serverSyncTree_,t),u=ks(o,s,a),c=iu(e),l=Wo(e.serverSyncTree_,t,u,c,!0);Ks(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||pr("set at "+t+" failed: "+n);var o=Go(e.serverSyncTree_,c,!a);Hs(e.eventQueue_,t,o),hu(e,i,n,r)}));var h=bu(e,t);pu(e,h),Hs(e.eventQueue_,h,[])}function ou(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&ga(e.onDisconnect_,t),hu(e,n,r,i)}))}function su(e,t,n,r){var i=$i(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&ya(e.onDisconnect_,t,i),hu(e,r,n,a)}))}function uu(e,t,n){var r;r=".info"===ii(t._path)?Qo(e.infoSyncTree_,t,n):Qo(e.serverSyncTree_,t,n),Gs(e.eventQueue_,t._path,r)}function cu(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Xs)}function lu(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];hr.apply(void 0,[t].concat(r))}function hu(e,t,n,r){t&&Tr((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function fu(e,t,n){return $o(e.serverSyncTree_,t,n)||Yi.EMPTY_NODE}function du(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ku(e,t),xs(t)){var n=yu(e,t);Ce(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&vu(e,Ts(t),n)}else Ss(t)&&Is(t,(function(t){du(e,t)}))}function vu(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=fu(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ce(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=fi(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){lu(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Go(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);ku(e,_s(e.transactionQueueTree_,t)),du(e,e.transactionQueueTree_),Hs(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)Tr(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{pr("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}pu(e,t)}}),o)}function pu(e,t){var n=mu(e,t),r=Ts(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=fi(n,c.path),h=!1;if(Ce(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(Go(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,s="maxretry",i=i.concat(Go(e.serverSyncTree_,c.currentWriteId,!0));else{var f=fu(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Ms("transaction failed: Data returned ",d,c.path);var v=$i(d);"object"===typeof d&&null!=d&&nt(d,".priority")||(v=v.updatePriority(f.getPriority()));var p=c.currentWriteId,m=eu(e),y=ks(v,f,m);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=y,c.currentWriteId=iu(e),o.splice(o.indexOf(p),1),i=(i=i.concat(Wo(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Go(e.serverSyncTree_,p,!0))}else h=!0,s="nodata",i=i.concat(Go(e.serverSyncTree_,c.currentWriteId,!0))}Hs(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);ku(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Tr(r[c]);du(e,e.transactionQueueTree_)}(e,yu(e,n),r),r}function mu(e,t){var n,r=e.transactionQueueTree_;for(n=ii(t);null!==n&&void 0===xs(r);)r=_s(r,n),n=ii(t=oi(t));return r}function yu(e,t){var n=[];return gu(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function gu(e,t,n){var r=xs(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Is(t,(function(t){gu(e,t,n)}))}function ku(e,t){var n=xs(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Es(t,n.length>0?n:void 0)}Is(t,(function(t){ku(e,t)}))}function bu(e,t){var n=Ts(mu(e,t)),r=_s(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){wu(e,t)})),wu(e,r),Cs(r,(function(t){wu(e,t)})),n}function wu(e,t){var n=xs(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ce(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ce(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Go(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Es(t,void 0):n.length=a+1,Hs(e.eventQueue_,Ts(t),i);for(var s=0;s<r.length;s++)Tr(r[s])}}var _u=function(e,t){var n=xu(e),r=n.namespace;"firebase.com"===n.domain&&vr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||vr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Fr(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ni(n.pathString)}},xu=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=xe(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):pr("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Eu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Su=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Eu.charAt(n%64),n=Math.floor(n/64);Ce(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Eu.charAt(t[r]);return Ce(20===o.length,"nextPushId: Length should be 20."),o}}(),Iu=function(){function e(t,n,r,i){u(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return f(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+et(this.snapshot.exportVal())}}]),e}(),Cu=function(){function e(t,n,r){u(this,e),this.eventRegistration=t,this.error=n,this.path=r}return f(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Tu=function(){function e(t,n){u(this,e),this.snapshotCallback=t,this.cancelCallback=n}return f(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ce(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Nu=function(){function e(t,n){u(this,e),this._repo=t,this._path=n}return f(e,[{key:"cancel",value:function(){var e=new qe;return ou(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){zs("OnDisconnect.remove",this._path);var e=new qe;return su(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){zs("OnDisconnect.set",this._path),js("OnDisconnect.set",e,this._path,!1);var t=new qe;return su(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){zs("OnDisconnect.setWithPriority",this._path),js("OnDisconnect.setWithPriority",e,this._path,!1),Us("OnDisconnect.setWithPriority",t,!1);var n=new qe;return function(e,t,n,r,i){var a=$i(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&ya(e.onDisconnect_,t,a),hu(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){zs("OnDisconnect.update",this._path),Fs("OnDisconnect.update",e,this._path,!1);var t=new qe;return function(e,t,n,r){if(it(n))return hr("onDisconnect().update() called with empty data.  Don't do anything."),void hu(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Er(n,(function(n,r){var i=$i(r);ya(e.onDisconnect_,li(t,n),i)})),hu(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Pu=function(){function e(t,n,r,i){u(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return f(e,[{key:"key",get:function(){return hi(this._path)?null:si(this._path)}},{key:"ref",get:function(){return new Ou(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=da(this._queryParams),t=_r(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return da(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=bt(t))instanceof e))return!1;var n=this._repo===t._repo,r=vi(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Ru(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Du(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ii){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==yr)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==gr)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Bi){if(null!=t&&!Ls(t)||null!=n&&!Ls(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ce(e.getIndex()instanceof Ji||e.getIndex()===ea,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Au(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ou=function(e){v(n,e);var t=k(n);function n(e,r){return u(this,n),t.call(this,e,r,new ua,!1)}return f(n,[{key:"parent",get:function(){var e=ci(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Pu),Lu=function(){function e(t,n,r){u(this,e),this._node=t,this.ref=n,this._index=r}return f(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new ni(t),r=Fu(this.ref,t);return new e(this._node.getChild(n),r,Bi)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Fu(n.ref,r),Bi))}))}},{key:"hasChild",value:function(e){var t=new ni(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function ju(e,t){return(e=bt(e))._checkNotDeleted("ref"),void 0!==t?Fu(e._root,t):e._root}function Mu(e,t){(e=bt(e))._checkNotDeleted("refFromURL");var n=_u(t,e._repo.repoInfo_.nodeAdmin);Bs("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||vr("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),ju(e,n.path.toString())}function Fu(e,t){var n,r,i,a;return null===ii((e=bt(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qs(n,r,i,a)):qs("child","path",t,!1),new Ou(e._repo,li(e._path,t))}function Uu(e,t){e=bt(e),zs("push",e._path),js("push",t,e._path,!0);var n,r=Zs(e._repo),i=Su(r),a=Fu(e,i),o=Fu(e,i);return n=null!=t?qu(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Vu(e){return zs("remove",e._path),qu(e,null)}function qu(e,t){e=bt(e),zs("set",e._path),js("set",t,e._path,!1);var n=new qe;return au(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function zu(e,t){e=bt(e),zs("setPriority",e._path),Us("setPriority",t,!1);var n=new qe;return au(e._repo,li(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Bu(e,t,n){if(zs("setWithPriority",e._path),js("setWithPriority",t,e._path,!1),Us("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new qe;return au(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Wu(e,t){Fs("update",t,e._path,!1);var n=new qe;return function(e,t,n,r){lu(e,"update",{path:t.toString(),value:n});var i=!0,a=eu(e),o={};if(Er(n,(function(n,r){i=!1,o[n]=gs(li(t,n),$i(r),e.serverSyncTree_,a)})),i)hr("update() called with empty data.  Don't do anything."),hu(0,r,"ok",void 0);else{var s=iu(e),u=Ko(e.serverSyncTree_,t,o,s);Ks(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||pr("update at "+t+" failed: "+n);var o=Go(e.serverSyncTree_,s,!a),u=o.length>0?pu(e,t):t;Hs(e.eventQueue_,u,o),hu(0,r,n,i)})),Er(n,(function(n){var r=bu(e,li(t,n));pu(e,r)})),Hs(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Ku(e){e=bt(e);var t=new Tu((function(){})),n=new Gu(t);return function(e,t,n){var r=Jo(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=$i(r).withIndex(t._queryParams.getIndex());if(Xo(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=Ho(e.serverSyncTree_,t._path,a);else{var o=rs(e.serverSyncTree_,t);i=Yo(e.serverSyncTree_,t._path,a,o)}return Hs(e.eventQueue_,t._path,i),Qo(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return lu(e,"get for query "+et(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Lu(t,new Ou(e._repo,e._path),e._queryParams.getIndex())}))}var Gu=function(){function e(t){u(this,e),this.callbackContext=t}return f(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Iu("value",this,new Lu(e.snapshotNode,new Ou(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Cu(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Hu=function(){function e(t,n){u(this,e),this.eventType=t,this.callbackContext=n}return f(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Cu(this,e,t):null}},{key:"createEvent",value:function(e,t){Ce(null!=e.childName,"Child events should have a childName.");var n=Fu(new Ou(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Iu(e.type,this,new Lu(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Qu(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){uu(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Tu(n,a||void 0),c="value"===t?new Gu(u):new Hu(t,u);return function(e,t,n){var r;r=".info"===ii(t._path)?Xo(e.infoSyncTree_,t,n):Xo(e.serverSyncTree_,t,n),Gs(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return uu(e._repo,e,c)}}function Yu(e,t,n,r){return Qu(e,"value",t,n,r)}function Xu(e,t,n,r){return Qu(e,"child_added",t,n,r)}function $u(e,t,n,r){return Qu(e,"child_changed",t,n,r)}function Ju(e,t,n,r){return Qu(e,"child_moved",t,n,r)}function Zu(e,t,n,r){return Qu(e,"child_removed",t,n,r)}function ec(e,t,n){var r=null,i=n?new Tu(n):null;"value"===t?r=new Gu(i):t&&(r=new Hu(t,i)),uu(e._repo,e,r)}var tc=f((function e(){u(this,e)})),nc=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){js("endAt",this._value,e._path,!0);var t=la(e._queryParams,this._value,this._key);if(Au(t),Du(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pu(e._repo,e._path,t,e._orderByCalled)}}]),n}(tc);function rc(e,t){return Vs("endAt","key",t,!0),new nc(e,t)}var ic=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){js("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Ii||n?la(e,t,n):la(e,t,yr)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Au(t),Du(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pu(e._repo,e._path,t,e._orderByCalled)}}]),n}(tc);function ac(e,t){return Vs("endBefore","key",t,!0),new ic(e,t)}var oc=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){js("startAt",this._value,e._path,!0);var t=ca(e._queryParams,this._value,this._key);if(Au(t),Du(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Pu(e._repo,e._path,t,e._orderByCalled)}}]),n}(tc);function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Vs("startAt","key",t,!0),new oc(e,t)}var uc=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){js("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Ii||n?ca(e,t,n):ca(e,t,gr)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Au(t),Du(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Pu(e._repo,e._path,t,e._orderByCalled)}}]),n}(tc);function cc(e,t){return Vs("startAfter","key",t,!0),new uc(e,t)}var lc=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pu(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(tc);function hc(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new lc(e)}var fc=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pu(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(tc);function dc(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new fc(e)}var vc=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this))._path=e,r}return f(n,[{key:"_apply",value:function(e){Ru(e,"orderByChild");var t=new ni(this._path);if(hi(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Ji(t),r=ha(e._queryParams,n);return Du(r),new Pu(e._repo,e._path,r,!0)}}]),n}(tc);function pc(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return qs("orderByChild","path",e,!1),new vc(e)}var mc=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){Ru(e,"orderByKey");var t=ha(e._queryParams,Ii);return Du(t),new Pu(e._repo,e._path,t,!0)}}]),n}(tc);function yc(){return new mc}var gc=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){Ru(e,"orderByPriority");var t=ha(e._queryParams,Bi);return Du(t),new Pu(e._repo,e._path,t,!0)}}]),n}(tc);function kc(){return new gc}var bc=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){Ru(e,"orderByValue");var t=ha(e._queryParams,ea);return Du(t),new Pu(e._repo,e._path,t,!0)}}]),n}(tc);function wc(){return new bc}var _c=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){if(js("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nc(this._value,this._key)._apply(new oc(this._value,this._key)._apply(e))}}]),n}(tc);function xc(e,t){return Vs("equalTo","key",t,!0),new _c(e,t)}function Ec(e){for(var t=bt(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){Ce(!_o,"__referenceConstructor has already been defined"),_o=e}(Ou),function(e){Ce(!No,"__referenceConstructor has already been defined"),No=e}(Ou);var Sc={},Ic=!1;function Cc(e,t,n,r){e.repoInfo_=new Fr("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function Tc(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||vr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hr("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=_u(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/data-track-full-scale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=_u(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new Dr(Dr.OWNER):new Rr(e.name,e.options,t);Bs("Invalid Firebase Database URL",s),hi(s.path)||vr("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=Sc[t.name];i||(i={},Sc[t.name]=i);var a=i[e.toURLString()];a&&vr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new $s(e,Ic,n,r),i[e.toURLString()]=a,a}(u,e,l,new Pr(e.name,n));return new Nc(h,e)}var Nc=function(){function e(t,n){u(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return f(e,[{key:"_repo",get:function(){return this._instanceStarted||(Js(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Ou(this._repo,ri())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Sc[t];n&&n[e.key]===e||vr("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),cu(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&vr("Cannot call "+e+" on a deleted database.")}}]),e}();function Pc(){$r.IS_TRANSPORT_INITIALIZED&&pr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Rc(){Pc(),Hr.forceDisallow()}function Dc(){Pc(),Xr.forceDisallow(),Hr.forceAllow()}function Ac(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=bt(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&vr("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Dr(Dr.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ze(r.mockUserToken,e.app.options.projectId);a=new Dr(o)}Cc(i,t,n,a)}function Oc(e){(e=bt(e))._checkNotDeleted("goOffline"),cu(e._repo)}function Lc(e){var t;(e=bt(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Xs)}function jc(e,t){lr(e,t)}var Mc={".sv":"timestamp"};var Fc=function(){function e(t,n){u(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Uc(e,t,n){var r;if(e=bt(e),zs("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new qe,o=Yu(e,(function(){}));return function(e,t,n,r,i,a){lu(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:ar(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=fu(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Ms("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=_s(e.transactionQueueTree_,t),h=xs(l)||[];h.push(o),Es(l,h),"object"===typeof u&&null!==u&&nt(u,".priority")?(c=rt(u,".priority"),Ce(Ls(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=($o(e.serverSyncTree_,t)||Yi.EMPTY_NODE).getPriority().val();var f=eu(e),d=$i(u,c),v=ks(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=v,o.currentWriteId=iu(e);var p=Wo(e.serverSyncTree_,t,v,o.currentWriteId,o.applyLocally);Hs(e.eventQueue_,t,p),du(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new Lu(r,new Ou(e._repo,e._path),Bi),a.resolve(new Fc(n,i)))}),o,i),a.promise}wi.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},wi.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Jn(gn),hn(new _t("database",(function(e,t){var n=t.instanceIdentifier;return Tc(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),En(Yn,Xn,e),En(Yn,Xn,"esm2017")}();var Vc=new At("@firebase/database-compat"),qc=function(e){var t="FIREBASE WARNING: "+e;Vc.warn(t)},zc=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(mt(e,t)+"must be a boolean.")},Bc=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(mt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Wc=function(){function e(t){u(this,e),this._delegate=t}return f(e,[{key:"cancel",value:function(e){pt("OnDisconnect.cancel",0,1,arguments.length),yt("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){pt("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){pt("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){pt("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(pt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,qc("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yt("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Kc=function(){function e(t,n){u(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return pt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Gc=function(){function e(t,n){u(this,e),this._database=t,this._delegate=n}return f(e,[{key:"val",value:function(){return pt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return pt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return pt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return pt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return pt("DataSnapshot.child",0,1,arguments.length),t=String(t),qs("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return pt("DataSnapshot.hasChild",1,1,arguments.length),qs("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return pt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return pt("DataSnapshot.forEach",1,1,arguments.length),yt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return pt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return pt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return pt("DataSnapshot.ref",0,0,arguments.length),new Qc(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Hc=function(){function e(t,n){u(this,e),this.database=t,this._delegate=n}return f(e,[{key:"on",value:function(t,n,r,i){var a,o=this;pt("Query.on",2,4,arguments.length),yt("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new Gc(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return Yu(this._delegate,u,c),n;case"child_added":return Xu(this._delegate,u,c),n;case"child_removed":return Zu(this._delegate,u,c),n;case"child_changed":return $u(this._delegate,u,c),n;case"child_moved":return Ju(this._delegate,u,c),n;default:throw new Error(mt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(pt("Query.off",0,3,arguments.length),Bc("Query.off",e,!0),yt("Query.off","callback",t,!0),gt("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,ec(this._delegate,e,r)}else ec(this._delegate,e)}},{key:"get",value:function(){var e=this;return Ku(this._delegate).then((function(t){return new Gc(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;pt("Query.once",1,4,arguments.length),yt("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new qe,u=function(e,t){var r=new Gc(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":Yu(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":Xu(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":Zu(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":$u(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":Ju(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(mt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return pt("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ec(this._delegate,hc(t)))}},{key:"limitToLast",value:function(t){return pt("Query.limitToLast",1,1,arguments.length),new e(this.database,Ec(this._delegate,dc(t)))}},{key:"orderByChild",value:function(t){return pt("Query.orderByChild",1,1,arguments.length),new e(this.database,Ec(this._delegate,pc(t)))}},{key:"orderByKey",value:function(){return pt("Query.orderByKey",0,0,arguments.length),new e(this.database,Ec(this._delegate,yc()))}},{key:"orderByPriority",value:function(){return pt("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ec(this._delegate,kc()))}},{key:"orderByValue",value:function(){return pt("Query.orderByValue",0,0,arguments.length),new e(this.database,Ec(this._delegate,wc()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return pt("Query.startAt",0,2,arguments.length),new e(this.database,Ec(this._delegate,sc(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return pt("Query.startAfter",0,2,arguments.length),new e(this.database,Ec(this._delegate,cc(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return pt("Query.endAt",0,2,arguments.length),new e(this.database,Ec(this._delegate,rc(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return pt("Query.endBefore",0,2,arguments.length),new e(this.database,Ec(this._delegate,ac(t,n)))}},{key:"equalTo",value:function(t,n){return pt("Query.equalTo",1,2,arguments.length),new e(this.database,Ec(this._delegate,xc(t,n)))}},{key:"toString",value:function(){return pt("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return pt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(pt("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Qc(this.database,new Ou(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,yt(e,"cancel",r.cancel,!0),r.context=n,gt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(mt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Qc=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,new Pu(r._repo,r._path,new ua,!1))).database=e,i._delegate=r,i}return f(n,[{key:"getKey",value:function(){return pt("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return pt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Fu(this._delegate,e))}},{key:"getParent",value:function(){pt("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return pt("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){pt("Reference.set",1,2,arguments.length),yt("Reference.set","onComplete",t,!0);var n=qu(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(pt("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,qc("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}zs("Reference.update",this._delegate._path),yt("Reference.update","onComplete",t,!0);var i=Wu(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){pt("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority","onComplete",n,!0);var r=Bu(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){pt("Reference.remove",0,1,arguments.length),yt("Reference.remove","onComplete",e,!0);var t=Vu(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;pt("Reference.transaction",1,3,arguments.length),yt("Reference.transaction","transactionUpdate",e,!1),yt("Reference.transaction","onComplete",t,!0),zc("Reference.transaction","applyLocally",n,!0);var i=Uc(this._delegate,e,{applyLocally:n}).then((function(e){return new Kc(e.committed,new Gc(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){pt("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority","onComplete",t,!0);var n=zu(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;pt("Reference.push",0,2,arguments.length),yt("Reference.push","onComplete",t,!0);var i=Uu(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return zs("Reference.onDisconnect",this._delegate._path),new Wc(new Nu(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Hc),Yc=function(){function e(t,n){var r=this;u(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Rc,forceLongPolling:Dc}}return f(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ac(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(pt("database.ref",0,1,arguments.length),e instanceof Qc){var t=Mu(this._delegate,e.toString());return new Qc(this,t)}var n=ju(this._delegate,e);return new Qc(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";pt(t,1,1,arguments.length);var n=Mu(this._delegate,e);return new Qc(this,n)}},{key:"goOffline",value:function(){return pt("database.goOffline",0,0,arguments.length),Oc(this._delegate)}},{key:"goOnline",value:function(){return pt("database.goOnline",0,0,arguments.length),Lc(this._delegate)}}]),e}();Yc.ServerValue={TIMESTAMP:Mc,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Xc,$c=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;Jn(r);var u=new Et("auth-internal",new Ct("database-standalone"));return u.setComponent(new _t("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Yc(Tc(t,u,void 0,n,s),t),namespace:a}}}),Jc=Yc.ServerValue;(Xc=Qn).INTERNAL.registerComponent(new _t("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Yc(i,r)}),"PUBLIC").setServiceProps({Reference:Qc,Query:Hc,Database:Yc,DataSnapshot:Gc,enableLogging:jc,INTERNAL:$c,ServerValue:Jc}).setMultipleInstances(!0)),Xc.registerVersion("@firebase/database-compat","0.3.4");function Zc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function el(){return el="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Zc(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},el.apply(this,arguments)}En("firebase","9.22.0","app");function tl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var nl;Object.create;function rl(){return _e({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var il=rl,al=new Xe("auth","Firebase",rl()),ol=new At("@firebase/auth");function sl(e){if(ol.logLevel<=It.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ol.warn.apply(ol,["Auth (".concat(gn,"): ").concat(e)].concat(n))}}function ul(e){if(ol.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ol.error.apply(ol,["Auth (".concat(gn,"): ").concat(e)].concat(n))}}function cl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fl.apply(void 0,[e].concat(n))}function ll(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fl.apply(void 0,[e].concat(n))}function hl(e,t,n){var r=Object.assign(Object.assign({},il()),_e({},t,n));return new Xe("auth","Firebase",r).create(t,{appName:e.name})}function fl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=wt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(wt(o)))}return al.create.apply(al,[e].concat(n))}function dl(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fl.apply(void 0,[t].concat(r))}}function vl(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ul(t),new Error(t)}function pl(e,t){e||vl(t)}function ml(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yl(){return"http:"===gl()||"https:"===gl()}function gl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function kl(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yl()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var bl=function(){function e(t,n){u(this,e),this.shortDelay=t,this.longDelay=n,pl(n>t,"Short delay should be less than long delay!"),this.isMobile=We()||Ke()}return f(e,[{key:"get",value:function(){return kl()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function wl(e,t){pl(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var _l=function(){function e(){u(this,e)}return f(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void vl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void vl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void vl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),xl=(_e(nl={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),_e(nl,"MISSING_CUSTOM_TOKEN","internal-error"),_e(nl,"INVALID_IDENTIFIER","invalid-email"),_e(nl,"MISSING_CONTINUE_URI","internal-error"),_e(nl,"INVALID_PASSWORD","wrong-password"),_e(nl,"MISSING_PASSWORD","missing-password"),_e(nl,"EMAIL_EXISTS","email-already-in-use"),_e(nl,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),_e(nl,"INVALID_IDP_RESPONSE","invalid-credential"),_e(nl,"INVALID_PENDING_TOKEN","invalid-credential"),_e(nl,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),_e(nl,"MISSING_REQ_TYPE","internal-error"),_e(nl,"EMAIL_NOT_FOUND","user-not-found"),_e(nl,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),_e(nl,"EXPIRED_OOB_CODE","expired-action-code"),_e(nl,"INVALID_OOB_CODE","invalid-action-code"),_e(nl,"MISSING_OOB_CODE","internal-error"),_e(nl,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),_e(nl,"INVALID_ID_TOKEN","invalid-user-token"),_e(nl,"TOKEN_EXPIRED","user-token-expired"),_e(nl,"USER_NOT_FOUND","user-token-expired"),_e(nl,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),_e(nl,"INVALID_CODE","invalid-verification-code"),_e(nl,"INVALID_SESSION_INFO","invalid-verification-id"),_e(nl,"INVALID_TEMPORARY_PROOF","invalid-credential"),_e(nl,"MISSING_SESSION_INFO","missing-verification-id"),_e(nl,"SESSION_EXPIRED","code-expired"),_e(nl,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),_e(nl,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),_e(nl,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),_e(nl,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),_e(nl,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),_e(nl,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),_e(nl,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),_e(nl,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),_e(nl,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),_e(nl,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),_e(nl,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),_e(nl,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),_e(nl,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),_e(nl,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),_e(nl,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),_e(nl,"MISSING_CLIENT_TYPE","missing-client-type"),_e(nl,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),_e(nl,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),_e(nl,"INVALID_REQ_TYPE","invalid-req-type"),nl),El=new bl(3e4,6e4);function Sl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Il(e,t,n,r){return Cl.apply(this,arguments)}function Cl(){return Cl=we(ke().mark((function e(t,n,r,i){var a,o=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Tl(t,a,we(ke().mark((function e(){var a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=ut(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",_l.fetch()(Dl(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Tl(e,t,n){return Nl.apply(this,arguments)}function Nl(){return Nl=we(ke().mark((function e(t,n,r){var i,a,o,u,c,l,h,f,d,v;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},xl),n),e.prev=2,a=new Al(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Ol(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=s(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Ol(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Ol(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Ol(t,"user-disabled",u);case 29:if(v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw hl(t,v,d);case 34:cl(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ye)){e.next=41;break}throw e.t0;case 41:cl(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Nl.apply(this,arguments)}function Pl(e,t,n,r){return Rl.apply(this,arguments)}function Rl(){return Rl=we(ke().mark((function e(t,n,r,i){var a,o,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Il(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&cl(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Rl.apply(this,arguments)}function Dl(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?wl(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Al=function(){function e(t){var n=this;u(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ll(n.auth,"network-request-failed"))}),El.get())}))}return f(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ol(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ll(e,t,r);return i.customData._tokenResponse=n,i}function Ll(e,t){return jl.apply(this,arguments)}function jl(){return jl=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}function Ml(e,t){return Fl.apply(this,arguments)}function Fl(){return Fl=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Fl.apply(this,arguments)}function Ul(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Vl(){return Vl=we(ke().mark((function e(t){var n,r,i,a,o,s,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=bt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,dl((a=zl(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ul(ql(a.auth_time)),issuedAtTime:Ul(ql(a.iat)),expirationTime:Ul(ql(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Vl.apply(this,arguments)}function ql(e){return 1e3*Number(e)}function zl(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ul("JWT malformed, contained fewer than 3 sections"),null;try{var a=Oe(r);return a?JSON.parse(a):(ul("Failed to decode base64 JWT payload"),null)}catch(o){return ul("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Bl(e,t){return Wl.apply(this,arguments)}function Wl(){return Wl=we(ke().mark((function e(t,n){var r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ye&&Kl(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Wl.apply(this,arguments)}function Kl(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Gl=function(){function e(t){u(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return f(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Hl=function(){function e(t,n){u(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return f(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ul(this.lastLoginAt),this.creationTime=Ul(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ql(e){return Yl.apply(this,arguments)}function Yl(){return Yl=we(ke().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Bl(t,Ml(r,{idToken:i}));case 6:dl(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Jl(o.providerUserInfo):[],u=$l(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Hl(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Yl.apply(this,arguments)}function Xl(){return(Xl=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bt(t),e.next=3,Ql(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $l(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(wt(n),wt(t))}function Jl(e){return e.map((function(e){var t=e.providerId,n=tl(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Zl(e,t){return eh.apply(this,arguments)}function eh(){return eh=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tl(t,{},we(ke().mark((function e(){var r,i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ut({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Dl(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",_l.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),eh.apply(this,arguments)}var th=function(){function e(){u(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return f(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){dl(e.idToken,"internal-error"),dl("undefined"!==typeof e.idToken,"internal-error"),dl("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=zl(e);return dl(t,"internal-error"),dl("undefined"!==typeof t.exp,"internal-error"),dl("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=we(ke().mark((function e(t){var n,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],dl(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=we(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zl(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return vl("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(dl("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(dl("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(dl("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function nh(e,t){dl("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var rh=function(){function e(t){u(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=tl(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?wt(a.providerData):[],this.metadata=new Hl(a.createdAt||void 0,a.lastLoginAt||void 0)}return f(e,[{key:"getIdToken",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bl(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(dl(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Vl.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Xl.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(dl(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){dl(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=we(ke().mark((function e(t){var n,r,i=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ql(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Bl(this,Ll(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,v=null!==(o=n.photoURL)&&void 0!==o?o:void 0,p=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;dl(k&&x,t,"internal-error");var E=th.fromJSON(this.name,x);dl("string"===typeof k,t,"internal-error"),nh(h,t.name),nh(f,t.name),dl("boolean"===typeof b,t,"internal-error"),dl("boolean"===typeof w,t,"internal-error"),nh(d,t.name),nh(v,t.name),nh(p,t.name),nh(m,t.name),nh(y,t.name),nh(g,t.name);var S=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:v,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=we(ke().mark((function t(n,r){var i,a,o,s=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new th).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ql(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ih=new Map;function ah(e){pl(e instanceof Function,"Expected a class definition");var t=ih.get(e);return t?(pl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ih.set(e,t),t)}var oh=function(){function e(){u(this,e),this.type="NONE",this.storage={}}return f(e,[{key:"_isAvailable",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();oh.type="NONE";var sh=oh;function uh(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ch=function(){function e(t,n,r){u(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=uh(this.userKey,a.apiKey,o),this.fullPersistenceKey=uh("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return f(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?rh._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=we(ke().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,v,p=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=p.length>2&&void 0!==p[2]?p[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ah(sh),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ah(sh),s=uh(i,n.config.apiKey,n.name),u=null,c=xe(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=rh._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function lh(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mh(t))return"Blackberry";if(yh(t))return"Webos";if(fh(t))return"Safari";if((t.includes("chrome/")||dh(t))&&!t.includes("edge/"))return"Chrome";if(ph(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function hh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/firefox\//i.test(e)}function fh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function dh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/crios\//i.test(e)}function vh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iemobile/i.test(e)}function ph(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/android/i.test(e)}function mh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/blackberry/i.test(e)}function yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/webos/i.test(e)}function gh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function kh(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return gh(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function bh(){return function(){var e=Be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function wh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be();return gh(e)||ph(e)||yh(e)||mh(e)||/windows phone/i.test(e)||vh(e)}function _h(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=lh(Be());break;case"Worker":t="".concat(lh(Be()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(gn,"/").concat(r)}function xh(e,t){return Eh.apply(this,arguments)}function Eh(){return Eh=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(t,"GET","/v2/recaptchaConfig",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Eh.apply(this,arguments)}function Sh(e){return void 0!==e&&void 0!==e.enterprise}var Ih=f((function e(t){if(u(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Ch(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ll("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Th(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Nh="https://www.google.com/recaptcha/enterprise.js?render=",Ph="NO_RECAPTCHA",Rh=function(){function e(t){u(this,e),this.type="recaptcha-enterprise",this.auth=jh(t)}return f(e,[{key:"verify",value:function(){var e=we(ke().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Sh(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n(Ph)}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=we(ke().mark((function e(n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xh(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Ih(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Sh(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Ch(Nh+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Dh(e,t,n){return Ah.apply(this,arguments)}function Ah(){return Ah=we(ke().mark((function e(t,n,r){var i,a,o,s,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new Rh(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Ah.apply(this,arguments)}var Oh=function(){function e(t){u(this,e),this.auth=t,this.queue=[]}return f(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=we(ke().mark((function e(t){var n,r,i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=xe(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=xe(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Lh=function(){function e(t,n,r,i){u(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mh(this),this.idTokenSubscription=new Mh(this),this.beforeStateQueue=new Oh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=al,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return f(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ah(t)),this._initializationPromise=this.queue(we(ke().mark((function r(){var i,a;return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ch.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=we(ke().mark((function e(t){var n,r,i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return dl(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ql(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?bt(t):null)&&dl(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=we(ke().mark((function e(t){var n,r=this,i=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&dl(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(we(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ah(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=we(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xh(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Ih(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Rh(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Xe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return dl(n=t&&ah(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ch.create(this,[ah(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=we(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return dl(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return dl(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_h(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=we(ke().mark((function e(){var t,n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_e({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=we(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&sl("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jh(e){return bt(e)}var Mh=function(){function e(t){var n=this;u(this,e),this.auth=t,this.observer=null,this.addObserver=ft((function(e){return n.observer=e}))}return f(e,[{key:"next",get:function(){return dl(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Fh(e,t){var n=fn(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(ot(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;cl(r,"already-initialized")}return n.initialize({options:t})}function Uh(e,t,n){var r=jh(e);dl(r._canInitEmulator,r,"emulator-config-failed"),dl(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Vh(t),o=function(e){var t=Vh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:qh(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:qh(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Vh(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qh(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var zh=function(){function e(t,n){u(this,e),this.providerId=t,this.signInMethod=n}return f(e,[{key:"toJSON",value:function(){return vl("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return vl("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return vl("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return vl("not implemented")}}]),e}();function Bh(e,t){return Wh.apply(this,arguments)}function Wh(){return Wh=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Wh.apply(this,arguments)}function Kh(e,t){return Gh.apply(this,arguments)}function Gh(){return Gh=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl(t,"POST","/v1/accounts:signInWithPassword",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gh.apply(this,arguments)}function Hh(e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl(t,"POST","/v1/accounts:signInWithEmailLink",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qh.apply(this,arguments)}function Yh(e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl(t,"POST","/v1/accounts:signInWithEmailLink",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xh.apply(this,arguments)}var $h=function(e){v(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return u(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return f(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=we(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Dh(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Kh(t,i));case 11:return e.abrupt("return",Kh(t,r).catch(function(){var e=we(ke().mark((function e(n){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Dh(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Kh(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Hh(t,{email:this._email,oobCode:this._password}));case 13:cl(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Bh(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Yh(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:cl(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(zh);function Jh(e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl(t,"POST","/v1/accounts:signInWithIdp",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zh.apply(this,arguments)}var ef=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return f(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Jh(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Jh(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Jh(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ut(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cl("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=tl(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(zh);function tf(e,t){return nf.apply(this,arguments)}function nf(){return nf=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(t,"POST","/v1/accounts:sendVerificationCode",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),nf.apply(this,arguments)}function rf(){return rf=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl(t,"POST","/v1/accounts:signInWithPhoneNumber",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),rf.apply(this,arguments)}function af(){return af=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pl(t,"POST","/v1/accounts:signInWithPhoneNumber",Sl(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ol(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),af.apply(this,arguments)}var of=_e({},"USER_NOT_FOUND","user-not-found");function sf(){return sf=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Pl(t,"POST","/v1/accounts:signInWithPhoneNumber",Sl(t,r),of));case 2:case"end":return e.stop()}}),e)}))),sf.apply(this,arguments)}var uf=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this,"phone","phone")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return rf.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return af.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return sf.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(zh);var cf=function(){function e(t){var n,r,i,a,o,s;u(this,e);var c=ct(lt(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,h=null!==(r=c.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);dl(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return f(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ct(lt(e)).link,n=t?ct(lt(t)).deep_link_id:null,r=ct(lt(e)).deep_link_id;return(r?ct(lt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(oN){return null}}}]),e}();var lf=function(){function e(){u(this,e),this.providerId=e.PROVIDER_ID}return f(e,null,[{key:"credential",value:function(e,t){return $h._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=cf.parseLink(t);return dl(n,"argument-error"),$h._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();lf.PROVIDER_ID="password",lf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",lf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var hf=function(){function e(t){u(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return f(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ff=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).scopes=[],e}return f(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return wt(this.scopes)}}]),n}(hf),df=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.call(this,"facebook.com")}return f(n,null,[{key:"credential",value:function(e){return ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(oN){return null}}}]),n}(ff);df.FACEBOOK_SIGN_IN_METHOD="facebook.com",df.PROVIDER_ID="facebook.com";var vf=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return f(n,null,[{key:"credential",value:function(e,t){return ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(oN){return null}}}]),n}(ff);vf.GOOGLE_SIGN_IN_METHOD="google.com",vf.PROVIDER_ID="google.com";var pf=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.call(this,"github.com")}return f(n,null,[{key:"credential",value:function(e){return ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(oN){return null}}}]),n}(ff);pf.GITHUB_SIGN_IN_METHOD="github.com",pf.PROVIDER_ID="github.com";var mf=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.call(this,"twitter.com")}return f(n,null,[{key:"credential",value:function(e,t){return ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(oN){return null}}}]),n}(ff);function yf(e,t){return gf.apply(this,arguments)}function gf(){return gf=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pl(t,"POST","/v1/accounts:signUp",Sl(t,n)));case 1:case"end":return e.stop()}}),e)}))),gf.apply(this,arguments)}mf.TWITTER_SIGN_IN_METHOD="twitter.com",mf.PROVIDER_ID="twitter.com";var kf=function(){function e(t){u(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return f(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=we(ke().mark((function t(n,r,i){var a,o,s,u,c=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,rh._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=bf(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=we(ke().mark((function t(n,r,i){var a;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=bf(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function bf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var wf=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o,s;return u(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return f(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ye);function _f(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw wf._fromErrorAndOperation(e,n,t,r);throw n}))}function xf(e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=we(ke().mark((function e(t,n){var r,i,a=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Bl,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",kf._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ef.apply(this,arguments)}function Sf(e,t){return If.apply(this,arguments)}function If(){return If=we(ke().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Bl(t,_f(i,a,n,t),r);case 6:return dl((o=e.sent).idToken,i,"internal-error"),dl(s=zl(o.idToken),i,"internal-error"),u=s.sub,dl(t.uid===u,i,"user-mismatch"),e.abrupt("return",kf._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&cl(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),If.apply(this,arguments)}function Cf(e,t){return Tf.apply(this,arguments)}function Tf(){return Tf=we(ke().mark((function e(t,n){var r,i,a,o,s=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,_f(t,i,n);case 4:return a=e.sent,e.next=7,kf._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Nf(e,t){return Pf.apply(this,arguments)}function Pf(){return Pf=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cf(jh(t),n));case 1:case"end":return e.stop()}}),e)}))),Pf.apply(this,arguments)}function Rf(){return Rf=we(ke().mark((function e(t,n,r){var i,a,o,s,u,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=jh(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Dh(a,o,"signUpPassword");case 5:u=e.sent,s=yf(a,u),e.next=10;break;case 9:s=yf(a,o).catch(function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Dh(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",yf(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,kf._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Rf.apply(this,arguments)}function Df(e,t,n,r){return bt(e).onIdTokenChanged(t,n,r)}function Af(e,t,n){return bt(e).beforeAuthStateChanged(t,n)}function Of(e,t){return Il(e,"POST","/v2/accounts/mfaEnrollment:start",Sl(e,t))}function Lf(e,t){return Il(e,"POST","/v2/accounts/mfaEnrollment:start",Sl(e,t))}function jf(e,t){return Il(e,"POST","/v2/accounts/mfaEnrollment:finalize",Sl(e,t))}new WeakMap;var Mf="__sak",Ff=function(){function e(t,n){u(this,e),this.storageRetriever=t,this.type=n}return f(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch(oN){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Uf=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Be();return fh(e)||gh(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=wh(),e._shouldAllowMigration=!0,e}return f(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);bh()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=we(ke().mark((function e(t,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,el(p(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(ke().mark((function e(t){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,el(p(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,el(p(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ff);Uf.type="LOCAL";var Vf=Uf,qf=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return f(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ff);qf.type="SESSION";var zf=qf;function Bf(e){return Promise.all(e.map(function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Wf=function(){function e(t){u(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return f(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=we(ke().mark((function e(t){var n,r,i,a,o,s,u,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Bf(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Kf(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Wf.receivers=[];var Gf=function(){function e(t){u(this,e),this.target=t,this.handlers=new Set}return f(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=we(ke().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Kf("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Hf(){return window}function Qf(e){Hf().location.href=e}function Yf(){return"undefined"!==typeof Hf().WorkerGlobalScope&&"function"===typeof Hf().importScripts}function Xf(){return $f.apply(this,arguments)}function $f(){return($f=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Jf(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Zf="firebaseLocalStorageDb",ed="firebaseLocalStorage",td="fbase_key",nd=function(){function e(t){u(this,e),this.request=t}return f(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function rd(e,t){return e.transaction([ed],t?"readwrite":"readonly").objectStore(ed)}function id(){var e=indexedDB.deleteDatabase(Zf);return new nd(e).toPromise()}function ad(){var e=indexedDB.open(Zf,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ed,{keyPath:td})}catch(r){n(r)}})),e.addEventListener("success",we(ke().mark((function n(){var r;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ed)){n.next=12;break}return r.close(),n.next=5,id();case 5:return n.t0=t,n.next=8,ad();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function od(e,t,n){return sd.apply(this,arguments)}function sd(){return sd=we(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=rd(t,!0).put((_e(i={},td,n),_e(i,"value",r),i)),e.abrupt("return",new nd(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function ud(e,t){return cd.apply(this,arguments)}function cd(){return cd=we(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rd(t,!1).get(n),e.next=3,new nd(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),cd.apply(this,arguments)}function ld(e,t){var n=rd(e,!0).delete(t);return new nd(n).toPromise()}var hd=function(){function e(){u(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return f(e,[{key:"_openDb",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,ad();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yf()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=we(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Wf._getInstance(Yf()?self:null),this.receiver._subscribe("keyChanged",function(){var e=we(ke().mark((function e(n,r){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=we(ke().mark((function e(){var t,n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xf();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Gf(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Jf()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ad();case 5:return t=e.sent,e.next=8,od(t,Mf,"1");case 8:return e.next=10,ld(t,Mf);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=we(ke().mark((function e(t,n){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return od(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ud(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ld(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=we(ke().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=rd(e,!1).getAll();return new nd(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=xe(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();hd.type="LOCAL";var fd=hd;function dd(e,t){return Il(e,"POST","/v2/accounts/mfaSignIn:start",Sl(e,t))}function vd(e,t){return Il(e,"POST","/v2/accounts/mfaSignIn:finalize",Sl(e,t))}Th("rcb"),new bl(3e4,6e4);var pd="recaptcha";function md(e,t,n){return yd.apply(this,arguments)}function yd(){return yd=we(ke().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,dl("string"===typeof a,t,"argument-error"),dl(r.type===pd,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return dl("enroll"===s.type,t,"internal-error"),e.next=13,Of(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return dl("signin"===s.type,t,"internal-error"),dl(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,dd(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,tf(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),yd.apply(this,arguments)}var gd=function(){function e(t){u(this,e),this.providerId=e.PROVIDER_ID,this.auth=jh(t)}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return md(this.auth,e,bt(t))}}],[{key:"credential",value:function(e,t){return uf._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?uf._fromTokenResponse(n,r):null}}]),e}();function kd(e,t){return t?ah(t):(dl(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}gd.PROVIDER_ID="phone",gd.PHONE_SIGN_IN_METHOD="phone";var bd=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this,"custom","custom")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return Jh(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Jh(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Jh(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(zh);function wd(e){return Cf(e.auth,new bd(e),e.bypassAuthState)}function _d(e){var t=e.auth,n=e.user;return dl(n,t,"internal-error"),Sf(n,new bd(e),e.bypassAuthState)}function xd(e){return Ed.apply(this,arguments)}function Ed(){return Ed=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,dl(r=t.user,n,"internal-error"),e.abrupt("return",xf(r,new bd(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Ed.apply(this,arguments)}var Sd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];u(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return f(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=we(ke().mark((function t(n,r){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=we(ke().mark((function e(t){var n,r,i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wd;case"linkViaPopup":case"linkViaRedirect":return xd;case"reauthViaPopup":case"reauthViaRedirect":return _d;default:cl(this.auth,"internal-error")}}},{key:"resolve",value:function(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){pl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Id=new bl(2e3,1e4);var Cd=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o){var s;return u(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(s),s}return f(n,[{key:"executeNotNull",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return dl(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=we(ke().mark((function e(){var t,n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pl(1===this.filter.length,"Popup operations only handle one event"),t=Kf(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ll(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ll(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ll(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Id.get())}()}}]),n}(Sd);Cd.currentPopupAction=null;var Td=new Map,Nd=function(e){v(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return f(n,[{key:"execute",value:function(){var e=we(ke().mark((function e(){var t,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Td.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Pd(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,el(p(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Td.set(this.auth._key(),t);case 21:return this.bypassAuthState||Td.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=we(ke().mark((function e(t){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",el(p(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",el(p(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Sd);function Pd(e,t){return Rd.apply(this,arguments)}function Rd(){return Rd=we(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Od(n),i=Ad(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Rd.apply(this,arguments)}function Dd(e,t){Td.set(e._key(),t)}function Ad(e){return ah(e._redirectPersistence)}function Od(e){return uh("pendingRedirect",e.config.apiKey,e.name)}function Ld(e,t){return jd.apply(this,arguments)}function jd(){return jd=we(ke().mark((function e(t,n){var r,i,a,o,s,u=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=jh(t),a=kd(i,n),o=new Nd(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),jd.apply(this,arguments)}var Md=function(){function e(t){u(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return f(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ud(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ud(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ll(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fd(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Fd(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Fd(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ud(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Vd(e){return qd.apply(this,arguments)}function qd(){return qd=we(ke().mark((function e(t){var n,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Il(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}var zd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bd=/^https?/;function Wd(){return Wd=we(ke().mark((function e(t){var n,r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Vd(t);case 4:n=e.sent,r=n.authorizedDomains,i=xe(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Kd(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:cl(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Wd.apply(this,arguments)}function Kd(e){var t=ml(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Bd.test(r))return!1;if(zd.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Gd=new bl(3e4,6e4);function Hd(){var e=Hf().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=wt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Qd=null;function Yd(e){return Qd=Qd||function(e){return new Promise((function(t,n){var r,i,a;function o(){Hd(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Hd(),n(ll(e,"network-request-failed"))},timeout:Gd.get()})}if(null===(i=null===(r=Hf().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Hf().gapi)||void 0===a?void 0:a.load)){var s=Th("iframefcb");return Hf()[s]=function(){gapi.load?o():n(ll(e,"network-request-failed"))},Ch("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Qd=null,e}))}(e),Qd}var Xd=new bl(5e3,15e3),$d={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zd(e){var t=e.config;dl(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?wl(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:gn},i=Jd.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ut(r).slice(1))}function ev(e){return tv.apply(this,arguments)}function tv(){return tv=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yd(t);case 2:return n=e.sent,dl(r=Hf().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Zd(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$d,dontclear:!0},(function(e){return new Promise(function(){var n=we(ke().mark((function n(r,i){var a,o,s;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Hf().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ll(t,"network-request-failed"),o=Hf().setTimeout((function(){i(a)}),Xd.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}var nv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rv="_blank",iv="http://localhost",av=function(){function e(t){u(this,e),this.window=t,this.associatedEvent=null}return f(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ov(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},nv),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Be().toLowerCase();n&&(u=dh(l)?rv:n),hh(l)&&(t=t||iv,c.scrollbars="yes");var h=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(kh(l)&&"_self"!==u)return sv(t||"",u),new av(null);var f=window.open(t||"",u,h);dl(f,e,"popup-blocked");try{f.focus()}catch(d){}return new av(f)}function sv(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var uv=encodeURIComponent("fac");function cv(e,t,n,r,i,a){return lv.apply(this,arguments)}function lv(){return lv=we(ke().mark((function e(t,n,r,i,a,o){var u,c,l,h,f,d,v,p,m,y,g,k,b;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dl(t.config.authDomain,t,"auth-domain-config-required"),dl(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:gn,eventId:a},n instanceof hf)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",it(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(o||{});c<l.length;c++)h=s(l[c],2),f=h[0],d=h[1],u[f]=d;for(n instanceof ff&&(v=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=v.join(",")),t.tenantId&&(u.tid=t.tenantId),p=u,m=0,y=Object.keys(p);m<y.length;m++)g=y[m],void 0===p[g]&&delete p[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(uv,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(hv(t),"?").concat(ut(p).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),lv.apply(this,arguments)}function hv(e){var t=e.config;return t.emulator?wl(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/").concat("__/auth/handler")}var fv="webStorageSupport",dv=function(){function e(){u(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zf,this._completeRedirectFn=Ld,this._overrideRedirectResult=Dd}return f(e,[{key:"_openPopup",value:function(){var e=we(ke().mark((function e(t,n,r,i){var a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pl(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,cv(t,n,r,ml(),i);case 3:return o=e.sent,e.abrupt("return",ov(t,o,Kf()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=we(ke().mark((function e(t,n,r,i){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,cv(t,n,r,ml(),i);case 4:return Qf(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(pl(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev(t);case 2:return n=e.sent,r=new Md(t),n.register("authEvent",(function(e){return dl(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(fv,{type:fv},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[fv];void 0!==i&&t(!!i),cl(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Wd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return wh()||fh()||gh()}}]),e}(),vv=dv,pv=function(){function e(t){u(this,e),this.factorId=t}return f(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return vl("unexpected MultiFactorSessionType")}}}]),e}(),mv=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this,"phone")).credential=e,r}return f(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Il(e,"POST","/v2/accounts/mfaEnrollment:finalize",Sl(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Il(e,"POST","/v2/accounts/mfaSignIn:finalize",Sl(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(pv);(function(){function e(){u(this,e)}return f(e,null,[{key:"assertion",value:function(e){return mv._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var yv=function(){function e(){u(this,e)}return f(e,null,[{key:"assertionForEnrollment",value:function(e,t){return gv._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return gv._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dl("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,Lf(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",kv._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();yv.FACTOR_ID="totp";var gv=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return f(n,[{key:"_finalizeEnroll",value:function(){var e=we(ke().mark((function e(t,n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dl("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",jf(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dl(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",vd(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(pv),kv=function(){function e(t,n,r,i,a,o,s){u(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return f(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(bv(e)||bv(t))&&(r=!0),r&&(bv(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),bv(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function bv(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var wv="@firebase/auth",_v="0.23.2",xv=function(){function e(t){u(this,e),this.auth=t,this.internalListeners=new Map}return f(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){dl(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Ev,Sv=Ve("authIdTokenMaxAge")||300,Iv=null,Cv=function(e){return function(){var t=we(ke().mark((function t(n){var r,i,a;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Sv)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,Iv!==a){t.next=12;break}return t.abrupt("return");case 12:return Iv=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};Ev="Browser",hn(new _t("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;dl(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:Ev,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_h(Ev)},l=new Lh(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ah);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),hn(new _t("auth-internal",(function(e){return function(e){return new xv(e)}(jh(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),En(wv,_v,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ev)),En(wv,_v,"esm2017");var Tv,Nv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pv={},Rv=Rv||{},Dv=Nv||self;function Av(){}function Ov(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Lv(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var jv="closure_uid_"+(1e9*Math.random()>>>0),Mv=0;function Fv(e,t,n){return e.call.apply(e.bind,arguments)}function Uv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Vv(e,t,n){return(Vv=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fv:Uv).apply(null,arguments)}function qv(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zv(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Bv(){this.s=this.s,this.o=this.o}Bv.prototype.s=!1,Bv.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,jv)&&e[jv]||(e[jv]=++Mv))},Bv.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Kv(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Gv(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Ov(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Hv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Hv.prototype.h=function(){this.defaultPrevented=!0};var Qv=function(){if(!Dv.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Dv.addEventListener("test",Av,t),Dv.removeEventListener("test",Av,t)}catch(n){}return e}();function Yv(e){return/^[\s\xa0]*$/.test(e)}var Xv=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function $v(e,t){return e<t?-1:e>t?1:0}function Jv(){var e=Dv.navigator;return e&&(e=e.userAgent)?e:""}function Zv(e){return-1!=Jv().indexOf(e)}function ep(e){return ep[" "](e),e}function tp(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}ep[" "]=Av;var np,rp=Zv("Opera"),ip=Zv("Trident")||Zv("MSIE"),ap=Zv("Edge"),op=ap||ip,sp=Zv("Gecko")&&!(-1!=Jv().toLowerCase().indexOf("webkit")&&!Zv("Edge"))&&!(Zv("Trident")||Zv("MSIE"))&&!Zv("Edge"),up=-1!=Jv().toLowerCase().indexOf("webkit")&&!Zv("Edge");function cp(){var e=Dv.document;return e?e.documentMode:void 0}e:{var lp="",hp=function(){var e=Jv();return sp?/rv:([^\);]+)(\)|;)/.exec(e):ap?/Edge\/([\d\.]+)/.exec(e):ip?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):up?/WebKit\/(\S+)/.exec(e):rp?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(hp&&(lp=hp?hp[1]:""),ip){var fp=cp();if(null!=fp&&fp>parseFloat(lp)){np=String(fp);break e}}np=lp}var dp,vp={};if(Dv.document&&ip){var pp=cp();dp=pp||(parseInt(np,10)||void 0)}else dp=void 0;var mp=dp;function yp(e,t){if(Hv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(sp){e:{try{ep(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:gp[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yp.$.h.call(this)}}zv(yp,Hv);var gp={2:"touch",3:"pen",4:"mouse"};yp.prototype.h=function(){yp.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var kp="closure_listenable_"+(1e6*Math.random()|0),bp=0;function wp(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++bp,this.fa=this.ia=!1}function _p(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function xp(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ep(e){var t={};for(var n in e)t[n]=e[n];return t}var Sp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ip(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Sp.length;a++)n=Sp[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Cp(e){this.src=e,this.g={},this.h=0}function Tp(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Wv(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(_p(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Np(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Cp.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Np(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new wp(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Pp="closure_lm_"+(1e6*Math.random()|0),Rp={};function Dp(e,t,n,r,i){if(r&&r.once)return Op(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Dp(e,t[a],n,r,i);return null}return n=qp(n),e&&e[kp]?e.O(t,n,Lv(r)?!!r.capture:!!r,i):Ap(e,t,n,!1,r,i)}function Ap(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Lv(i)?!!i.capture:!!i,s=Up(e);if(s||(e[Pp]=s=new Cp(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Fp;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qv||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Mp(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Op(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Op(e,t[a],n,r,i);return null}return n=qp(n),e&&e[kp]?e.P(t,n,Lv(r)?!!r.capture:!!r,i):Ap(e,t,n,!0,r,i)}function Lp(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Lp(e,t[a],n,r,i);else r=Lv(r)?!!r.capture:!!r,n=qp(n),e&&e[kp]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Np(a=e.g[t],n,r,i))&&(_p(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Up(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Np(t,n,r,i)),(n=-1<e?t[e]:null)&&jp(n))}function jp(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[kp])Tp(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Mp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Up(t))?(Tp(n,e),0==n.h&&(n.src=null,t[Pp]=null)):_p(e)}}}function Mp(e){return e in Rp?Rp[e]:Rp[e]="on"+e}function Fp(e,t){if(e.fa)e=!0;else{t=new yp(t,this);var n=e.listener,r=e.la||e.src;e.ia&&jp(e),e=n.call(r,t)}return e}function Up(e){return(e=e[Pp])instanceof Cp?e:null}var Vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function qp(e){return"function"===typeof e?e:(e[Vp]||(e[Vp]=function(t){return e.handleEvent(t)}),e[Vp])}function zp(){Bv.call(this),this.i=new Cp(this),this.S=this,this.J=null}function Bp(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Hv(t,e);else if(t instanceof Hv)t.target=t.target||e;else{var i=t;Ip(t=new Hv(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Wp(o,r,!0,t)&&i}if(i=Wp(o=t.g=e,r,!0,t)&&i,i=Wp(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Wp(o=t.g=n[a],r,!1,t)&&i}function Wp(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Tp(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}zv(zp,Bv),zp.prototype[kp]=!0,zp.prototype.removeEventListener=function(e,t,n,r){Lp(this,e,t,n,r)},zp.prototype.N=function(){if(zp.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_p(n[r]);delete t.g[e],t.h--}}this.J=null},zp.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},zp.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Kp=Dv.JSON.stringify;function Gp(){var e=em,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Hp,Qp=function(){function e(){u(this,e),this.h=this.g=null}return f(e,[{key:"add",value:function(e,t){var n=Yp.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Yp=new(function(){function e(t,n){u(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return f(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Xp}),(function(e){return e.reset()})),Xp=function(){function e(){u(this,e),this.next=this.g=this.h=null}return f(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function $p(e){Dv.setTimeout((function(){throw e}),0)}function Jp(e,t){Hp||function(){var e=Dv.Promise.resolve(void 0);Hp=function(){e.then(tm)}}(),Zp||(Hp(),Zp=!0),em.add(e,t)}var Zp=!1,em=new Qp;function tm(){for(var e;e=Gp();){try{e.h.call(e.g)}catch(n){$p(n)}var t=Yp;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Zp=!1}function nm(e,t){zp.call(this),this.h=e||1,this.g=t||Dv,this.j=Vv(this.qb,this),this.l=Date.now()}function rm(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function im(e,t,n){if("function"===typeof e)n&&(e=Vv(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Vv(e.handleEvent,e)}return 2147483647<Number(t)?-1:Dv.setTimeout(e,t||0)}function am(e){e.g=im((function(){e.g=null,e.i&&(e.i=!1,am(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}zv(nm,zp),(Tv=nm.prototype).ga=!1,Tv.T=null,Tv.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bp(this,"tick"),this.ga&&(rm(this),this.start()))}},Tv.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Tv.N=function(){nm.$.N.call(this),rm(this),delete this.g};var om=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return f(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:am(this)}},{key:"N",value:function(){el(p(n.prototype),"N",this).call(this),this.g&&(Dv.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Bv);function sm(e){Bv.call(this),this.h=e,this.g={}}zv(sm,Bv);var um=[];function cm(e,t,n,r){Array.isArray(n)||(n&&(um[0]=n.toString()),n=um);for(var i=0;i<n.length;i++){var a=Dp(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function lm(e){xp(e.g,(function(e,t){this.g.hasOwnProperty(t)&&jp(e)}),e),e.g={}}function hm(){this.g=!0}function fm(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Kp(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}sm.prototype.N=function(){sm.$.N.call(this),lm(this)},sm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hm.prototype.Ea=function(){this.g=!1},hm.prototype.info=function(){};var dm={},vm=null;function pm(){return vm=vm||new zp}function mm(e){Hv.call(this,dm.Ta,e)}function ym(e){var t=pm();Bp(t,new mm(t))}function gm(e,t){Hv.call(this,dm.STAT_EVENT,e),this.stat=t}function km(e){var t=pm();Bp(t,new gm(t,e))}function bm(e,t){Hv.call(this,dm.Ua,e),this.size=t}function wm(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Dv.setTimeout((function(){e()}),t)}dm.Ta="serverreachability",zv(mm,Hv),dm.STAT_EVENT="statevent",zv(gm,Hv),dm.Ua="timingevent",zv(bm,Hv);var _m={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Em(){}function Sm(e){return e.h||(e.h=e.i())}function Im(){}Em.prototype.h=null;var Cm,Tm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nm(){Hv.call(this,"d")}function Pm(){Hv.call(this,"c")}function Rm(){}function Dm(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new sm(this),this.P=Om,e=op?125:void 0,this.V=new nm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Am}function Am(){this.i=null,this.g="",this.h=!1}zv(Nm,Hv),zv(Pm,Hv),zv(Rm,Em),Rm.prototype.g=function(){return new XMLHttpRequest},Rm.prototype.i=function(){return{}},Cm=new Rm;var Om=45e3,Lm={},jm={};function Mm(e,t,n){e.L=1,e.v=ny($m(t)),e.s=n,e.S=!0,Fm(e,null)}function Fm(e,t){e.G=Date.now(),zm(e),e.A=$m(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),py(n.i,"t",r),e.C=0,n=e.l.I,e.h=new Am,e.g=mg(e.l,n?t:null,!e.s),0<e.O&&(e.M=new om(Vv(e.Pa,e,e.g),e.O)),cm(e.U,e.g,"readystatechange",e.nb),t=e.I?Ep(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ym(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Um(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Vm(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=qm(e,n))==jm){4==t&&(e.o=4,km(14),i=!1),fm(e.j,e.m,null,"[Incomplete Response]");break}if(r==Lm){e.o=4,km(15),fm(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}fm(e.j,e.m,r,null),Hm(e,r)}Um(e)&&r!=jm&&r!=Lm&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,km(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ug(t),t.L=!0,km(11))):(fm(e.j,e.m,n,"[Invalid Chunked Response]"),Gm(e),Km(e))}function qm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?jm:(n=Number(t.substring(n,r)),isNaN(n)?Lm:(r+=1)+n>t.length?jm:(t=t.substr(r,n),e.C=r+n,t))}function zm(e){e.Y=Date.now()+e.P,Bm(e,e.P)}function Bm(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=wm(Vv(e.lb,e),t)}function Wm(e){e.B&&(Dv.clearTimeout(e.B),e.B=null)}function Km(e){0==e.l.H||e.J||hg(e.l,e)}function Gm(e){Wm(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,rm(e.V),lm(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function Hm(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||xy(n.h,e)))if(!e.K&&xy(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;lg(n),eg(n)}sg(n),km(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=wm(Vv(n.ib,n),6e3));if(1>=_y(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else dg(n,11)}else if((e.K||n.g==e)&&lg(n),!Yv(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var s=a[4];null!=s&&(n.Ga=s,n.j.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Ey(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,ty(r.G,r.F,f))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=pg(r,r.I?r.oa:null,r.Y),d.K){Sy(r.h,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(Wm(v),zm(v)),r.g=d}else og(r);0<n.i.length&&ng(n)}else"stop"!=a[0]&&"close"!=a[0]||dg(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?dg(n,7):Zy(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}ym()}catch(a){}}function Qm(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ov(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Ov(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Ov(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Tv=Dm.prototype).setTimeout=function(e){this.P=e},Tv.nb=function(e){e=e.target;var t=this.M;t&&3==Hy(e)?t.l():this.Pa(e)},Tv.Pa=function(e){try{if(e==this.g)e:{var t=Hy(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||op||this.g&&(this.h.h||this.g.ja()||Qy(this.g)))){this.J||4!=t||7==n||ym(),Wm(this);var r=this.g.da();this.aa=r;t:if(Um(this)){var i=Qy(this.g);e="";var a=i.length,o=4==Hy(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Gm(this),Km(this);var s="";break t}this.h.i=new Dv.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yv(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,km(12),Gm(this),Km(this);break e}fm(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hm(this,r)}this.S?(Vm(this,t,s),op&&this.i&&3==t&&(cm(this.U,this.V,"tick",this.mb),this.V.start())):(fm(this.j,this.m,s,null),Hm(this,s)),4==t&&Gm(this),this.i&&!this.J&&(4==t?hg(this.l,this):(this.i=!1,zm(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,km(12)):(this.o=0,km(13)),Gm(this),Km(this)}}}catch(t){}},Tv.mb=function(){if(this.g){var e=Hy(this.g),t=this.g.ja();this.C<t.length&&(Wm(this),Vm(this,e,t),this.i&&4!=e&&zm(this))}},Tv.cancel=function(){this.J=!0,Gm(this)},Tv.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(ym(),km(17)),Gm(this),this.o=2,Km(this)):Bm(this,this.Y-e)};var Ym=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xm(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xm){this.h=void 0!==t?t:e.h,Jm(this,e.j),this.s=e.s,this.g=e.g,Zm(this,e.m),this.l=e.l,t=e.i;var n=new hy;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ey(this,n),this.o=e.o}else e&&(n=String(e).match(Ym))?(this.h=!!t,Jm(this,n[1]||"",!0),this.s=ry(n[2]||""),this.g=ry(n[3]||"",!0),Zm(this,n[4]),this.l=ry(n[5]||"",!0),ey(this,n[6]||"",!0),this.o=ry(n[7]||"")):(this.h=!!t,this.i=new hy(null,this.h))}function $m(e){return new Xm(e)}function Jm(e,t,n){e.j=n?ry(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zm(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ey(e,t,n){t instanceof hy?(e.i=t,function(e,t){t&&!e.j&&(fy(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(dy(this,t),py(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=iy(t,cy)),e.i=new hy(t,e.h))}function ty(e,t,n){e.i.set(t,n)}function ny(e){return ty(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ry(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function iy(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ay),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ay(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xm.prototype.toString=function(){var e=[],t=this.j;t&&e.push(iy(t,oy,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(iy(t,oy,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(iy(n,"/"==n.charAt(0)?uy:sy,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",iy(n,ly)),e.join("")};var oy=/[#\/\?@]/g,sy=/[#\?:]/g,uy=/[#\?]/g,cy=/[#\?@]/g,ly=/#/g;function hy(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fy(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function dy(e,t){fy(e),t=my(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vy(e,t){return fy(e),t=my(e,t),e.g.has(t)}function py(e,t,n){dy(e,t),0<n.length&&(e.i=null,e.g.set(my(e,t),Kv(n)),e.h+=n.length)}function my(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Tv=hy.prototype).add=function(e,t){fy(this),this.i=null,e=my(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Tv.forEach=function(e,t){fy(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Tv.sa=function(){fy(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Tv.Z=function(e){fy(this);var t=[];if("string"===typeof e)vy(this,e)&&(t=t.concat(this.g.get(my(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Tv.set=function(e,t){return fy(this),this.i=null,vy(this,e=my(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Tv.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Tv.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var yy=f((function e(t,n){u(this,e),this.h=t,this.g=n}));function gy(e){this.l=e||by,Dv.PerformanceNavigationTiming?e=0<(e=Dv.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Dv.g&&Dv.g.Ka&&Dv.g.Ka()&&Dv.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ky,by=10;function wy(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _y(e){return e.h?1:e.g?e.g.size:0}function xy(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ey(e,t){e.g?e.g.add(t):e.h=t}function Sy(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Iy(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=xe(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Kv(e.i)}function Cy(){}function Ty(){this.g=new Cy}function Ny(e,t,n){var r=n||"";try{Qm(e,(function(e,n){var i=e;Lv(e)&&(i=Kp(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Py(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ry(e){this.l=e.fc||null,this.j=e.ob||!1}function Dy(e,t){zp.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ay,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gy.prototype.cancel=function(){if(this.i=Iy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=xe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Cy.prototype.stringify=function(e){return Dv.JSON.stringify(e,void 0)},Cy.prototype.parse=function(e){return Dv.JSON.parse(e,void 0)},zv(Ry,Em),Ry.prototype.g=function(){return new Dy(this.l,this.j)},Ry.prototype.i=(ky={},function(){return ky}),zv(Dy,zp);var Ay=0;function Oy(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ly(e){e.readyState=4,e.l=null,e.j=null,e.A=null,jy(e)}function jy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Tv=Dy.prototype).open=function(e,t){if(this.readyState!=Ay)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,jy(this)},Tv.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Dv).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Tv.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ly(this)),this.readyState=Ay},Tv.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jy(this)),this.g&&(this.readyState=3,jy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Dv.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oy(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Tv.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ly(this):jy(this),3==this.readyState&&Oy(this)}},Tv.Za=function(e){this.g&&(this.response=this.responseText=e,Ly(this))},Tv.Ya=function(e){this.g&&(this.response=e,Ly(this))},Tv.ka=function(){this.g&&Ly(this)},Tv.setRequestHeader=function(e,t){this.v.append(e,t)},Tv.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Tv.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var My=Dv.JSON.parse;function Fy(e){zp.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Uy,this.L=this.M=!1}zv(Fy,zp);var Uy="",Vy=/^https?$/i,qy=["POST","PUT"];function zy(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,By(e),Ky(e)}function By(e){e.F||(e.F=!0,Bp(e,"complete"),Bp(e,"error"))}function Wy(e){if(e.h&&"undefined"!=typeof Rv&&(!e.C[1]||4!=Hy(e)||2!=e.da()))if(e.v&&4==Hy(e))im(e.La,0,e);else if(Bp(e,"readystatechange"),4==Hy(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Ym)[1]||null;if(!a&&Dv.self&&Dv.self.location){var o=Dv.self.location.protocol;a=o.substr(0,o.length-1)}i=!Vy.test(a?a.toLowerCase():"")}t=i}if(t)Bp(e,"complete"),Bp(e,"success");else{e.m=6;try{var s=2<Hy(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.da()+"]",By(e)}}finally{Ky(e)}}}function Ky(e,t){if(e.g){Gy(e);var n=e.g,r=e.C[0]?Av:null;e.g=null,e.C=null,t||Bp(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Gy(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Dv.clearTimeout(e.A),e.A=null)}function Hy(e){return e.g?e.g.readyState:0}function Qy(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Uy:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Zg){return null}}function Yy(e){var t="";return xp(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Xy(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Yy(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ty(e,t,n))}function $y(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jy(e){this.Ga=0,this.i=[],this.j=new hm,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$y("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$y("baseRetryDelayMs",5e3,e),this.hb=$y("retryDelaySeedMs",1e4,e),this.eb=$y("forwardChannelMaxRetries",2,e),this.xa=$y("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new gy(e&&e.concurrentRequestLimit),this.Ja=new Ty,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Zy(e){if(tg(e),3==e.H){var t=e.W++,n=$m(e.G);ty(n,"SID",e.J),ty(n,"RID",t),ty(n,"TYPE","terminate"),ig(e,n),(t=new Dm(e,e.j,t,void 0)).L=2,t.v=ny($m(n)),n=!1,Dv.navigator&&Dv.navigator.sendBeacon&&(n=Dv.navigator.sendBeacon(t.v.toString(),"")),!n&&Dv.Image&&((new Image).src=t.v,n=!0),n||(t.g=mg(t.l,null),t.g.ha(t.v)),t.G=Date.now(),zm(t)}vg(e)}function eg(e){e.g&&(ug(e),e.g.cancel(),e.g=null)}function tg(e){eg(e),e.u&&(Dv.clearTimeout(e.u),e.u=null),lg(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Dv.clearTimeout(e.m),e.m=null)}function ng(e){wy(e.h)||e.m||(e.m=!0,Jp(e.Na,e),e.C=0)}function rg(e,t){var n;n=t?t.m:e.W++;var r=$m(e.G);ty(r,"SID",e.J),ty(r,"RID",n),ty(r,"AID",e.V),ig(e,r),e.o&&e.s&&Xy(r,e.o,e.s),n=new Dm(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=ag(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ey(e.h,n),Mm(n,r,t)}function ig(e,t){e.ma&&xp(e.ma,(function(e,n){ty(t,n,e)})),e.l&&Qm({},(function(e,n){ty(t,n,e)}))}function ag(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Vv(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Ny(l,o,"req"+c+"_")}catch(lk){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function og(e){e.g||e.u||(e.ba=1,Jp(e.Ma,e),e.A=0)}function sg(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=wm(Vv(e.Ma,e),fg(e,e.A)),e.A++,!0)}function ug(e){null!=e.B&&(Dv.clearTimeout(e.B),e.B=null)}function cg(e){e.g=new Dm(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=$m(e.wa);ty(t,"RID","rpc"),ty(t,"SID",e.J),ty(t,"CI",e.M?"0":"1"),ty(t,"AID",e.V),ty(t,"TYPE","xmlhttp"),ig(e,t),e.o&&e.s&&Xy(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=ny($m(t)),n.s=null,n.S=!0,Fm(n,e)}function lg(e){null!=e.v&&(Dv.clearTimeout(e.v),e.v=null)}function hg(e,t){var n=null;if(e.g==t){lg(e),ug(e),e.g=null;var r=2}else{if(!xy(e.h,t))return;n=t.F,Sy(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Bp(r=pm(),new bm(r,n)),ng(e)}else og(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(_y(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=wm(Vv(e.Na,e,t),fg(e,e.C)),e.C++,!0))}(e,t)||2==r&&sg(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:dg(e,5);break;case 4:dg(e,10);break;case 3:dg(e,6);break;default:dg(e,2)}}function fg(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function dg(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Vv(e.pb,e);n||(n=new Xm("//www.google.com/images/cleardot.gif"),Dv.location&&"http"==Dv.location.protocol||Jm(n,"https"),ny(n)),function(e,t){var n=new hm;if(Dv.Image){var r=new Image;r.onload=qv(Py,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qv(Py,n,r,"TestLoadImage: error",!1,t),r.onabort=qv(Py,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qv(Py,n,r,"TestLoadImage: timeout",!1,t),Dv.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else km(2);e.H=0,e.l&&e.l.za(t),vg(e),tg(e)}function vg(e){if(e.H=0,e.pa=[],e.l){var t=Iy(e.h);0==t.length&&0==e.i.length||(Gv(e.pa,t),Gv(e.pa,e.i),e.h.i.length=0,Kv(e.i),e.i.length=0),e.l.ya()}}function pg(e,t,n){var r=n instanceof Xm?$m(n):new Xm(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Zm(r,r.m);else{var i=Dv.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Xm(null,void 0);r&&Jm(a,r),t&&(a.g=t),i&&Zm(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ty(r,n,t),ty(r,"VER",e.qa),ig(e,r),r}function mg(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Fy(new Ry({ob:!0})):new Fy(e.va)).Oa(e.I),t}function yg(){}function gg(){if(ip&&!(10<=Number(mp)))throw Error("Environmental error: no available transport.")}function kg(e,t){zp.call(this),this.g=new Jy(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Yv(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Yv(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _g(this)}function bg(e){Nm.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wg(){Pm.call(this),this.status=1}function _g(e){this.g=e}function xg(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Eg(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Sg(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Tv=Fy.prototype).Oa=function(e){this.M=e},Tv.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cm.g(),this.C=this.u?Sm(this.u):Sm(Cm),this.g.onreadystatechange=Vv(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void zy(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=xe(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Dv.FormData&&e instanceof Dv.FormData,!(0<=Wv(qy,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=xe(n);try{for(l.s();!(c=l.n()).done;){var h=s(c.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(v){l.e(v)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gy(this),0<this.B&&((this.L=function(e){return ip&&tp(vp,9,(function(){for(var e=0,t=Xv(String(np)).split("."),n=Xv("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=$v(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||$v(0==a[2].length,0==o[2].length)||$v(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vv(this.ua,this)):this.A=im(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){zy(this,u)}},Tv.ua=function(){"undefined"!=typeof Rv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bp(this,"timeout"),this.abort(8))},Tv.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Bp(this,"complete"),Bp(this,"abort"),Ky(this))},Tv.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ky(this,!0)),Fy.$.N.call(this)},Tv.La=function(){this.s||(this.G||this.v||this.l?Wy(this):this.kb())},Tv.kb=function(){Wy(this)},Tv.da=function(){try{return 2<Hy(this)?this.g.status:-1}catch(ky){return-1}},Tv.ja=function(){try{return this.g?this.g.responseText:""}catch(ky){return""}},Tv.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),My(t)}},Tv.Ia=function(){return this.m},Tv.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Tv=Jy.prototype).qa=8,Tv.H=1,Tv.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Dm(this,this.j,e,void 0),n=this.s;if(this.U&&(n?Ip(n=Ep(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ag(this,t,r),ty(i=$m(this.G),"RID",e),ty(i,"CVER",22),this.F&&ty(i,"X-HTTP-Session-Id",this.F),ig(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Yy(n)))+"&"+r:this.o&&Xy(i,this.o,n)),Ey(this.h,t),this.bb&&ty(i,"TYPE","init"),this.P?(ty(i,"$req",r),ty(i,"SID","null"),t.ba=!0,Mm(t,i,null)):Mm(t,i,r),this.H=2}}else 3==this.H&&(e?rg(this,e):0==this.i.length||wy(this.h)||rg(this))},Tv.Ma=function(){if(this.u=null,cg(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=wm(Vv(this.jb,this),e)}},Tv.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,km(10),eg(this),cg(this))},Tv.ib=function(){null!=this.v&&(this.v=null,eg(this),sg(this),km(19))},Tv.pb=function(e){e?(this.j.info("Successfully pinged google.com"),km(2)):(this.j.info("Failed to ping google.com"),km(1))},(Tv=yg.prototype).Ba=function(){},Tv.Aa=function(){},Tv.za=function(){},Tv.ya=function(){},Tv.Va=function(){},gg.prototype.g=function(e,t){return new kg(e,t)},zv(kg,zp),kg.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;km(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=pg(e,null,e.Y),ng(e)},kg.prototype.close=function(){Zy(this.g)},kg.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Kp(e),e=n);t.i.push(new yy(t.fb++,e)),3==t.H&&ng(t)},kg.prototype.N=function(){this.g.l=null,delete this.j,Zy(this.g),delete this.g,kg.$.N.call(this)},zv(bg,Nm),zv(wg,Pm),zv(_g,yg),_g.prototype.Ba=function(){Bp(this.g,"a")},_g.prototype.Aa=function(e){Bp(this.g,new bg(e))},_g.prototype.za=function(e){Bp(this.g,new wg)},_g.prototype.ya=function(){Bp(this.g,"b")},zv(xg,(function(){this.blockSize=-1})),xg.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},xg.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Eg(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Eg(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Eg(this,r),i=0;break}}this.h=i,this.i+=t},xg.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ig={};function Cg(e){return-128<=e&&128>e?tp(Ig,e,(function(e){return new Sg([0|e],0>e?-1:0)})):new Sg([0|e],0>e?-1:0)}function Tg(e){if(isNaN(e)||!isFinite(e))return Pg;if(0>e)return Lg(Tg(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ng;return new Sg(t,0)}var Ng=4294967296,Pg=Cg(0),Rg=Cg(1),Dg=Cg(16777216);function Ag(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Og(e){return-1==e.h}function Lg(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Sg(n,~e.h).add(Rg)}function jg(e,t){return e.add(Lg(t))}function Mg(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Fg(e,t){this.g=e,this.h=t}function Ug(e,t){if(Ag(t))throw Error("division by zero");if(Ag(e))return new Fg(Pg,Pg);if(Og(e))return t=Ug(Lg(e),t),new Fg(Lg(t.g),Lg(t.h));if(Og(t))return t=Ug(e,Lg(t)),new Fg(Lg(t.g),t.h);if(30<e.g.length){if(Og(e)||Og(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Rg,r=t;0>=r.X(e);)n=Vg(n),r=Vg(r);var i=qg(n,1),a=qg(r,1);for(r=qg(r,2),n=qg(n,2);!Ag(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=qg(r,1),n=qg(n,1)}return t=jg(e,i.R(t)),new Fg(i,t)}for(i=Pg;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Tg(n)).R(t);Og(o)||0<o.X(e);)o=(a=Tg(n-=r)).R(t);Ag(a)&&(a=Rg),i=i.add(a),e=jg(e,o)}return new Fg(i,e)}function Vg(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Sg(n,e.h)}function qg(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Sg(i,e.h)}(Tv=Sg.prototype).ea=function(){if(Og(this))return-Lg(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ng+r)*t,t*=Ng}return e},Tv.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ag(this))return"0";if(Og(this))return"-"+Lg(this).toString(e);for(var t=Tg(Math.pow(e,6)),n=this,r="";;){var i=Ug(n,t).g,a=((0<(n=jg(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ag(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Tv.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Tv.X=function(e){return Og(e=jg(this,e))?-1:Ag(e)?0:1},Tv.abs=function(){return Og(this)?Lg(this):this},Tv.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Sg(n,-2147483648&n[n.length-1]?-1:0)},Tv.R=function(e){if(Ag(this)||Ag(e))return Pg;if(Og(this))return Og(e)?Lg(this).R(Lg(e)):Lg(Lg(this).R(e));if(Og(e))return Lg(this.R(Lg(e)));if(0>this.X(Dg)&&0>e.X(Dg))return Tg(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Mg(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Mg(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Mg(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Mg(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Sg(n,0)},Tv.gb=function(e){return Ug(this,e).h},Tv.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Sg(n,this.h&e.h)},Tv.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Sg(n,this.h|e.h)},Tv.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Sg(n,this.h^e.h)},gg.prototype.createWebChannel=gg.prototype.g,kg.prototype.send=kg.prototype.u,kg.prototype.open=kg.prototype.m,kg.prototype.close=kg.prototype.close,_m.NO_ERROR=0,_m.TIMEOUT=8,_m.HTTP_ERROR=6,xm.COMPLETE="complete",Im.EventType=Tm,Tm.OPEN="a",Tm.CLOSE="b",Tm.ERROR="c",Tm.MESSAGE="d",zp.prototype.listen=zp.prototype.O,Fy.prototype.listenOnce=Fy.prototype.P,Fy.prototype.getLastError=Fy.prototype.Sa,Fy.prototype.getLastErrorCode=Fy.prototype.Ia,Fy.prototype.getStatus=Fy.prototype.da,Fy.prototype.getResponseJson=Fy.prototype.Wa,Fy.prototype.getResponseText=Fy.prototype.ja,Fy.prototype.send=Fy.prototype.ha,Fy.prototype.setWithCredentials=Fy.prototype.Oa,xg.prototype.digest=xg.prototype.l,xg.prototype.reset=xg.prototype.reset,xg.prototype.update=xg.prototype.j,Sg.prototype.add=Sg.prototype.add,Sg.prototype.multiply=Sg.prototype.R,Sg.prototype.modulo=Sg.prototype.gb,Sg.prototype.compare=Sg.prototype.X,Sg.prototype.toNumber=Sg.prototype.ea,Sg.prototype.toString=Sg.prototype.toString,Sg.prototype.getBits=Sg.prototype.D,Sg.fromNumber=Tg,Sg.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Lg(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Tg(Math.pow(n,8)),i=Pg,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Tg(Math.pow(n,o)),i=i.R(o).add(Tg(s))):i=(i=i.R(r)).add(Tg(s))}return i};var zg=Pv.createWebChannelTransport=function(){return new gg},Bg=Pv.getStatEventTarget=function(){return pm()},Wg=Pv.ErrorCode=_m,Kg=Pv.EventType=xm,Gg=Pv.Event=dm,Hg=Pv.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qg=Pv.FetchXmlHttpFactory=Ry,Yg=Pv.WebChannel=Im,Xg=Pv.XhrIo=Fy,$g=Pv.Md5=xg,Jg=Pv.Integer=Sg,Zg="@firebase/firestore",ek=function(){function e(t){u(this,e),this.uid=t}return f(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ek.UNAUTHENTICATED=new ek(null),ek.GOOGLE_CREDENTIALS=new ek("google-credentials-uid"),ek.FIRST_PARTY=new ek("first-party-uid"),ek.MOCK_USER=new ek("mock-user");var tk="9.22.0",nk=new At("@firebase/firestore");function rk(){return nk.logLevel}function ik(e){if(nk.logLevel<=It.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sk);nk.debug.apply(nk,["Firestore (".concat(tk,"): ").concat(e)].concat(wt(i)))}}function ak(e){if(nk.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sk);nk.error.apply(nk,["Firestore (".concat(tk,"): ").concat(e)].concat(wt(i)))}}function ok(e){if(nk.logLevel<=It.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sk);nk.warn.apply(nk,["Firestore (".concat(tk,"): ").concat(e)].concat(wt(i)))}}function sk(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function uk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(tk,") INTERNAL ASSERTION FAILED: ")+e;throw ak(t),new Error(t)}function ck(e,t){e||uk()}function lk(e,t){return e}var hk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fk=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return f(n)}(Ye),dk=f((function e(){var t=this;u(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vk=f((function e(t,n){u(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),pk=function(){function e(){u(this,e)}return f(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ek.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mk=function(){function e(t){u(this,e),this.token=t,this.changeListener=null}return f(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yk=function(){function e(t){u(this,e),this.t=t,this.currentUser=ek.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new dk;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new dk,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){ik("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(ik("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new dk)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ik("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ck("string"==typeof n.accessToken),new vk(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ck(null===e||"string"==typeof e),new ek(e)}}]),e}(),gk=function(){function e(t,n,r){u(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=ek.FIRST_PARTY,this.g=new Map}return f(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),kk=function(){function e(t,n,r){u(this,e),this.h=t,this.l=n,this.m=r}return f(e,[{key:"getToken",value:function(){return Promise.resolve(new gk(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ek.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bk=f((function e(t){u(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),wk=function(){function e(t){u(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ik("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,ik("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ik("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):ik("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ck("string"==typeof t.token),e.T=t.token,new bk(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function _k(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var xk=function(){function e(){u(this,e)}return f(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=_k(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ek(e,t){return e<t?-1:e>t?1:0}function Sk(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ik(e){return e+"\0"}var Ck=function(){function e(t,n){if(u(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new fk(hk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fk(hk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new fk(hk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fk(hk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return f(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ek(this.nanoseconds,e.nanoseconds):Ek(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Tk=function(){function e(t){u(this,e),this.timestamp=t}return f(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ck(0,0))}},{key:"max",value:function(){return new e(new Ck(253402300799,999999999))}}]),e}(),Nk=function(){function e(t,n,r){u(this,e),void 0===n?n=0:n>t.length&&uk(),void 0===r?r=t.length-n:r>t.length-n&&uk(),this.segments=t,this.offset=n,this.len=r}return f(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Pk=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new fk(hk.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,wt(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Nk),Rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dk=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Rk.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new fk(hk.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new fk(hk.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fk(hk.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new fk(hk.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Nk),Ak=function(){function e(t){u(this,e),this.path=t}return f(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Pk.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Pk.fromString(t))}},{key:"fromName",value:function(t){return new e(Pk.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Pk.emptyPath())}},{key:"comparator",value:function(e,t){return Pk.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Pk(t.slice()))}}]),e}(),Ok=f((function e(t,n,r,i){u(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Lk(e){return e.fields.find((function(e){return 2===e.kind}))}function jk(e){return e.fields.filter((function(e){return 2!==e.kind}))}Ok.UNKNOWN_ID=-1;var Mk=f((function e(t,n){u(this,e),this.fieldPath=t,this.kind=n}));var Fk=function(){function e(t,n){u(this,e),this.sequenceNumber=t,this.offset=n}return f(e,null,[{key:"empty",value:function(){return new e(0,qk.min())}}]),e}();function Uk(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tk.fromTimestamp(1e9===r?new Ck(n+1,0):new Ck(n,r));return new qk(i,Ak.empty(),t)}function Vk(e){return new qk(e.readTime,e.key,-1)}var qk=function(){function e(t,n,r){u(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return f(e,null,[{key:"min",value:function(){return new e(Tk.min(),Ak.empty(),-1)}},{key:"max",value:function(){return new e(Tk.max(),Ak.empty(),-1)}}]),e}();function zk(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Ak.comparator(e.documentKey,t.documentKey))?n:Ek(e.largestBatchId,t.largestBatchId)}var Bk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wk=function(){function e(){u(this,e),this.onCommittedListeners=[]}return f(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Kk(e){return Gk.apply(this,arguments)}function Gk(){return(Gk=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===hk.FAILED_PRECONDITION&&t.message===Bk){e.next=2;break}throw t;case 2:ik("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hk=function(){function e(t){var n=this;u(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return f(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&uk(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=xe(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Qk=function(){function e(t,n){var r=this;u(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new dk,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new $k(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=nb(e.target.error);r.v.reject(new $k(t,n))}}return f(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(ik("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Zk(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new $k(n,t)}}}]),e}(),Yk=function(){function e(t,n,r){u(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Be())&&ak("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return f(e,[{key:"$",value:function(){var e=we(ke().mark((function e(t){var n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ik("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $k(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fk(hk.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new fk(hk.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new $k(t,n))},i.onupgradeneeded=function(e){ik("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){ik("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=we(ke().mark((function e(t,n,r,i){var a,o,s,u,c=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=ke().mark((function e(){var n,s,u,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Qk.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Hk.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.R;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,ik("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ik("SimpleDb","Removing database:",e),eb(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!Qe())return!1;if(e.C())return!0;var t=Be(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/data-track-full-scale",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Xk=function(){function e(t){u(this,e),this.L=t,this.q=!1,this.U=null}return f(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return eb(this.L.delete())}}]),e}(),$k=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,hk.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return f(n)}(fk);function Jk(e){return"IndexedDbTransactionError"===e.name}var Zk=function(){function e(t){u(this,e),this.store=t}return f(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ik("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ik("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eb(n)}},{key:"add",value:function(e){return ik("SimpleDb","ADD",this.store.name,e,e),eb(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eb(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ik("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ik("SimpleDb","DELETE",this.store.name,e),eb(this.store.delete(e))}},{key:"count",value:function(){return ik("SimpleDb","COUNT",this.store.name),eb(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Hk((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Hk((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){ik("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Hk((function(n,r){t.onerror=function(e){var t=nb(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Hk((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Xk(i),o=t(i.primaryKey,i.value,a);if(o instanceof Hk){var s=o.catch((function(e){return a.done(),Hk.reject(e)}));n.push(s)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Hk.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eb(e){return new Hk((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nb(e.target.error);n(t)}}))}var tb=!1;function nb(e){var t=Yk.S(Be());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new fk("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tb||(tb=!0,setTimeout((function(){throw r}),0)),r}}return e}var rb=function(){function e(t,n){u(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return f(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;ik("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ik,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Jk(e.t4)){e.next=17;break}ik("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Kk(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),ib=function(){function e(t,n){u(this,e),this.localStore=t,this.persistence=n}return f(e,[{key:"nt",value:function(){var e=we(ke().mark((function e(){var t,n=this,r=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Hk.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ik("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return ik("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Vk(t);zk(r,n)>0&&(n=r)})),new qk(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ab=function(){function e(t,n){var r=this;u(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return f(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function ob(e){return null==e}function sb(e){return 0===e&&1/e==-1/0}function ub(e){return"number"==typeof e&&Number.isInteger(e)&&!sb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function cb(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=hb(t)),t=lb(e.get(n),t);return hb(t)}function lb(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function hb(e){return e+"\x01\x01"}function fb(e){var t=e.length;if(ck(t>=2),2===t)return ck("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Pk.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&uk(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:uk()}a=o+2}return new Pk(r)}ab.ct=-1;var db=["userId","batchId"];function vb(e,t){return[e,cb(t)]}function pb(e,t,n){return[e,cb(t),n]}var mb={},yb=["prefixPath","collectionGroup","readTime","documentId"],gb=["prefixPath","collectionGroup","documentId"],kb=["collectionGroup","readTime","prefixPath","documentId"],bb=["canonicalId","targetId"],wb=["targetId","path"],_b=["path","targetId"],xb=["collectionId","parent"],Eb=["indexId","uid"],Sb=["uid","sequenceNumber"],Ib=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cb=["indexId","uid","orderedDocumentKey"],Tb=["userId","collectionPath","documentId"],Nb=["userId","collectionPath","largestBatchId"],Pb=["userId","collectionGroup","largestBatchId"],Rb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Db=[].concat(wt(Rb),["documentOverlays"]),Ab=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ob=Ab,Lb=[].concat(Ob,["indexConfiguration","indexState","indexEntries"]),jb=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return f(n)}(Wk);function Mb(e,t){var n=lk(e);return Yk.M(n.ht,t)}function Fb(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ub(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var qb=function(){function e(t,n){u(this,e),this.comparator=t,this.root=n||Bb.EMPTY}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Bb.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bb.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new zb(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new zb(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new zb(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new zb(this.root,e,this.comparator,!0)}}]),e}(),zb=function(){function e(t,n,r,i){u(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return f(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Bb=function(){function e(t,n,r,i,a){u(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw uk();if(this.right.isRed())throw uk();var e=this.left.check();if(e!==this.right.check())throw uk();return e+(this.isRed()?0:1)}}]),e}();Bb.EMPTY=null,Bb.RED=!0,Bb.BLACK=!1,Bb.EMPTY=new(function(){function e(){u(this,e),this.size=0}return f(e,[{key:"key",get:function(){throw uk()}},{key:"value",get:function(){throw uk()}},{key:"color",get:function(){throw uk()}},{key:"left",get:function(){throw uk()}},{key:"right",get:function(){throw uk()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Bb(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Wb=function(){function e(t){u(this,e),this.comparator=t,this.data=new qb(this.comparator)}return f(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Kb(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Kb(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Kb=function(){function e(t){u(this,e),this.iter=t}return f(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Gb(e){return e.hasNext()?e.getNext():void 0}var Hb=function(){function e(t){u(this,e),this.fields=t,t.sort(Dk.comparator)}return f(e,[{key:"unionWith",value:function(t){var n,r=new Wb(Dk.comparator),i=xe(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=xe(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=xe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Sk(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Qb=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return f(n)}(w(Error));var Yb=function(e){function t(e){u(this,t),this.binaryString=e}return f(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ek(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Qb("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yb.EMPTY_BYTE_STRING=new Yb("");var Xb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $b(e){if(ck(!!e),"string"==typeof e){var t=0,n=Xb.exec(e);if(ck(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Jb(e.seconds),nanos:Jb(e.nanos)}}function Jb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zb(e){return"string"==typeof e?Yb.fromBase64String(e):Yb.fromUint8Array(e)}function ew(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tw(e){var t=e.mapValue.fields.__previous_value__;return ew(t)?tw(t):t}function nw(e){var t=$b(e.mapValue.fields.__local_write_time__.timestampValue);return new Ck(t.seconds,t.nanos)}var rw=f((function e(t,n,r,i,a,o,s,c,l){u(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=l})),iw=function(){function e(t,n){u(this,e),this.projectId=t,this.database=n||"(default)"}return f(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),aw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ow={nullValue:"NULL_VALUE"};function sw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ew(e)?4:ww(e)?9007199254740991:10:uk()}function uw(e,t){if(e===t)return!0;var n=sw(e);if(n!==sw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nw(e).isEqual(nw(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$b(e.timestampValue),r=$b(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zb(e.bytesValue).isEqual(Zb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jb(e.geoPointValue.latitude)===Jb(t.geoPointValue.latitude)&&Jb(e.geoPointValue.longitude)===Jb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jb(e.integerValue)===Jb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Jb(e.doubleValue),r=Jb(t.doubleValue);return n===r?sb(n)===sb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Sk(e.arrayValue.values||[],t.arrayValue.values||[],uw);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fb(n)!==Fb(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!uw(n[i],r[i])))return!1;return!0}(e,t);default:return uk()}}function cw(e,t){return void 0!==(e.values||[]).find((function(e){return uw(e,t)}))}function lw(e,t){if(e===t)return 0;var n=sw(e),r=sw(t);if(n!==r)return Ek(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ek(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Jb(e.integerValue||e.doubleValue),r=Jb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hw(e.timestampValue,t.timestampValue);case 4:return hw(nw(e),nw(t));case 5:return Ek(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Zb(e),r=Zb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Ek(n[i],r[i]);if(0!==a)return a}return Ek(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ek(Jb(e.latitude),Jb(t.latitude));return 0!==n?n:Ek(Jb(e.longitude),Jb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=lw(n[i],r[i]);if(a)return a}return Ek(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===aw.mapValue&&t===aw.mapValue)return 0;if(e===aw.mapValue)return 1;if(t===aw.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Ek(r[o],a[o]);if(0!==s)return s;var u=lw(n[r[o]],i[a[o]]);if(0!==u)return u}return Ek(r.length,a.length)}(e.mapValue,t.mapValue);default:throw uk()}}function hw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ek(e,t);var n=$b(e),r=$b(t),i=Ek(n.seconds,r.seconds);return 0!==i?i:Ek(n.nanos,r.nanos)}function fw(e){return dw(e)}function dw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$b(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Zb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ak.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=xe(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=dw(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=xe(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(dw(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):uk();var t,n}function vw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function pw(e){return!!e&&"integerValue"in e}function mw(e){return!!e&&"arrayValue"in e}function yw(e){return!!e&&"nullValue"in e}function gw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function kw(e){return!!e&&"mapValue"in e}function bw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ub(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bw(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bw(e.arrayValue.values[r]);return n}return Object.assign({},e)}function ww(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function _w(e){return"nullValue"in e?ow:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?vw(iw.empty(),Ak.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:uk()}function xw(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?vw(iw.empty(),Ak.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?aw:uk()}function Ew(e,t){var n=lw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Sw(e,t){var n=lw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Iw=function(){function e(t){u(this,e),this.value=t}return f(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!kw(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bw(t)}},{key:"setAll",value:function(e){var t=this,n=Dk.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bw(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());kw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return uw(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];kw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ub(t,(function(t,n){return e[t]=n}));var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bw(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Cw(e){var t=[];return Ub(e.fields,(function(e,n){var r=new Dk([e]);if(kw(n)){var i=Cw(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=xe(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Hb(t)}var Tw=function(){function e(t,n,r,i,a,o,s){u(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return f(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Tk.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Iw.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Iw.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Tk.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Tk.min(),Tk.min(),Tk.min(),Iw.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Tk.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Tk.min(),Tk.min(),Iw.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Tk.min(),Tk.min(),Iw.empty(),2)}}]),e}(),Nw=f((function e(t,n){u(this,e),this.position=t,this.inclusive=n}));function Pw(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ak.comparator(Ak.fromName(o.referenceValue),n.key):lw(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Rw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!uw(e.position[n],t.position[n]))return!1;return!0}var Dw=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";u(this,e),this.field=t,this.dir=n}));function Aw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ow=f((function e(){u(this,e)})),Lw=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(lw(t,this.value)):null!==t&&sw(this.value)===sw(t)&&this.matchesComparison(lw(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return uk()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Kw(e,t,r):"array-contains"===t?new Yw(e,r):"in"===t?new Xw(e,r):"not-in"===t?new $w(e,r):"array-contains-any"===t?new Jw(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Gw(e,n):new Hw(e,n)}}]),n}(Ow),jw=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return f(n,[{key:"matches",value:function(e){return Mw(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=xe(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ow);function Mw(e){return"and"===e.op}function Fw(e){return"or"===e.op}function Uw(e){return Vw(e)&&Mw(e)}function Vw(e){var t,n=xe(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof jw)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function qw(e){if(e instanceof Lw)return e.field.canonicalString()+e.op.toString()+fw(e.value);if(Uw(e))return e.filters.map((function(e){return qw(e)})).join(",");var t=e.filters.map((function(e){return qw(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function zw(e,t){return e instanceof Lw?function(e,t){return t instanceof Lw&&e.op===t.op&&e.field.isEqual(t.field)&&uw(e.value,t.value)}(e,t):e instanceof jw?function(e,t){return t instanceof jw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&zw(n,t.filters[r])}),!0)}(e,t):void uk()}function Bw(e,t){var n=e.filters.concat(t);return jw.create(n,e.op)}function Ww(e){return e instanceof Lw?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(fw(e.value))}(e):e instanceof jw?function(e){return e.op.toString()+" {"+e.getFilters().map(Ww).join(" ,")+"}"}(e):"Filter"}var Kw=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,e,r,i)).key=Ak.fromName(i.referenceValue),a}return f(n,[{key:"matches",value:function(e){var t=Ak.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Lw),Gw=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,"in",r)).keys=Qw("in",r),i}return f(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Lw),Hw=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,"not-in",r)).keys=Qw("not-in",r),i}return f(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Lw);function Qw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ak.fromName(e.referenceValue)}))}var Yw=function(e){v(n,e);var t=k(n);function n(e,r){return u(this,n),t.call(this,e,"array-contains",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mw(t)&&cw(t.arrayValue,this.value)}}]),n}(Lw),Xw=function(e){v(n,e);var t=k(n);function n(e,r){return u(this,n),t.call(this,e,"in",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&cw(this.value.arrayValue,t)}}]),n}(Lw),$w=function(e){v(n,e);var t=k(n);function n(e,r){return u(this,n),t.call(this,e,"not-in",r)}return f(n,[{key:"matches",value:function(e){if(cw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!cw(this.value.arrayValue,t)}}]),n}(Lw),Jw=function(e){v(n,e);var t=k(n);function n(e,r){return u(this,n),t.call(this,e,"array-contains-any",r)}return f(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return cw(t.value.arrayValue,e)}))}}]),n}(Lw),Zw=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;u(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function e_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Zw(e,t,n,r,i,a,o)}function t_(e){var t=lk(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return qw(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ob(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return fw(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return fw(e)})).join(",")),t.dt=n}return t.dt}function n_(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Aw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!zw(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Rw(e.startAt,t.startAt)&&Rw(e.endAt,t.endAt)}function r_(e){return Ak.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function i_(e,t){return e.filters.filter((function(e){return e instanceof Lw&&e.field.isEqual(t)}))}function a_(e,t,n){var r,i=ow,a=!0,o=xe(i_(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=ow,c=!0;switch(s.op){case"<":case"<=":u=_w(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=ow}Ew({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Ew({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function o_(e,t,n){var r,i=aw,a=!0,o=xe(i_(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=aw,c=!0;switch(s.op){case">=":case">":u=xw(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=aw}Sw({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Sw({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var s_=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;u(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.wt=null,this._t=null,this.startAt,this.endAt}));function u_(e,t,n,r,i,a,o,s){return new s_(e,t,n,r,i,a,o,s)}function c_(e){return new s_(e)}function l_(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function h_(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function f_(e){var t,n=xe(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function d_(e){return null!==e.collectionGroup}function v_(e){var t=lk(e);if(null===t.wt){t.wt=[];var n=f_(t),r=h_(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Dw(n)),t.wt.push(new Dw(Dk.keyField(),"asc"));else{var i,a=!1,o=xe(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Dw(Dk.keyField(),u))}}}return t.wt}function p_(e){var t=lk(e);if(!t._t)if("F"===t.limitType)t._t=e_(t.path,t.collectionGroup,v_(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=xe(v_(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Dw(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Nw(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Nw(t.startAt.position,t.startAt.inclusive):null;t._t=e_(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function m_(e,t){t.getFirstInequalityField(),f_(e);var n=e.filters.concat([t]);return new s_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function y_(e,t,n){return new s_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function g_(e,t){return n_(p_(e),p_(t))&&e.limitType===t.limitType}function k_(e){return"".concat(t_(p_(e)),"|lt:").concat(e.limitType)}function b_(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ww(e)})).join(", "),"]")),ob(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return fw(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return fw(e)})).join(",")),"Target(".concat(t,")")}(p_(e)),"; limitType=").concat(e.limitType,")")}function w_(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ak.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=xe(v_(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=xe(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Pw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,v_(e),t))&&!(e.endAt&&!function(e,t,n){var r=Pw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,v_(e),t))}(e,t)}function __(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function x_(e){return function(t,n){var r,i=!1,a=xe(v_(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=E_(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function E_(e,t,n){var r=e.field.isKeyField()?Ak.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?lw(r,i):uk()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return uk()}}var S_=function(){function e(t,n){u(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return f(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ub(this.inner,(function(t,n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Vb(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),I_=new qb(Ak.comparator);function C_(){return I_}var T_=new qb(Ak.comparator);function N_(){for(var e=T_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function P_(e){var t=T_;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function R_(){return A_()}function D_(){return A_()}function A_(){return new S_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var O_=new qb(Ak.comparator),L_=new Wb(Ak.comparator);function j_(){for(var e=L_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var M_=new Wb(Ek);function F_(){return M_}function U_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sb(t)?"-0":t}}function V_(e){return{integerValue:""+e}}function q_(e,t){return ub(t)?V_(t):U_(e,t)}var z_=f((function e(){u(this,e),this._=void 0}));function B_(e,t,n){return e instanceof G_?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ew(t)&&(t=tw(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof H_?Q_(e,t):e instanceof Y_?X_(e,t):function(e,t){var n=K_(e,t),r=J_(n)+J_(e.gt);return pw(n)&&pw(e.gt)?V_(r):U_(e.serializer,r)}(e,t)}function W_(e,t,n){return e instanceof H_?Q_(e,t):e instanceof Y_?X_(e,t):n}function K_(e,t){return e instanceof $_?pw(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var G_=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n)}(z_),H_=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).elements=e,r}return f(n)}(z_);function Q_(e,t){var n,r=Z_(t),i=xe(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return uw(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Y_=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).elements=e,r}return f(n)}(z_);function X_(e,t){var n,r=Z_(t),i=xe(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!uw(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $_=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return f(n)}(z_);function J_(e){return Jb(e.integerValue||e.doubleValue)}function Z_(e){return mw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ex=f((function e(t,n){u(this,e),this.field=t,this.transform=n}));var tx=f((function e(t,n){u(this,e),this.version=t,this.transformResults=n})),nx=function(){function e(t,n){u(this,e),this.updateTime=t,this.exists=n}return f(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function rx(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ix=f((function e(){u(this,e)}));function ax(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new yx(e.key,nx.none()):new lx(e.key,e.data,nx.none());var n,r=e.data,i=Iw.empty(),a=new Wb(Dk.comparator),o=xe(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new hx(e.key,i,new Hb(a.toArray()),nx.none())}function ox(e,t,n){e instanceof lx?function(e,t,n){var r=e.value.clone(),i=dx(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hx?function(e,t,n){if(rx(e.precondition,t)){var r=dx(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fx(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sx(e,t,n,r){return e instanceof lx?function(e,t,n,r){if(!rx(e.precondition,t))return n;var i=e.value.clone(),a=vx(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hx?function(e,t,n,r){if(!rx(e.precondition,t))return n;var i=vx(e.fieldTransforms,r,t),a=t.data;return a.setAll(fx(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return rx(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ux(e,t){var n,r=null,i=xe(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=K_(a.transform,o||null);null!=s&&(null===r&&(r=Iw.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function cx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Sk(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof H_&&t instanceof H_||e instanceof Y_&&t instanceof Y_?Sk(e.elements,t.elements,uw):e instanceof $_&&t instanceof $_?uw(e.gt,t.gt):e instanceof G_&&t instanceof G_}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var lx=function(e){v(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return u(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ix),hx=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return u(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return f(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ix);function fx(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function dx(e,t,n){var r=new Map;ck(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,W_(o,s,n[i]))}return r}function vx(e,t,n){var r,i=new Map,a=xe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,B_(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var px,mx,yx=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ix),gx=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ix),kx=function(){function e(t,n,r,i){u(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return f(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ox(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=xe(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=sx(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=xe(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=sx(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=D_();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=ax(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Tk.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),j_())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Sk(this.mutations,e.mutations,(function(e,t){return cx(e,t)}))&&Sk(this.baseMutations,e.baseMutations,(function(e,t){return cx(e,t)}))}}]),e}(),bx=function(){function e(t,n,r,i){u(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return f(e,null,[{key:"from",value:function(t,n,r){ck(t.mutations.length===r.length);for(var i=O_,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),wx=function(){function e(t,n){u(this,e),this.largestBatchId=t,this.mutation=n}return f(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),_x=f((function e(t,n){u(this,e),this.count=t,this.unchangedNames=n}));function xx(e){switch(e){default:return uk();case hk.CANCELLED:case hk.UNKNOWN:case hk.DEADLINE_EXCEEDED:case hk.RESOURCE_EXHAUSTED:case hk.INTERNAL:case hk.UNAVAILABLE:case hk.UNAUTHENTICATED:return!1;case hk.INVALID_ARGUMENT:case hk.NOT_FOUND:case hk.ALREADY_EXISTS:case hk.PERMISSION_DENIED:case hk.FAILED_PRECONDITION:case hk.ABORTED:case hk.OUT_OF_RANGE:case hk.UNIMPLEMENTED:case hk.DATA_LOSS:return!0}}function Ex(e){if(void 0===e)return ak("GRPC error has no .code"),hk.UNKNOWN;switch(e){case px.OK:return hk.OK;case px.CANCELLED:return hk.CANCELLED;case px.UNKNOWN:return hk.UNKNOWN;case px.DEADLINE_EXCEEDED:return hk.DEADLINE_EXCEEDED;case px.RESOURCE_EXHAUSTED:return hk.RESOURCE_EXHAUSTED;case px.INTERNAL:return hk.INTERNAL;case px.UNAVAILABLE:return hk.UNAVAILABLE;case px.UNAUTHENTICATED:return hk.UNAUTHENTICATED;case px.INVALID_ARGUMENT:return hk.INVALID_ARGUMENT;case px.NOT_FOUND:return hk.NOT_FOUND;case px.ALREADY_EXISTS:return hk.ALREADY_EXISTS;case px.PERMISSION_DENIED:return hk.PERMISSION_DENIED;case px.FAILED_PRECONDITION:return hk.FAILED_PRECONDITION;case px.ABORTED:return hk.ABORTED;case px.OUT_OF_RANGE:return hk.OUT_OF_RANGE;case px.UNIMPLEMENTED:return hk.UNIMPLEMENTED;case px.DATA_LOSS:return hk.DATA_LOSS;default:return uk()}}(mx=px||(px={}))[mx.OK=0]="OK",mx[mx.CANCELLED=1]="CANCELLED",mx[mx.UNKNOWN=2]="UNKNOWN",mx[mx.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mx[mx.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mx[mx.NOT_FOUND=5]="NOT_FOUND",mx[mx.ALREADY_EXISTS=6]="ALREADY_EXISTS",mx[mx.PERMISSION_DENIED=7]="PERMISSION_DENIED",mx[mx.UNAUTHENTICATED=16]="UNAUTHENTICATED",mx[mx.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mx[mx.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mx[mx.ABORTED=10]="ABORTED",mx[mx.OUT_OF_RANGE=11]="OUT_OF_RANGE",mx[mx.UNIMPLEMENTED=12]="UNIMPLEMENTED",mx[mx.INTERNAL=13]="INTERNAL",mx[mx.UNAVAILABLE=14]="UNAVAILABLE",mx[mx.DATA_LOSS=15]="DATA_LOSS";var Sx=function(){function e(){u(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return f(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Ix}},{key:"getOrCreateInstance",value:function(){return null===Ix&&(Ix=new e),Ix}}]),e}(),Ix=null;function Cx(){return new TextEncoder}var Tx=new Jg([4294967295,4294967295],0);function Nx(e){var t=Cx().encode(e),n=new $g;return n.update(t),new Uint8Array(n.digest())}function Px(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Jg([n,r],0),new Jg([i,a],0)]}var Rx=function(){function e(t,n,r){if(u(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dx("Invalid padding: ".concat(n));if(r<0)throw new Dx("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Dx("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Dx("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Jg.fromNumber(this.It)}return f(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Jg.fromNumber(n)));return 1===r.compare(Tx)&&(r=new Jg([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=s(Px(Nx(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=s(Px(Nx(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Dx=function(e){v(n,e);var t=k(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return f(n)}(w(Error)),Ax=function(){function e(t,n,r,i,a){u(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return f(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Ox.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Tk.min(),i,new qb(Ek),C_(),j_())}}]),e}(),Ox=function(){function e(t,n,r,i,a){u(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return f(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,j_(),j_(),j_())}}]),e}(),Lx=f((function e(t,n,r,i){u(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),jx=f((function e(t,n){u(this,e),this.targetId=t,this.Vt=n})),Mx=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yb.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Fx=function(){function e(){u(this,e),this.St=0,this.Dt=qx(),this.Ct=Yb.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return f(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=j_(),t=j_(),n=j_();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:uk()}})),new Ox(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=qx()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),Ux=function(){function e(t){u(this,e),this.Gt=t,this.Qt=new Map,this.jt=C_(),this.zt=Vx(),this.Wt=new qb(Ek)}return f(e,[{key:"Ht",value:function(e){var t,n=xe(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var i,a=xe(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:uk()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(r_(a))if(0===r){var o=new Ak(a.path);this.Yt(n,o,Tw.newNoDocument(o,Tk.min()))}else ck(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=Sx.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,h=void 0===l?0:l,f=r.hashCount,d=void 0===f?0:f;try{a=Zb(c).toUint8Array()}catch(e){if(e instanceof Qb)return ok("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Rx(a,h,d)}catch(e){return ok(e instanceof Dx?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&r_(a.target)){var o=new Ak(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,Tw.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=j_();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ax(e,n,this.Wt,this.jt,r);return this.jt=C_(),this.zt=Vx(),this.Wt=new qb(Ek),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Fx,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Wb(Ek),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||ik("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Fx),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Vx(){return new qb(Ak.comparator)}function qx(){return new qb(Ak.comparator)}var zx={asc:"ASCENDING",desc:"DESCENDING"},Bx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wx={and:"AND",or:"OR"},Kx=f((function e(t,n){u(this,e),this.databaseId=t,this.useProto3Json=n}));function Gx(e,t){return e.useProto3Json||ob(t)?t:{value:t}}function Hx(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qx(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Yx(e,t){return Hx(e,t.toTimestamp())}function Xx(e){return ck(!!e),Tk.fromTimestamp(function(e){var t=$b(e);return new Ck(t.seconds,t.nanos)}(e))}function $x(e,t){return function(e){return new Pk(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jx(e){var t=Pk.fromString(e);return ck(wE(t)),t}function Zx(e,t){return $x(e.databaseId,t.path)}function eE(e,t){var n=Jx(t);if(n.get(1)!==e.databaseId.projectId)throw new fk(hk.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fk(hk.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ak(iE(n))}function tE(e,t){return $x(e.databaseId,t)}function nE(e){var t=Jx(e);return 4===t.length?Pk.emptyPath():iE(t)}function rE(e){return new Pk(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iE(e){return ck(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function aE(e,t,n){return{name:Zx(e,t),fields:n.value.mapValue.fields}}function oE(e,t,n){var r=eE(e,t.name),i=Xx(t.updateTime),a=t.createTime?Xx(t.createTime):Tk.min(),o=new Iw({mapValue:{fields:t.fields}}),s=Tw.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function sE(e,t){return"found"in t?function(e,t){ck(!!t.found),t.found.name,t.found.updateTime;var n=eE(e,t.found.name),r=Xx(t.found.updateTime),i=t.found.createTime?Xx(t.found.createTime):Tk.min(),a=new Iw({mapValue:{fields:t.found.fields}});return Tw.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){ck(!!t.missing),ck(!!t.readTime);var n=eE(e,t.missing),r=Xx(t.readTime);return Tw.newNoDocument(n,r)}(e,t):uk()}function uE(e,t){var n;if(t instanceof lx)n={update:aE(e,t.key,t.value)};else if(t instanceof yx)n={delete:Zx(e,t.key)};else if(t instanceof hx)n={update:aE(e,t.key,t.data),updateMask:bE(t.fieldMask)};else{if(!(t instanceof gx))return uk();n={verify:Zx(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof G_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof H_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Y_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $_)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw uk()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yx(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:uk()}(e,t.precondition)),n}function cE(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?nx.updateTime(Xx(e.updateTime)):void 0!==e.exists?nx.exists(e.exists):nx.none()}(t.currentDocument):nx.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ck("REQUEST_TIME"===t.setToServerValue),n=new G_;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new H_(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Y_(i)}else"increment"in t?n=new $_(e,t.increment):uk();var a=Dk.fromServerFormat(t.fieldPath);return new ex(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=eE(e,t.update.name),a=new Iw({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Hb(t.map((function(e){return Dk.fromServerFormat(e)})))}(t.updateMask);return new hx(i,a,o,n,r)}return new lx(i,a,n,r)}if(t.delete){var s=eE(e,t.delete);return new yx(s,n)}if(t.verify){var u=eE(e,t.verify);return new gx(u,n)}return uk()}function lE(e,t){return{documents:[tE(e,t.path)]}}function hE(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=tE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=tE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return kE(jw.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:yE(e.field),direction:vE(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=Gx(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function fE(e){var t=nE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ck(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=dE(e);return t instanceof jw&&Uw(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Dw(gE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ob(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Nw(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Nw(n,t)}(n.endAt)),u_(t,i,s,o,u,"F",c,l)}function dE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=gE(e.unaryFilter.field);return Lw.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=gE(e.unaryFilter.field);return Lw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gE(e.unaryFilter.field);return Lw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gE(e.unaryFilter.field);return Lw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return uk()}}(e):void 0!==e.fieldFilter?function(e){return Lw.create(gE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return uk()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return jw.create(e.compositeFilter.filters.map((function(e){return dE(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return uk()}}(e.compositeFilter.op))}(e):uk()}function vE(e){return zx[e]}function pE(e){return Bx[e]}function mE(e){return Wx[e]}function yE(e){return{fieldPath:e.canonicalString()}}function gE(e){return Dk.fromServerFormat(e.fieldPath)}function kE(e){return e instanceof Lw?function(e){if("=="===e.op){if(gw(e.value))return{unaryFilter:{field:yE(e.field),op:"IS_NAN"}};if(yw(e.value))return{unaryFilter:{field:yE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gw(e.value))return{unaryFilter:{field:yE(e.field),op:"IS_NOT_NAN"}};if(yw(e.value))return{unaryFilter:{field:yE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yE(e.field),op:pE(e.op),value:e.value}}}(e):e instanceof jw?function(e){var t=e.getFilters().map((function(e){return kE(e)}));return 1===t.length?t[0]:{compositeFilter:{op:mE(e.op),filters:t}}}(e):uk()}function bE(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function wE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var _E=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tk.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tk.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yb.EMPTY_BYTE_STRING,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;u(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}return f(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),xE=f((function e(t){u(this,e),this.fe=t}));function EE(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:SE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Zx(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Hx(e,t.version.toTimestamp()),createTime:Hx(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:IE(t.version)};else{if(!t.isUnknownDocument())return uk();r.unknownDocument={path:n.path.toArray(),version:IE(t.version)}}return r}function SE(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function IE(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function CE(e){var t=new Ck(e.seconds,e.nanoseconds);return Tk.fromTimestamp(t)}function TE(e,t){for(var n=(t.baseMutations||[]).map((function(t){return cE(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return cE(e.fe,t)})),s=Ck.fromMillis(t.localWriteTimeMs);return new kx(t.batchId,s,n,o)}function NE(e){var t,n,r=CE(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?CE(e.lastLimboFreeSnapshotVersion):Tk.min();return void 0!==e.query.documents?(ck(1===(n=e.query).documents.length),t=p_(c_(nE(n.documents[0])))):t=function(e){return p_(fE(e))}(e.query),new _E(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Yb.fromBase64String(e.resumeToken))}function PE(e,t){var n,r=IE(t.snapshotVersion),i=IE(t.lastLimboFreeSnapshotVersion);n=r_(t.target)?lE(e.fe,t.target):hE(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:t_(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function RE(e){var t=fE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?y_(t,t.limit,"L"):t}function DE(e,t){return new wx(t.largestBatchId,cE(e.fe,t.overlayMutation))}function AE(e,t){var n=t.path.lastSegment();return[e,cb(t.path.popLast()),n]}function OE(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:IE(r.readTime),documentKey:cb(r.documentKey.path),largestBatchId:r.largestBatchId}}var LE=function(){function e(){u(this,e)}return f(e,[{key:"getBundleMetadata",value:function(e,t){return jE(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:CE(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return jE(e).put({bundleId:(n=t).id,createTime:IE(Xx(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ME(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:RE(t.bundledQuery),readTime:CE(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ME(e).put(function(e){return{name:e.name,readTime:IE(Xx(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function jE(e){return Mb(e,"bundles")}function ME(e){return Mb(e,"namedQueries")}var FE=function(){function e(t,n){u(this,e),this.serializer=t,this.userId=n}return f(e,[{key:"getOverlay",value:function(e,t){var n=this;return UE(e).get(AE(this.userId,t)).next((function(e){return e?DE(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=R_();return Hk.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new wx(t,a);i.push(r.we(e,o))})),Hk.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(cb(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(UE(e).J("collectionPathOverlayIndex",i))})),Hk.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=R_(),a=cb(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return UE(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=DE(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=R_(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return UE(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=DE(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return UE(e).put(function(e,t,n){var r=s(AE(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:uE(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function UE(e){return Mb(e,"documentOverlays")}var VE=function(){function e(){u(this,e)}return f(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Jb(e.integerValue));else if("doubleValue"in e){var n=Jb(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),sb(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Zb(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?ww(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):uk()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Ak.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function qE(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function zE(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=qE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}VE.Ve=new VE;var BE=function(){function e(){u(this,e),this.buffer=new Uint8Array(1024),this.position=0}return f(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=zE(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=zE(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),WE=function(){function e(t){u(this,e),this.je=t}return f(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),KE=function(){function e(t){u(this,e),this.je=t}return f(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),GE=function(){function e(){u(this,e),this.je=new BE,this.ze=new WE(this.je),this.We=new KE(this.je)}return f(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),HE=function(){function e(t,n,r,i){u(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return f(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function QE(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=YE(e.arrayValue,t.arrayValue))?n:0!==(n=YE(e.directionalValue,t.directionalValue))?n:Ak.comparator(e.documentKey,t.documentKey)}function YE(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var XE=function(){function e(t){u(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=xe(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return f(e,[{key:"tn",value:function(e){ck(e.collectionGroup===this.collectionId);var t=Lk(e);if(void 0!==t&&!this.en(t))return!1;for(var n=jk(e),r=0,i=0;r<n.length&&this.en(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ze){var a=n[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ye.length||!this.sn(this.Ye[i++],o))return!1}return!0}},{key:"en",value:function(e){var t,n=xe(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function $E(e){var t,n;if(ck(e instanceof Lw||e instanceof jw),e instanceof Lw){if(e instanceof Xw){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Lw.create(e.field,"==",t)})))||[];return jw.create(r,"or")}return e}var i=e.filters.map((function(e){return $E(e)}));return jw.create(i,e.op)}function JE(e){if(0===e.getFilters().length)return[];var t=nS($E(e));return ck(tS(t)),ZE(t)||eS(t)?[t]:t.getFilters()}function ZE(e){return e instanceof Lw}function eS(e){return e instanceof jw&&Uw(e)}function tS(e){return ZE(e)||eS(e)||function(e){if(e instanceof jw&&Fw(e)){var t,n=xe(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ZE(r)&&!eS(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function nS(e){if(ck(e instanceof Lw||e instanceof jw),e instanceof Lw)return e;if(1===e.filters.length)return nS(e.filters[0]);var t=e.filters.map((function(e){return nS(e)})),n=jw.create(t,e.op);return tS(n=aS(n))?n:(ck(n instanceof jw),ck(Mw(n)),ck(n.filters.length>1),n.filters.reduce((function(e,t){return rS(e,t)})))}function rS(e,t){var n;return ck(e instanceof Lw||e instanceof jw),ck(t instanceof Lw||t instanceof jw),n=e instanceof Lw?t instanceof Lw?function(e,t){return jw.create([e,t],"and")}(e,t):iS(e,t):t instanceof Lw?iS(t,e):function(e,t){if(ck(e.filters.length>0&&t.filters.length>0),Mw(e)&&Mw(t))return Bw(e,t.getFilters());var n=Fw(e)?e:t,r=Fw(e)?t:e,i=n.filters.map((function(e){return rS(e,r)}));return jw.create(i,"or")}(e,t),aS(n)}function iS(e,t){if(Mw(t))return Bw(t,e.getFilters());var n=t.filters.map((function(t){return rS(e,t)}));return jw.create(n,"or")}function aS(e){if(ck(e instanceof Lw||e instanceof jw),e instanceof Lw)return e;var t=e.getFilters();if(1===t.length)return aS(t[0]);if(Vw(e))return e;var n=t.map((function(e){return aS(e)})),r=[];return n.forEach((function(t){t instanceof Lw?r.push(t):t instanceof jw&&(t.op===e.op?r.push.apply(r,wt(t.filters)):r.push(t))})),1===r.length?r[0]:jw.create(r,e.op)}var oS=function(){function e(){u(this,e),this.rn=new sS}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),Hk.resolve()}},{key:"getCollectionParents",value:function(e,t){return Hk.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Hk.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Hk.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Hk.resolve(null)}},{key:"getIndexType",value:function(e,t){return Hk.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Hk.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Hk.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Hk.resolve(qk.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Hk.resolve(qk.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Hk.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Hk.resolve()}}]),e}(),sS=function(){function e(){u(this,e),this.index={}}return f(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wb(Pk.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Wb(Pk.comparator)).toArray()}}]),e}(),uS=new Uint8Array(0),cS=function(){function e(t,n){u(this,e),this.user=t,this.databaseId=n,this.on=new sS,this.un=new S_((function(e){return t_(e)}),(function(e,t){return n_(e,t)})),this.uid=t.uid||""}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:cb(i)};return lS(e).put(a)}return Hk.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ik(t),""],!1,!0);return lS(e).j(r).next((function(e){var r,i=xe(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(fb(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=fS(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=dS(e);return a.next((function(e){o.put(OE(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=fS(e),r=dS(e),i=hS(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=hS(e),i=!0,a=new Map;return Hk.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=j_(),o=[];return Hk.forEach(a,(function(i,a){var s;ik("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(t_(t)));var u=function(e,t){var n=Lk(t);if(void 0===n)return null;var r,i=xe(i_(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=xe(jk(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=xe(i_(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=xe(jk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?a_(e,o.fieldPath,e.startAt):o_(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Nw(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=xe(jk(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?o_(e,o.fieldPath,e.endAt):a_(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Nw(r,i)}(a,i),f=n.hn(i,a,l),d=n.hn(i,a,h),v=n.ln(i,a,c),p=n.fn(i.indexId,u,f,l.inclusive,d,h.inclusive,v);return Hk.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Ak.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Hk.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:JE(jw.create(e.filters,"and")).map((function(t){return e_(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(){var u=t?s.dn(t[f/c]):uS,h=s.wn(e,u,n[f%c],r),d=s._n(e,u,i[f%c],a),v=o.map((function(t){return s.wn(e,u,t,!0)}));l.push.apply(l,wt(s.createRange(h,d,v)))},f=0;f<u;++f)h();return l}},{key:"wn",value:function(e,t,n,r){var i=new HE(e,Ak.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new HE(e,Ak.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new XE(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=xe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Hk.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Wb(Dk.comparator),r=!1,i=xe(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=xe(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var u,c=xe(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new GE,i=xe(jk(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.He(a.kind);VE.Ve._e(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new GE;return VE.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new GE;return VE.Ve._e(vw(this.databaseId,t),n.He(function(e){var t=jk(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new GE);var i,a=0,o=xe(jk(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=xe(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.yn(t,u.fieldPath)&&mw(c))r=this.pn(r,u,c);else{var f=h.He(u.kind);VE.Ve._e(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=wt(e),a=[],o=xe(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=xe(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new GE;h.seed(l.Qe()),VE.Ve._e(u,h.He(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Lw&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=fS(e),i=dS(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Hk.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fk(t.sequenceNumber,new qk(CE(t.readTime),new Ak(fb(t.documentKey)),t.largestBatchId)):Fk.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Mk(Dk.fromServerFormat(n),r)}));return new Ok(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ek(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=fS(e),a=dS(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Hk.forEach(t,(function(t){return a.put(OE(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Hk.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Hk.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Hk.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?Hk.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return hS(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return hS(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=hS(e),i=new Wb(QE);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new HE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new Wb(QE),r=this.mn(t,e);if(null==r)return n;var i=Lk(t);if(null!=i){var a=e.data.field(i.fieldPath);if(mw(a)){var o,s=xe(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new HE(t.indexId,e.key,this.dn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new HE(t.indexId,e.key,uS,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;ik("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Gb(a),u=Gb(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Gb(o)):l?(i(s),s=Gb(a)):(s=Gb(a),u=Gb(o))}}(r,i,QE,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),Hk.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return dS(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return QE(e,t)})).filter((function(e,t,n){return!t||0!==QE(e,n[t-1])}));var r=[];r.push(e);var i,a=xe(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=QE(o,e),u=QE(o,t);if(0===s)r[0]=e.Je();else if(s>0&&u<0)r.push(o),r.push(o.Je());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,uS,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,uS,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"bn",value:function(e,t){return QE(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(vS)}},{key:"getMinOffset",value:function(e,t){var n=this;return Hk.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||uk()}))})).next(vS)}}]),e}();function lS(e){return Mb(e,"collectionParents")}function hS(e){return Mb(e,"indexEntries")}function fS(e){return Mb(e,"indexConfiguration")}function dS(e){return Mb(e,"indexState")}function vS(e){ck(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;zk(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new qk(t.readTime,t.documentKey,n)}var pS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mS=function(){function e(t,n,r){u(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return f(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function yS(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){ck(1===s)})));var c,l=[],h=xe(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=pb(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(v){h.e(v)}finally{h.f()}return Hk.waitFor(a).next((function(){return l}))}function gS(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw uk();t=e.noDocument}return JSON.stringify(t).length}mS.DEFAULT_COLLECTION_PERCENTILE=10,mS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mS.DEFAULT=new mS(41943040,mS.DEFAULT_COLLECTION_PERCENTILE,mS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mS.DISABLED=new mS(-1,0,0);var kS=function(){function e(t,n,r,i){u(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return f(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wS(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=_S(e),o=wS(e);return o.add({}).next((function(s){ck("number"==typeof s);var u,c=new kx(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return uE(e.fe,t)})),i=n.mutations.map((function(t){return uE(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],f=new Wb((function(e,t){return Ek(e.canonicalString(),t.canonicalString())})),d=xe(r);try{for(d.s();!(u=d.n()).done;){var v=u.value,p=pb(i.userId,v.key.path,s);f=f.add(v.key.path.popLast()),h.push(o.put(l)),h.push(a.put(p,mb))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[s]=c.keys()})),Hk.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return wS(e).get(t).next((function(e){return e?(ck(e.userId===n.userId),TE(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?Hk.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return wS(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(ck(t.batchId>=r),a=TE(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return wS(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wS(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return TE(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=vb(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return _S(e).X({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],h=u[2],f=fb(l);if(c===n.userId&&t.path.isEqual(f))return wS(e).get(h).next((function(e){if(!e)throw uk();ck(e.userId===n.userId),a.push(TE(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wb(Ek),i=[];return t.forEach((function(t){var a=vb(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=_S(e).X({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],h=fb(c);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),Hk.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=vb(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Wb(Ek);return _S(e).X({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],h=o[2],f=fb(l);c===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(wS(e).get(t).next((function(e){if(null===e)throw uk();ck(e.userId===n.userId),r.push(TE(n.serializer,e))})))})),Hk.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return yS(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),Hk.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Hk.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return _S(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=fb(e[1]);i.push(a)}else r.done()})).next((function(){ck(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return bS(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return xS(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return ck(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function bS(e,t,n){var r=vb(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return _S(e).X({range:a,Y:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function wS(e){return Mb(e,"mutations")}function _S(e){return Mb(e,"documentMutations")}function xS(e){return Mb(e,"mutationQueues")}var ES=function(){function e(t){u(this,e),this.Nn=t}return f(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),SS=function(){function e(t,n){u(this,e),this.referenceDelegate=t,this.serializer=n}return f(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new ES(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return Tk.fromTimestamp(new Ck(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return IS(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return ck(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return IS(e).X((function(o,s){var u=NE(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Hk.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return IS(e).X((function(e,n){var r=NE(n);t(r)}))}},{key:"$n",value:function(e){return CS(e).get("targetGlobalKey").next((function(e){return ck(null!==e),e}))}},{key:"On",value:function(e,t){return CS(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return IS(e).put(PE(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=t_(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return IS(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=NE(n);n_(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=TS(e);return t.forEach((function(t){var o=cb(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Hk.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=TS(e);return Hk.forEach(t,(function(t){var a=cb(t.path);return Hk.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=TS(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=TS(e),i=j_();return r.X({range:n,Y:!0},(function(e,t,n){var r=fb(e[1]),a=new Ak(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=cb(t.path),r=IDBKeyRange.bound([n],[Ik(n)],!1,!0),i=0;return TS(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return IS(e).get(t).next((function(e){return e?NE(e):null}))}}]),e}();function IS(e){return Mb(e,"targets")}function CS(e){return Mb(e,"targetGlobal")}function TS(e){return Mb(e,"targetDocuments")}function NS(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Ek(r,o);return 0===c?Ek(i,u):c}var PS=function(){function e(t){u(this,e),this.Ln=t,this.buffer=new Wb(NS),this.qn=0}return f(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();NS(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),RS=function(){function e(t,n,r){u(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return f(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;ik("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Jk(e.t0)){e.next=12;break}ik("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Kk(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),DS=function(){function e(t,n){u(this,e),this.jn=t,this.params=n}return f(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Hk.resolve(ab.ct);var r=new PS(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ik("LruGarbageCollector","Garbage collection skipped; disabled"),Hk.resolve(pS)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ik("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),pS):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ik("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),rk()<=It.DEBUG&&ik("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Hk.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function AS(e,t){return new DS(e,t)}var OS=function(){function e(t,n){u(this,e),this.db=t,this.garbageCollector=AS(this,n)}return f(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return LS(e,n)}},{key:"removeReference",value:function(e,t,n){return LS(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return LS(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return xS(e).Z((function(r){return bS(e,r,t).next((function(e){return e&&(n=!0),Hk.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Tk.min()),TS(e).delete([0,cb(o.path)])}))}));i.push(u)}})).next((function(){return Hk.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return LS(e,t)}},{key:"Yn",value:function(e,t){var n,r=TS(e),i=ab.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==ab.ct&&t(new Ak(fb(n)),i),i=c,n=u):i=ab.ct})).next((function(){i!==ab.ct&&t(new Ak(fb(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function LS(e,t){return TS(e).put(function(e,t){return{targetId:0,path:cb(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var jS=function(){function e(){u(this,e),this.changes=new S_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return f(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Tw.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Hk.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),MS=function(){function e(t){u(this,e),this.serializer=t}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return qS(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return qS(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],SE(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Tw.newInvalidDocument(t);return qS(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(zS(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:Tw.newInvalidDocument(t)};return qS(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(zS(t))},(function(e,i){r={document:n.ts(t,i),size:gS(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=C_();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=C_(),i=new qb(Ak.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,gS(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return Hk.resolve();var r=new Wb(WS);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(zS(r.first()),zS(r.last())),a=r.getIterator(),o=a.getNext();return qS(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Ak.fromSegments([].concat(wt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&WS(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(zS(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),SE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qS(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=C_(),o=xe(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.ts(Ak.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(w_(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=C_(),o=BS(t,n),s=BS(t,qk.max());return qS(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.ts(Ak.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new US(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return VS(e).get("remoteDocumentGlobalKey").next((function(e){return ck(!!e),e}))}},{key:"Zn",value:function(e,t){return VS(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=oE(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ak.fromSegments(t.noDocument.path),i=CE(t.noDocument.readTime);n=Tw.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return uk();var a=Ak.fromSegments(t.unknownDocument.path),o=CE(t.unknownDocument.version);n=Tw.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ck(e[0],e[1]);return Tk.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Tk.min()))return n}return Tw.newInvalidDocument(e)}}]),e}();function FS(e){return new MS(e)}var US=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new S_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Wb((function(e,t){return Ek(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.us.get(a);if(n.push(t.os.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=EE(t.os.serializer,o);i=i.add(a.path.popLast());var c=gS(u);r+=c-s.size,n.push(t.os.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=EE(t.os.serializer,o.convertToNoDocument(Tk.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),Hk.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(jS);function VS(e){return Mb(e,"remoteDocumentGlobal")}function qS(e){return Mb(e,"remoteDocumentsV14")}function zS(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function BS(e,t){var n=t.documentKey.path.toArray();return[e,SE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function WS(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Ek(n[a],r[a]))return i;return(i=Ek(n.length,r.length))||((i=Ek(n[n.length-2],r[r.length-2]))||Ek(n[n.length-1],r[r.length-1]))}var KS=f((function e(t,n){u(this,e),this.overlayedDocument=t,this.mutatedFields=n})),GS=function(){function e(t,n,r,i){u(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return f(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&sx(r.mutation,e,Hb.empty(),Ck.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,j_()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j_(),i=R_();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=N_();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=R_();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,j_())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=C_(),a=A_(),o=A_();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hx)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),sx(o.mutation,t,o.mutation.getFieldMask(),Ck.now())):a.set(t.key,Hb.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new KS(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=A_(),i=new qb((function(e,t){return e-t})),a=j_();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=xe(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Hb.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||j_()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=D_();c.forEach((function(e){if(!a.has(e)){var n=ax(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return Hk.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Ak.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):d_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Hk.resolve(R_()),s=-1,u=a;return o.next((function(t){return Hk.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Hk.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,j_())})).next((function(e){return{batchId:s,changes:P_(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Ak(t)).next((function(e){var t=N_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=N_();return this.indexManager.getCollectionParents(e,i).next((function(o){return Hk.forEach(o,(function(o){var s=function(e,t){return new s_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Tw.newInvalidDocument(r)))}));var n=N_();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&sx(a.mutation,i,Hb.empty(),Ck.now()),w_(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),HS=function(){function e(t){u(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return f(e,[{key:"getBundleMetadata",value:function(e,t){return Hk.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Xx(n.createTime)}),Hk.resolve()}},{key:"getNamedQuery",value:function(e,t){return Hk.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:RE(e.bundledQuery),readTime:Xx(e.readTime)}}(t)),Hk.resolve()}}]),e}(),QS=function(){function e(){u(this,e),this.overlays=new qb(Ak.comparator),this.ls=new Map}return f(e,[{key:"getOverlay",value:function(e,t){return Hk.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=R_();return Hk.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),Hk.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),Hk.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=R_(),i=t.length+1,a=new Ak(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Hk.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new qb((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=R_(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=R_(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Hk.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new wx(t,n));var a=this.ls.get(t);void 0===a&&(a=j_(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),YS=function(){function e(){u(this,e),this.fs=new Wb(XS.ds),this.ws=new Wb(XS._s)}return f(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new XS(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new XS(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Ak(new Pk([])),r=new XS(n,e),i=new XS(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Ak(new Pk([])),n=new XS(t,e),r=new XS(t,e+1),i=j_();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new XS(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),XS=function(){function e(t,n){u(this,e),this.key=t,this.As=n}return f(e,null,[{key:"ds",value:function(e,t){return Ak.comparator(e.key,t.key)||Ek(e.As,t.As)}},{key:"_s",value:function(e,t){return Ek(e.As,t.As)||Ak.comparator(e.key,t.key)}}]),e}(),$S=function(){function e(t,n){u(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Wb(XS.ds)}return f(e,[{key:"checkEmpty",value:function(e){return Hk.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new kx(i,t,n,r);this.mutationQueue.push(a);var o,s=xe(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new XS(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Hk.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Hk.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return Hk.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Hk.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return Hk.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new XS(t,0),i=new XS(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),Hk.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Wb(Ek);return t.forEach((function(e){var t=new XS(e,0),i=new XS(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),Hk.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ak.isDocumentKey(i)||(i=i.child(""));var a=new XS(new Ak(i),0),o=new Wb(Ek);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),Hk.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ck(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Hk.forEach(t.mutations,(function(i){var a=new XS(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new XS(t,0),r=this.Rs.firstAfterOrEqual(n);return Hk.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Hk.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),JS=function(){function e(t){u(this,e),this.Ds=t,this.docs=new qb(Ak.comparator),this.size=0}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Hk.resolve(n?n.document.mutableCopy():Tw.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=C_();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Tw.newInvalidDocument(e))})),Hk.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=C_(),a=t.path,o=new Ak(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||zk(Vk(l),n)<=0||(r.has(l.key)||w_(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Hk.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){uk()}},{key:"Cs",value:function(e,t){return Hk.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ZS(this)}},{key:"getSize",value:function(e){return Hk.resolve(this.size)}}]),e}(),ZS=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).os=e,r}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),Hk.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(jS),eI=function(){function e(t){u(this,e),this.persistence=t,this.xs=new S_((function(e){return t_(e)}),n_),this.lastRemoteSnapshotVersion=Tk.min(),this.highestTargetId=0,this.Ns=0,this.ks=new YS,this.targetCount=0,this.Ms=ES.kn()}return f(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),Hk.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Hk.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Hk.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),Hk.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Hk.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new ES(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,Hk.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),Hk.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Hk.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Hk.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Hk.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return Hk.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),Hk.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Hk.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),Hk.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return Hk.resolve(n)}},{key:"containsKey",value:function(e,t){return Hk.resolve(this.ks.containsKey(t))}}]),e}(),tI=function(){function e(t,n){var r=this;u(this,e),this.$s={},this.overlays={},this.Os=new ab(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new eI(this),this.indexManager=new oS,this.remoteDocumentCache=new JS((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new xE(n),this.qs=new HS(this.serializer)}return f(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new QS,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new $S(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;ik("MemoryPersistence","Starting transaction:",e);var i=new nI(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return Hk.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),nI=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return f(n)}(Wk),rI=function(){function e(t){u(this,e),this.persistence=t,this.Qs=new YS,this.js=null}return f(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw uk()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Hk.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Hk.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),Hk.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hk.forEach(this.Ws,(function(r){var i=Ak.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,Tk.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return Hk.or([function(){return Hk.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),iI=function(){function e(t){u(this,e),this.serializer=t}return f(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Qk("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0}),e.createObjectStore("documentMutations")}(e),aI(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Hk.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),aI(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tk.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Hk.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Tb});t.createIndex("collectionPathOverlayIndex",Nb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Pb,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:yb});t.createIndex("documentKeyIndex",gb),t.createIndex("collectionGroupIndex",kb)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Eb}).createIndex("sequenceNumberIndex",Sb,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ib}).createIndex("documentKeyIndex",Cb,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=gS(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Hk.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Hk.forEach(r,(function(r){ck(r.userId===n.userId);var i=TE(t.serializer,r);return yS(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Pk(n),o=function(e){return[0,cb(e)]}(a);r.push(t.get(o).next((function(n){return n?Hk.resolve():function(n){return t.put({targetId:0,path:cb(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Hk.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:xb});var n=t.store("collectionParents"),r=new sS,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:cb(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Pk(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],fb(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=NE(r),a=PE(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Ak(Pk.fromString(i.document.name).popFirst(5)):i.noDocument?Ak.fromSegments(i.noDocument.path):i.unknownDocument?Ak.fromSegments(i.unknownDocument.path):uk()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return Hk.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=FS(this.serializer),a=new tI(rI.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:j_();TE(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Hk.forEach(r,(function(e,r){var o=new ek(r),s=FE.de(n.serializer,o),u=a.getIndexManager(o),c=kS.de(o,n.serializer,u,a.referenceDelegate);return new GS(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new jb(t,ab.ct),e).next()}))}))}}]),e}();function aI(e){e.createObjectStore("targetDocuments",{keyPath:wb}).createIndex("documentTargetsIndex",_b,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bb,{unique:!0}),e.createObjectStore("targetGlobal")}var oI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sI=function(){function e(t,n,r,i,a,o,s,c,l,h){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(u(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.ri=l,this.oi=h,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new fk(hk.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OS(this,i),this.di=n+"main",this.serializer=new xE(c),this.wi=new Yk(this.di,this.ui,new iI(this.serializer)),this.Bs=new SS(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FS(this.serializer),this.qs=new LE,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===h&&ak("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return f(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new fk(hk.FAILED_PRECONDITION,oI);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new ab(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=we(ke().mark((function n(r){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=we(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return cI(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Jk(t))return ik("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ik("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return uI(e).get("owner").next((function(e){return Hk.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return cI(e).delete(this.clientId)}},{key:"bi",value:function(){var e=we(ke().mark((function e(){var t,n,r,i,a=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Mb(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Hk.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=xe(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?Hk.resolve(!0):uI(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new fk(hk.FAILED_PRECONDITION,oI);return!1}}return!(!t.networkEnabled||!t.inForeground)||cI(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ik("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=we(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new jb(e,ab.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return cI(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return kS.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new cS(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return FE.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;ik("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?Lb:14===i?Ob:13===i?Ab:12===i?Db:11===i?Rb:void uk();return this.wi.runTransaction(e,o,s,(function(i){return a=new jb(i,r.Os?r.Os.next():ab.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw ak("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new fk(hk.FAILED_PRECONDITION,Bk);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return uI(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new fk(hk.FAILED_PRECONDITION,oI)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uI(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=uI(e);return n.get("owner").next((function(e){return t.Ri(e)?(ik("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Hk.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ak("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;He()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ik("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ak("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){ak("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Yk.D()}}]),e}();function uI(e){return Mb(e,"owner")}function cI(e){return Mb(e,"clientMetadata")}function lI(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var hI=function(){function e(t,n,r,i){u(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return f(e,null,[{key:"Li",value:function(t,n){var r,i=j_(),a=j_(),o=xe(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fI=function(){function e(){u(this,e),this.qi=!1}return f(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(l_(t))return Hk.resolve(null);var r=p_(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=y_(t,null,"F"),r=p_(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=j_.apply(void 0,wt(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,y_(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return l_(t)||r.isEqual(Tk.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(rk()<=It.DEBUG&&ik("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),b_(t)),i.Wi(e,o,t,Uk(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Wb(x_(e));return t.forEach((function(t,r){w_(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return rk()<=It.DEBUG&&ik("QueryEngine","Using full collection scan to execute query:",b_(t)),this.Ui.getDocumentsMatchingQuery(e,t,qk.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),dI=function(){function e(t,n,r,i){u(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new qb(Ek),this.Yi=new S_((function(e){return t_(e)}),n_),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return f(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GS(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function vI(e,t,n,r){return new dI(e,t,n,r)}function pI(e,t){return mI.apply(this,arguments)}function mI(){return mI=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=j_(),u=xe(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=xe(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,v=xe(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var m,y=xe(p.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),mI.apply(this,arguments)}function yI(e,t){var n=lk(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Hk.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ck(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=j_(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function gI(e){var t=lk(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function kI(e,t){var n=lk(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Yb.EMPTY_BYTE_STRING,Tk.min()).withLastLimboFreeSnapshotVersion(Tk.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=C_(),u=j_();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bI(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual(Tk.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Hk.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function bI(e,t,n){var r=j_(),i=j_();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=C_();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Tk.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):ik("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function wI(e,t){var n=lk(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function _I(e,t){var n=lk(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,Hk.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new _E(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function xI(e,t,n){return EI.apply(this,arguments)}function EI(){return EI=we(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lk(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jk(e.t1)){e.next=12;break}throw e.t1;case 12:ik("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),EI.apply(this,arguments)}function SI(e,t,n){var r=lk(e),i=Tk.min(),a=j_();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=lk(e),i=r.Yi.get(n);return void 0!==i?Hk.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,p_(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Tk.min(),n?a:j_())})).next((function(e){return TI(r,__(t),e),{documents:e,ir:a}}))}))}function II(e,t){var n=lk(e),r=lk(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function CI(e,t){var n=lk(e),r=n.Xi.get(t)||Tk.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Uk(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return TI(n,t,e),e}))}function TI(e,t,n){var r=e.Xi.get(t)||Tk.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function NI(e,t,n,r){return PI.apply(this,arguments)}function PI(){return PI=we(ke().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,v;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=lk(t),o=j_(),s=C_(),u=xe(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.rr(l.metadata.name),l.document&&(o=o.add(h)),(f=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),s=s.insert(h,f)}catch(p){u.e(p)}finally{u.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,_I(a,function(e){return p_(c_(Pk.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return bI(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function RI(e,t){return DI.apply(this,arguments)}function DI(){return DI=we(ke().mark((function e(t,n){var r,i,a,o=arguments;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:j_(),e.next=3,_I(t,p_(RE(n.bundledQuery)));case 3:return i=e.sent,a=lk(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Xx(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Yb.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function AI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function OI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function LI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var jI=function(){function e(t,n,r,i){u(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return f(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new fk(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ak("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),MI=function(){function e(t,n,r){u(this,e),this.targetId=t,this.state=n,this.error=r}return f(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fk(i.error.code,i.error.message))),a?new e(t,i.state,r):(ak("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),FI=function(){function e(t,n){u(this,e),this.clientId=t,this.activeTargetIds=n}return f(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=F_(),o=0;i&&o<r.activeTargetIds.length;++o)i=ub(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ak("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),UI=function(){function e(t,n){u(this,e),this.clientId=t,this.onlineState=n}return f(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ak("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),VI=function(){function e(){u(this,e),this.activeTargetIds=F_()}return f(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),qI=function(){function e(t,n,r,i,a){u(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new qb(Ek),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=AI(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new VI),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return f(e,[{key:"start",value:function(){var e=we(ke().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=xe(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(AI(this.persistenceKey,i)))&&(o=FI.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(s=this.storage.getItem(this.vr))&&(u=this.br(s))&&this.Vr(u),c=xe(this.yr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.mr(h)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(LI(this.persistenceKey,e));if(n){var r=MI.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(LI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ik("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ik("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ik("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ik("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void ak("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(we(ke().mark((function e(){var r,i,a,o,s,u,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}u=function(e){var t=ab.ct;if(null!=e)try{var n=JSON.parse(e);ck("number"==typeof n),t=n}catch(e){ak("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==ab.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new jI(this.currentUser,e,t,n),i=OI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=OI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=LI(this.persistenceKey,e),i=new MI(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return FI.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jI.ar(new ek(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return MI.ar(r,t)}},{key:"br",value:function(e){return UI.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:ik("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Wr(o,s).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=F_();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),zI=function(){function e(){u(this,e),this.Hr=new VI,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return f(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new VI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),BI=function(){function e(){u(this,e)}return f(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),WI=function(){function e(){var t=this;u(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return f(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){ik("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=xe(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){ik("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=xe(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),KI=null;function GI(){return null===KI?KI=268435456+Math.round(2147483648*Math.random()):KI++,"0x"+KI.toString(16)}var HI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},QI=function(){function e(t){u(this,e),this.ro=t.ro,this.oo=t.oo}return f(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),YI="WebChannelConnection",XI=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return f(n,[{key:"Ao",value:function(e,t,n,r){var i=GI();return new Promise((function(a,o){var s=new Xg;s.setWithCredentials(!0),s.listenOnce(Kg.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Wg.NO_ERROR:var t=s.getResponseJson();ik(YI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Wg.TIMEOUT:ik(YI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new fk(hk.DEADLINE_EXCEEDED,"Request time out"));break;case Wg.HTTP_ERROR:var n=s.getStatus();if(ik(YI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(hk).indexOf(t)>=0?t:hk.UNKNOWN}(u.status);o(new fk(c,u.message))}else o(new fk(hk.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fk(hk.UNAVAILABLE,"Connection failed."));break;default:uk()}}finally{ik(YI,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);ik(YI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=GI(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=zg(),o=Bg(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new Qg({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");ik(YI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),h=!1,f=!1,d=new QI({ro:function(t){f?ik(YI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(ik(YI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),ik(YI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),v=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return v(l,Yg.EventType.OPEN,(function(){f||ik(YI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),v(l,Yg.EventType.CLOSE,(function(){f||(f=!0,ik(YI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),v(l,Yg.EventType.ERROR,(function(t){f||(f=!0,ok(YI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new fk(hk.UNAVAILABLE,"The operation could not be completed")))})),v(l,Yg.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];ck(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){ik(YI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=px[e];if(void 0!==t)return Ex(t)}(s),c=o.message;void 0===u&&(u=hk.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),f=!0,d.wo(new fk(u,c)),l.close()}else ik(YI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),v(o,Gg.STAT_EVENT,(function(t){t.stat===Hg.PROXY?ik(YI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Hg.NOPROXY&&ik(YI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){u(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return f(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=GI(),o=this.To(e,t);ik("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return ik("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw ok("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tk,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=HI[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function $I(){return"undefined"!=typeof window?window:null}function JI(){return"undefined"!=typeof document?document:null}function ZI(e){return new Kx(e,!0)}var eC=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;u(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return f(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&ik("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),tC=function(){function e(t,n,r,i,a,o,s,c){u(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new eC(t,n)}return f(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===hk.RESOURCE_EXHAUSTED?(ak(n.toString()),ak("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===hk.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new fk(hk.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return ik("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(ik("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),nC=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s){var c;return u(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,c}return f(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:uk()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(ck(void 0===t||"string"==typeof t),Yb.fromBase64String(t||"")):(ck(void 0===t||t instanceof Uint8Array),Yb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?hk.UNKNOWN:Ex(e.code);return new fk(t,e.message||"")}(o);n=new Mx(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=eE(e,u.document.name),l=Xx(u.document.updateTime),h=u.document.createTime?Xx(u.document.createTime):Tk.min(),f=new Iw({mapValue:{fields:u.document.fields}}),d=Tw.newFoundDocument(c,l,h,f),v=u.targetIds||[],p=u.removedTargetIds||[];n=new Lx(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=eE(e,m.document),g=m.readTime?Xx(m.readTime):Tk.min(),k=Tw.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Lx([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=eE(e,w.document),x=w.removedTargetIds||[];n=new Lx([],x,_,null)}else{if(!("filter"in t))return uk();t.filter;var E=t.filter;E.targetId;var S=E.count,I=void 0===S?0:S,C=E.unchangedNames,T=new _x(I,C),N=E.targetId;n=new jx(N,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tk.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Tk.min():t.readTime?Xx(t.readTime):Tk.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=rE(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=r_(r)?{documents:lE(e,r)}:{query:hE(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Qx(e,t.resumeToken);var i=Gx(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Tk.min())>0){n.readTime=Hx(e,t.snapshotVersion.toTimestamp());var a=Gx(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return uk()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=rE(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(tC),rC=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s){var c;return u(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,c.ru=!1,c}return f(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,el(p(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(ck(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(ck(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Xx(e.updateTime):Xx(t);return n.isEqual(Tk.min())&&(n=Xx(t)),new tx(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Xx(e.commitTime);return this.listener.cu(n,t)}return ck(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=rE(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return uE(t.serializer,e)}))};this.Wo(n)}}]),n}(tC),iC=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return f(n,[{key:"fu",value:function(){if(this.lu)throw new fk(hk.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hk.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new fk(hk.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.vo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hk.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new fk(hk.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return f((function e(){u(this,e)}))}());var aC=function(){function e(t,n){u(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return f(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(ak(t),this.mu=!1):ik("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),oC=f((function e(t,n,r,i,a){var o=this;u(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=yC(o),!e.t0){e.next=5;break}return ik("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lk(t)).vu.add(4),e.next=4,cC(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,sC(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new aC(r,i)}));function sC(e){return uC.apply(this,arguments)}function uC(){return(uC=we(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yC(t)){e.next=18;break}n=xe(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function cC(e){return lC.apply(this,arguments)}function lC(){return(lC=we(ke().mark((function e(t){var n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=xe(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function hC(e,t){var n=lk(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),mC(n)?pC(n):GC(n).Ko()&&dC(n,t))}function fC(e,t){var n=lk(e),r=GC(n);n.Au.delete(t),r.Ko()&&vC(n,t),0===n.Au.size&&(r.Ko()?r.jo():yC(n)&&n.bu.set("Unknown"))}function dC(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tk.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}GC(e).su(t)}function vC(e,t){e.Vu.qt(t),GC(e).iu(t)}function pC(e){e.Vu=new Ux({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),GC(e).start(),e.bu.gu()}function mC(e){return yC(e)&&!GC(e).Uo()&&e.Au.size>0}function yC(e){return 0===lk(e).vu.size}function gC(e){e.Vu=void 0}function kC(e){return bC.apply(this,arguments)}function bC(){return(bC=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){dC(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wC(e,t){return _C.apply(this,arguments)}function _C(){return(_C=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gC(t),mC(t)?(t.bu.Iu(n),pC(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xC(e,t,n){return EC.apply(this,arguments)}function EC(){return EC=we(ke().mark((function e(t,n,r){var i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof Mx&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=we(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=xe(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ik("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,SC(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Lx?t.Vu.Ht(n):n instanceof jx?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(Tk.min())){e.next=29;break}return e.prev=14,e.next=17,gI(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Yb.EMPTY_BYTE_STRING,r.snapshotVersion)),vC(e,t);var i=new _E(r.target,t,n,r.sequenceNumber);dC(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ik("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,SC(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),EC.apply(this,arguments)}function SC(e,t,n){return IC.apply(this,arguments)}function IC(){return(IC=we(ke().mark((function e(t,n,r){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jk(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,cC(t);case 5:t.bu.set("Offline"),r||(r=function(){return gI(t.localStore)}),t.asyncQueue.enqueueRetryable(we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ik("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,sC(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CC(e,t){return t().catch((function(n){return SC(e,n,t)}))}function TC(e){return NC.apply(this,arguments)}function NC(){return(NC=we(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=lk(t),r=HC(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!PC(n)){e.next=19;break}return e.prev=3,e.next=6,wI(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,RC(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,SC(n,e.t0);case 17:e.next=2;break;case 19:DC(n)&&AC(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function PC(e){return yC(e)&&e.Eu.length<10}function RC(e,t){e.Eu.push(t);var n=HC(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function DC(e){return yC(e)&&!HC(e).Uo()&&e.Eu.length>0}function AC(e){HC(e).start()}function OC(e){return LC.apply(this,arguments)}function LC(){return(LC=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:HC(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jC(e){return MC.apply(this,arguments)}function MC(){return(MC=we(ke().mark((function e(t){var n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=HC(t),r=xe(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FC(e,t,n){return UC.apply(this,arguments)}function UC(){return(UC=we(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=bx.from(i,n,r),e.next=3,CC(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,TC(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VC(e,t){return qC.apply(this,arguments)}function qC(){return qC=we(ke().mark((function e(t,n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&HC(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=we(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xx(i=n.code)||i===hk.ABORTED){e.next=7;break}return r=t.Eu.shift(),HC(t).Qo(),e.next=5,CC(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,TC(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:DC(t)&&AC(t);case 5:case"end":return e.stop()}}),e)}))),qC.apply(this,arguments)}function zC(e,t){return BC.apply(this,arguments)}function BC(){return(BC=we(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=lk(t)).asyncQueue.verifyOperationInProgress(),ik("RemoteStore","RemoteStore received new credentials"),i=yC(r),r.vu.add(3),e.next=6,cC(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,sC(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WC(e,t){return KC.apply(this,arguments)}function KC(){return(KC=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,sC(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,cC(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GC(e){return e.Su||(e.Su=function(e,t,n){var r=lk(e);return r.fu(),new nC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:kC.bind(null,e),ao:wC.bind(null,e),nu:xC.bind(null,e)}),e.Ru.push(function(){var t=we(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),mC(e)?pC(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:gC(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function HC(e){return e.Du||(e.Du=function(e,t,n){var r=lk(e);return r.fu(),new rC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:OC.bind(null,e),ao:VC.bind(null,e),au:jC.bind(null,e),cu:FC.bind(null,e)}),e.Ru.push(function(){var t=we(ke().mark((function t(n){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,TC(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(ik("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var QC=function(){function e(t,n,r,i,a){u(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new dk,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return f(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fk(hk.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function YC(e,t){if(ak("AsyncQueue","".concat(t,": ").concat(e)),Jk(e))return new fk(hk.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var XC=function(){function e(t){u(this,e),this.comparator=t?function(e,n){return t(e,n)||Ak.comparator(e.key,n.key)}:function(e,t){return Ak.comparator(e.key,t.key)},this.keyedMap=N_(),this.sortedSet=new qb(this.comparator)}return f(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),$C=function(){function e(){u(this,e),this.Cu=new qb(Ak.comparator)}return f(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):uk():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),JC=function(){function e(t,n,r,i,a,o,s,c,l){u(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=l}return f(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&g_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,XC.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),ZC=f((function e(){u(this,e),this.Nu=void 0,this.listeners=[]})),eT=f((function e(){u(this,e),this.queries=new S_((function(e){return k_(e)}),g_),this.onlineState="Unknown",this.ku=new Set}));function tT(e,t){return nT.apply(this,arguments)}function nT(){return nT=we(ke().mark((function e(t,n){var r,i,a,o,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ZC),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=YC(e.t0,"Initialization of query '".concat(b_(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&sT(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),nT.apply(this,arguments)}function rT(e,t){return iT.apply(this,arguments)}function iT(){return iT=we(ke().mark((function e(t,n){var r,i,a,o,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),iT.apply(this,arguments)}function aT(e,t){var n,r=lk(e),i=!1,a=xe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=xe(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Nu=o}}}catch(h){a.e(h)}finally{a.f()}i&&sT(r)}function oT(e,t,n){var r=lk(e),i=r.queries.get(t);if(i){var a,o=xe(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function sT(e){e.ku.forEach((function(e){e.next()}))}var uT=function(){function e(t,n,r){u(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return f(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=xe(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new JC(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=JC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),cT=function(){function e(t,n){u(this,e),this.Gu=t,this.byteLength=n}return f(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),lT=function(){function e(t){u(this,e),this.serializer=t}return f(e,[{key:"rr",value:function(e){return eE(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?oE(this.serializer,e.document,!1):Tw.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Xx(e)}}]),e}(),hT=function(){function e(t,n,r){u(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fT(t)}return f(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Pk.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new lT(this.serializer),i=xe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.rr(a.metadata.name),u=xe(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||j_()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=we(ke().mark((function e(){var t,n,r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NI(this.localStore,new lT(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=xe(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,RI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function fT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var dT=f((function e(t){u(this,e),this.key=t})),vT=f((function e(t){u(this,e),this.key=t})),pT=function(){function e(t,n){u(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=j_(),this.mutatedKeys=j_(),this.tc=x_(t),this.ec=new XC(this.tc)}return f(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new $C,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=w_(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),v=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),v=!0):n.rc(l,h)||(r.track({type:2,doc:h}),v=!0,(u&&n.tc(h,u)>0||c&&n.tc(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),v=!0):l&&!h&&(r.track({type:1,doc:l}),v=!0,(u||c)&&(s=!0)),v&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return uk()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new JC(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new $C,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=j_(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new vT(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new dT(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=j_();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return JC.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),mT=f((function e(t,n,r){u(this,e),this.query=t,this.targetId=n,this.view=r})),yT=f((function e(t){u(this,e),this.key=t,this.fc=!1})),gT=function(){function e(t,n,r,i,a,o){u(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new S_((function(e){return k_(e)}),g_),this._c=new Map,this.mc=new Set,this.gc=new qb(Ak.comparator),this.yc=new Map,this.Ic=new YS,this.Tc={},this.Ec=new Map,this.Ac=ES.Mn(),this.onlineState="Unknown",this.vc=void 0}return f(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function kT(e,t){return bT.apply(this,arguments)}function bT(){return bT=we(ke().mark((function e(t,n){var r,i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fN(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,_I(r.localStore,p_(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,wT(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&hC(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),bT.apply(this,arguments)}function wT(e,t,n,r,i){return _T.apply(this,arguments)}function _T(){return _T=we(ke().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=we(ke().mark((function e(t,n,r,i){var a,o,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,SI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(zT(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,SI(t.localStore,n,!0);case 3:return o=e.sent,s=new pT(n,o.ir),u=s.sc(o.documents),c=Ox.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),zT(t,r,l.cc),h=new mT(n,r,s),e.abrupt("return",(t.wc.set(n,h),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function xT(e,t){return ET.apply(this,arguments)}function ET(){return(ET=we(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lk(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!g_(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,xI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),fC(r.remoteStore,i.targetId),VT(r,i.targetId)})).catch(Kk);case 9:e.next=14;break;case 11:return VT(r,i.targetId),e.next=14,xI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ST(e,t,n){return IT.apply(this,arguments)}function IT(){return IT=we(ke().mark((function e(t,n,r){var i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dN(t),e.prev=1,e.next=4,function(e,t){var n,r,i=lk(e),a=Ck.now(),o=t.reduce((function(e,t){return e.add(t.key)}),j_());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=C_(),u=j_();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=xe(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=ux(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new hx(c.key,l,Cw(l.value.mapValue),nx.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:P_(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new qb(Ek)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,KT(i,a.changes);case 9:return e.next=11,TC(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=YC(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),IT.apply(this,arguments)}function CT(e,t){return TT.apply(this,arguments)}function TT(){return(TT=we(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.prev=1,e.next=4,kI(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(ck(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?ck(n.fc):e.removedDocuments.size>0&&(ck(n.fc),n.fc=!1))})),e.next=8,KT(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Kk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function NT(e,t,n){var r=lk(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=lk(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=xe(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&sT(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function PT(e,t,n){return RT.apply(this,arguments)}function RT(){return RT=we(ke().mark((function e(t,n,r){var i,a,o,s,u,c;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=lk(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new qb(Ak.comparator)).insert(o,Tw.newNoDocument(o,Tk.min())),u=j_().add(o),c=new Ax(Tk.min(),new Map,new qb(Ek),s,u),e.next=9,CT(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),WT(i),e.next=16;break;case 14:return e.next=16,xI(i.localStore,n,!1).then((function(){return VT(i,n,r)})).catch(Kk);case 16:case"end":return e.stop()}}),e)}))),RT.apply(this,arguments)}function DT(e,t){return AT.apply(this,arguments)}function AT(){return(AT=we(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),i=n.batch.batchId,e.prev=1,e.next=4,yI(r.localStore,n);case 4:return a=e.sent,UT(r,i,null),FT(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,KT(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function OT(e,t,n){return LT.apply(this,arguments)}function LT(){return(LT=we(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lk(t),e.prev=1,e.next=4,function(e,t){var n=lk(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ck(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,UT(i,n,r),FT(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,KT(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function jT(e,t){return MT.apply(this,arguments)}function MT(){return(MT=we(ke().mark((function e(t,n){var r,i,a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yC((r=lk(t)).remoteStore)||ik("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=lk(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=YC(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function FT(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function UT(e,t,n){var r=lk(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function VT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=xe(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||qT(e,t)}))}function qT(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(fC(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),WT(e))}function zT(e,t,n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof dT?(e.Ic.addReference(a.key,t),BT(e,a)):a instanceof vT?(ik("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||qT(e,a.key)):uk()}}catch(o){i.e(o)}finally{i.f()}}function BT(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(ik("SyncEngine","New document in limbo: "+n),e.mc.add(r),WT(e))}function WT(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Ak(Pk.fromString(t)),r=e.Ac.next();e.yc.set(r,new yT(n)),e.gc=e.gc.insert(n,r),hC(e.remoteStore,new _E(p_(c_(n.path)),r,"TargetPurposeLimboResolution",ab.ct))}}function KT(e,t,n){return GT.apply(this,arguments)}function GT(){return GT=we(ke().mark((function e(t,n,r){var i,a,o,s;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lk(t),a=[],o=[],s=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){s.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=hI.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.dc.nu(a),e.next=9,function(){var e=we(ke().mark((function e(t,n){var r,i,a,o,s,u,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Hk.forEach(n,(function(t){return Hk.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Hk.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jk(e.t0)){e.next=10;break}throw e.t0;case 10:ik("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=xe(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}function HT(e,t){return QT.apply(this,arguments)}function QT(){return(QT=we(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=lk(t)).currentUser.isEqual(n)){e.next=11;break}return ik("SyncEngine","User change. New user:",n.toKey()),e.next=5,pI(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new fk(hk.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,KT(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YT(e,t){var n=lk(e),r=n.yc.get(t);if(r&&r.fc)return j_().add(r.key);var i=j_(),a=n._c.get(t);if(!a)return i;var o,s=xe(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(l){s.e(l)}finally{s.f()}return i}function XT(e,t){return $T.apply(this,arguments)}function $T(){return($T=we(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.next=3,SI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&zT(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JT(e,t){return ZT.apply(this,arguments)}function ZT(){return(ZT=we(ke().mark((function e(t,n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),e.abrupt("return",CI(r.localStore,n).then((function(e){return KT(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eN(e,t,n,r){return tN.apply(this,arguments)}function tN(){return tN=we(ke().mark((function e(t,n,r,i){var a,o;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=lk(t),e.next=3,function(e,t){var n=lk(e),r=lk(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Hk.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,TC(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(UT(a,n,i||null),FT(a,n),function(e,t){lk(lk(e).mutationQueue).Cn(t)}(a.localStore,n)):uk();case 11:return e.next=13,KT(a,o);case 13:e.next=16;break;case 15:ik("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),tN.apply(this,arguments)}function nN(e,t){return rN.apply(this,arguments)}function rN(){return(rN=we(ke().mark((function e(t,n){var r,i,a,o,s,u,c,l;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fN(r=lk(t)),dN(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,iN(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,WC(r.remoteStore,!0);case 9:o=xe(a);try{for(o.s();!(s=o.n()).done;)u=s.value,hC(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return VT(r,t),xI(r.localStore,t,!0)})),fC(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,iN(r,c);case 21:return function(e){var t=lk(e);t.yc.forEach((function(e,n){fC(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new qb(Ak.comparator)}(r),r.vc=!1,e.next=25,WC(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iN(e,t,n){return aN.apply(this,arguments)}function aN(){return aN=we(ke().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,v,p,m,y;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=lk(t),a=[],o=[],s=xe(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i._c.get(c))||0===h.length){e.next=34;break}return e.next=11,_I(i.localStore,p_(h[0]));case 11:l=e.sent,f=xe(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return v=d.value,p=i.wc.get(v),e.next=20,XT(i,p);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,II(i.localStore,c);case 36:return y=e.sent,e.next=39,_I(i.localStore,y);case 39:return l=e.sent,e.next=42,wT(i,oN(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),aN.apply(this,arguments)}function oN(e){return u_(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sN(e){var t=lk(e);return lk(lk(t.localStore).persistence).$i()}function uN(e,t,n,r){return cN.apply(this,arguments)}function cN(){return cN=we(ke().mark((function e(t,n,r,i){var a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=lk(t)).vc){e.next=3;break}return e.abrupt("return",void ik("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,CI(a.localStore,__(o[0]));case 10:return s=e.sent,u=Ax.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Yb.EMPTY_BYTE_STRING),e.next=14,KT(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,xI(a.localStore,n,!0);case 17:return VT(a,n,i),e.abrupt("break",20);case 19:uk();case 20:case"end":return e.stop()}}),e)}))),cN.apply(this,arguments)}function lN(e,t,n){return hN.apply(this,arguments)}function hN(){return(hN=we(ke().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=fN(t)).vc){e.next=45;break}a=xe(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i._c.has(s)){e.next=10;break}return ik("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,II(i.localStore,s);case 12:return u=e.sent,e.next=15,_I(i.localStore,u);case 15:return c=e.sent,e.next=18,wT(i,oN(u),c.targetId,!1,c.resumeToken);case 18:hC(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=xe(r),e.prev=30,f=ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,xI(i.localStore,t,!1).then((function(){fC(i.remoteStore,t),VT(i,t)})).catch(Kk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function fN(e){var t=lk(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=CT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=PT.bind(null,t),t.dc.nu=aT.bind(null,t.eventManager),t.dc.Pc=oT.bind(null,t.eventManager),t}function dN(e){var t=lk(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=DT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=OT.bind(null,t),t}function vN(e,t,n){var r=lk(e);(function(){var e=we(ke().mark((function e(t,n,r){var i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=lk(e),r=Xx(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(fT(i)),a=new hT(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,KT(t,u.Ju,void 0);case 31:return e.next=33,function(e,t){var n=lk(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ok("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var pN=function(){function e(){u(this,e),this.synchronizeTabs=!1}return f(e,[{key:"initialize",value:function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=ZI(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return vI(this.persistence,new fI,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new tI(rI.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new zI}},{key:"terminate",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),mN=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return f(n,[{key:"initialize",value:function(){var e=we(ke().mark((function e(t){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,el(p(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,dN(this.Vc.syncEngine);case 6:return e.next=8,TC(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return vI(this.persistence,new fI,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new RS(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new ib(t,this.persistence);return new rb(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=lI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?mS.withCacheSize(this.cacheSizeBytes):mS.DEFAULT;return new sI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,$I(),JI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new zI}}]),n}(pN),yN=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return f(n,[{key:"initialize",value:function(){var e=we(ke().mark((function e(t){var r,i=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,el(p(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof qI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:eN.bind(null,r),zr:uN.bind(null,r),Wr:lN.bind(null,r),$i:sN.bind(null,r),Qr:JT.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nN(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=$I();if(!qI.D(t))throw new fk(hk.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(mN),gN=function(){function e(){u(this,e)}return f(e,[{key:"initialize",value:function(){var e=we(ke().mark((function e(t,n){var r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return NT(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=HT.bind(null,this.syncEngine),e.next=12,WC(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new eT}},{key:"createDatastore",value:function(e){var t,n=ZI(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new XI(t));return function(e,t,n,r){return new iC(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return NT(o.syncEngine,e,0)},a=WI.D()?new WI:new BI,new oC(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new gT(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lk(t),ik("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,cC(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function kN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return we(ke().mark((function r(){var i;return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var bN=function(){function e(t){u(this,e),this.observer=t,this.muted=!1}return f(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):ak("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),wN=function(){function e(t,n){var r=this;u(this,e),this.Cc=t,this.serializer=n,this.metadata=new dk,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return f(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=we(ke().mark((function e(){var t,n,r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new cT(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=we(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=we(ke().mark((function e(){var t,n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_N=function(){function e(t){u(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return f(e,[{key:"lookup",value:function(){var e=we(ke().mark((function e(t){var n,r=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new fk(hk.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=we(ke().mark((function e(t,n){var r,i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),i=rE(r.serializer)+"/documents",a={documents:n.map((function(e){return Zx(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=sE(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());ck(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new yx(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=we(ke().mark((function e(){var t,n=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ak.fromPath(t);n.mutations.push(new gx(r,n.precondition(r)))})),e.next=7,function(){var e=we(ke().mark((function e(t,n){var r,i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk(t),i=rE(r.serializer)+"/documents",a={writes:n.map((function(e){return uE(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw uk();t=Tk.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new fk(hk.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tk.min())?nx.exists(!1):nx.updateTime(t):nx.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tk.min()))throw new fk(hk.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nx.updateTime(t)}return nx.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),xN=function(){function e(t,n,r,i,a){u(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new eC(this.asyncQueue,"transaction_retry")}return f(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(we(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new _N(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!ob(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xx(t)}return!1}}]),e}(),EN=function(){function e(t,n,r,i){var a=this;u(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ek.UNAUTHENTICATED,this.clientId=xk.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ik("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ik("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return f(e,[{key:"getConfiguration",value:function(){var e=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new fk(hk.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new dk;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(we(ke().mark((function n(){var r;return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=YC(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function SN(e,t){return IN.apply(this,arguments)}function IN(){return IN=we(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ik("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,pI(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),IN.apply(this,arguments)}function CN(e,t){return TN.apply(this,arguments)}function TN(){return(TN=we(ke().mark((function e(t,n){var r,i;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,PN(t);case 3:return r=e.sent,ik("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return zC(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return zC(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NN(e){return"FirebaseError"===e.name?e.code===hk.FAILED_PRECONDITION||e.code===hk.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function PN(e){return RN.apply(this,arguments)}function RN(){return(RN=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return ik("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,SN(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),NN(n=e.t0)){e.next=13;break}throw n;case 13:return ok("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,SN(t,new pN);case 16:e.next=21;break;case 18:return ik("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,SN(t,new pN);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function DN(e){return AN.apply(this,arguments)}function AN(){return(AN=we(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return ik("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,CN(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return ik("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,CN(t,new gN);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ON(e){return PN(e).then((function(e){return e.persistence}))}function LN(e){return PN(e).then((function(e){return e.localStore}))}function jN(e){return DN(e).then((function(e){return e.remoteStore}))}function MN(e){return DN(e).then((function(e){return e.syncEngine}))}function FN(e){return DN(e).then((function(e){return e.datastore}))}function UN(e){return VN.apply(this,arguments)}function VN(){return(VN=we(ke().mark((function e(t){var n,r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DN(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=kT.bind(null,n.syncEngine),r.onUnlisten=xT.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dk;return e.asyncQueue.enqueueAndForget(we(ke().mark((function i(){return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bN({next:function(a){t.enqueueAndForget((function(){return rT(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new fk(hk.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new fk(hk.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new uT(c_(n.path),a,{includeMetadataChanges:!0,Ku:!0});return tT(e,o)},i.next=3,UN(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function zN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dk;return e.asyncQueue.enqueueAndForget(we(ke().mark((function i(){return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new bN({next:function(n){t.enqueueAndForget((function(){return rT(e,o)})),n.fromCache&&"server"===r.source?i.reject(new fk(hk.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new uT(n,a,{includeMetadataChanges:!0,Ku:!0});return tT(e,o)},i.next=3,UN(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function BN(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var WN=new Map;function KN(e,t,n){if(!n)throw new fk(hk.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function GN(e,t,n,r){if(!0===t&&!0===r)throw new fk(hk.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function HN(e){if(!Ak.isDocumentKey(e))throw new fk(hk.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function QN(e){if(Ak.isDocumentKey(e))throw new fk(hk.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function YN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":uk()}function XN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fk(hk.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=YN(e);throw new fk(hk.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $N(e,t){if(t<=0)throw new fk(hk.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var JN=function(){function e(t){var n,r;if(u(this,e),void 0===t.host){if(void 0!==t.ssl)throw new fk(hk.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fk(hk.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}GN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BN(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fk(hk.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new fk(hk.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new fk(hk.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return f(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),ZN=function(){function e(t,n,r,i){u(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JN({}),this._settingsFrozen=!1}return f(e,[{key:"app",get:function(){if(!this._app)throw new fk(hk.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new fk(hk.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JN(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new pk;switch(e.type){case"firstParty":return new kk(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fk(hk.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=WN.get(e);t&&(ik("ComponentProvider","Removing Datastore"),WN.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function eP(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=XN(e,ZN))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&ok("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=ek.MOCK_USER;else{o=ze(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new fk(hk.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new ek(u)}e._authCredentials=new mk(new vk(o,s))}}var tP=function(){function e(t,n,r){u(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return f(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new rP(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),nP=function(){function e(t,n,r){u(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return f(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),rP=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this,e,r,c_(i)))._path=i,a.type="collection",a}return f(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new tP(this.firestore,null,new Ak(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(nP);function iP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),KN("collection","path",t),e instanceof ZN){var a=Pk.fromString.apply(Pk,[t].concat(r));return QN(a),new rP(e,null,a)}if(!(e instanceof tP||e instanceof rP))throw new fk(hk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Pk.fromString.apply(Pk,[t].concat(r)));return QN(o),new rP(e.firestore,null,o)}function aP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),1===arguments.length&&(t=xk.A()),KN("doc","path",t),e instanceof ZN){var a=Pk.fromString.apply(Pk,[t].concat(r));return HN(a),new tP(e,null,new Ak(a))}if(!(e instanceof tP||e instanceof rP))throw new fk(hk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Pk.fromString.apply(Pk,[t].concat(r)));return HN(o),new tP(e.firestore,e instanceof rP?e.converter:null,new Ak(o))}function oP(e,t){return e=bt(e),t=bt(t),(e instanceof tP||e instanceof rP)&&(t instanceof tP||t instanceof rP)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function sP(e,t){return e=bt(e),t=bt(t),e instanceof nP&&t instanceof nP&&e.firestore===t.firestore&&g_(e._query,t._query)&&e.converter===t.converter}var uP=function(){function e(){var t=this;u(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new eC(this,"async_queue_retry"),this.Xc=function(){var e=JI();e&&ik("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=JI();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return f(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=JI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new dk;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=we(ke().mark((function e(){var t=this;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jk(e.t0)){e.next=12;break}throw e.t0;case 12:ik("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ak("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=QC.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&uk()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=we(ke().mark((function e(){var t;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=xe(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=xe(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function cP(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=xe(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var lP=function(){function e(){u(this,e),this._progressObserver={},this._taskCompletionResolver=new dk,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return f(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),hP=function(e){v(n,e);var t=k(n);function n(e,r,i,a){var o;return u(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new uP,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return f(n,[{key:"_terminate",value:function(){return this._firestoreClient||dP(this),this._firestoreClient.terminate()}}]),n}(ZN);function fP(e){return e._firestoreClient||dP(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dP(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new rw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,BN(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new EN(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function vP(e,t,n){var r=new dk;return e.asyncQueue.enqueue(we(ke().mark((function i(){var a;return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,SN(e,n);case 3:return i.next=5,CN(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),NN(a=i.t0)){i.next=13;break}throw a;case 13:ok("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function pP(e){return function(e){return e.asyncQueue.enqueue(we(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ON(e);case 2:return n=t.sent,t.next=5,jN(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=lk(e);return t.vu.delete(0),sC(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(fP(e=XN(e,hP)))}function mP(e){return function(e){return e.asyncQueue.enqueue(we(ke().mark((function t(){var n,r;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ON(e);case 2:return n=t.sent,t.next=5,jN(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lk(t)).vu.add(0),e.next=4,cC(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(fP(e=XN(e,hP)))}function yP(e,t){var n=fP(e=XN(e,hP)),r=new lP;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new wN(e,t)}(function(e,t){if(e instanceof Uint8Array)return kN(e,t);if(e instanceof ArrayBuffer)return kN(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Cx().encode(e):e),t)}(n,ZI(t));e.asyncQueue.enqueueAndForget(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vN,t.next=3,MN(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function gP(e,t){return function(e,t){return e.asyncQueue.enqueue(we(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=lk(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,LN(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(fP(e=XN(e,hP)),t).then((function(t){return t?new nP(e,null,t.query):null}))}function kP(e){if(e._initialized||e._terminated)throw new fk(hk.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bP=function(){function e(t){u(this,e),this._byteString=t}return f(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yb.fromBase64String(t))}catch(t){throw new fk(hk.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yb.fromUint8Array(t))}}]),e}(),wP=function(){function e(){u(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new fk(hk.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dk(n)}return f(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var _P=f((function e(t){u(this,e),this._methodName=t})),xP=function(){function e(t,n){if(u(this,e),!isFinite(t)||t<-90||t>90)throw new fk(hk.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new fk(hk.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return f(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ek(this._lat,e._lat)||Ek(this._long,e._long)}}]),e}(),EP=/^__.*__$/,SP=function(){function e(t,n,r){u(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new hx(e,this.data,this.fieldMask,t,this.fieldTransforms):new lx(e,this.data,t,this.fieldTransforms)}}]),e}(),IP=function(){function e(t,n,r){u(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return new hx(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function CP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw uk()}}var TP=function(){function e(t,n,r,i,a,o){u(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return f(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return QP(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(CP(this.ca)&&EP.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),NP=function(){function e(t,n,r){u(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||ZI(t)}return f(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new TP({ca:e,methodName:t,ga:n,path:Dk.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function PP(e){var t=e._freezeSettings(),n=ZI(e._databaseId);return new NP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function RP(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);WP("Data must be an object, but it was:",o,r);var s,u,c=zP(r,o);if(a.merge)s=new Hb(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=xe(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,v=KP(t,d,n);if(!o.contains(v))throw new fk(hk.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));YP(h,v)||h.push(v)}}catch(p){f.e(p)}finally{f.f()}s=new Hb(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new SP(new Iw(c),s,u)}var DP=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(_P);function AP(e,t,n){return new TP({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var OP=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){return new ex(e.path,new G_)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(_P),LP=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e)).pa=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=AP(this,e,!0),n=this.pa.map((function(e){return qP(e,t)})),r=new H_(n);return new ex(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_P),jP=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e)).pa=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=AP(this,e,!0),n=this.pa.map((function(e){return qP(e,t)})),r=new Y_(n);return new ex(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_P),MP=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e)).Ia=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=new $_(e.serializer,q_(e.serializer,this.Ia));return new ex(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(_P);function FP(e,t,n,r){var i=e.ya(1,t,n);WP("Data must be an object, but it was:",i,r);var a=[],o=Iw.empty();Ub(r,(function(e,r){var s=HP(t,e,n);r=bt(r);var u=i.da(s);if(r instanceof DP)a.push(s);else{var c=qP(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Hb(a);return new IP(o,s,i.fieldTransforms)}function UP(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[KP(t,r,n)],u=[i];if(a.length%2!=0)throw new fk(hk.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(KP(t,a[c])),u.push(a[c+1]);for(var l=[],h=Iw.empty(),f=s.length-1;f>=0;--f)if(!YP(l,s[f])){var d=s[f],v=u[f];v=bt(v);var p=o.da(d);if(v instanceof DP)l.push(d);else{var m=qP(v,p);null!=m&&(l.push(d),h.set(d,m))}}var y=new Hb(l);return new IP(h,y,o.fieldTransforms)}function VP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qP(n,e.ya(r?4:3,t))}function qP(e,t){if(BP(e=bt(e)))return WP("Unsupported field value:",t,e),zP(e,t);if(e instanceof _P)return function(e,t){if(!CP(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=xe(e);try{for(a.s();!(n=a.n()).done;){var o=qP(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=bt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return q_(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ck.fromDate(e);return{timestampValue:Hx(t.serializer,n)}}if(e instanceof Ck){var r=new Ck(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Hx(t.serializer,r)}}if(e instanceof xP)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bP)return{bytesValue:Qx(t.serializer,e._byteString)};if(e instanceof tP){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:$x(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(YN(e)))}(e,t)}function zP(e,t){var n={};return Vb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ub(e,(function(e,r){var i=qP(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function BP(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ck||e instanceof xP||e instanceof bP||e instanceof tP||e instanceof _P)}function WP(e,t,n){if(!BP(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=YN(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function KP(e,t,n){if((t=bt(t))instanceof wP)return t._internalPath;if("string"==typeof t)return HP(e,t);throw QP("Field path arguments must be of type string or ",e,!1,void 0,n)}var GP=new RegExp("[~\\*/\\[\\]]");function HP(e,t,n){if(t.search(GP)>=0)throw QP("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return b(wP,wt(t.split(".")))._internalPath}catch(r){throw QP("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function QP(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new fk(hk.INVALID_ARGUMENT,s+e+u)}function YP(e,t){return e.some((function(e){return e.isEqual(t)}))}var XP=function(){function e(t,n,r,i,a){u(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return f(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new tP(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new $P(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(JP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),$P=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){return el(p(n.prototype),"data",this).call(this)}}]),n}(XP);function JP(e,t){return"string"==typeof t?HP(e,t):t instanceof wP?t._internalPath:t._delegate._internalPath}function ZP(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fk(hk.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var eR=f((function e(){u(this,e)})),tR=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n)}(eR);function nR(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof eR&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof iR})).length,n=e.filter((function(e){return e instanceof rR})).length;if(t>1||t>0&&n>0)throw new fk(hk.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=xe(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;e=u._apply(e)}}catch(c){s.e(c)}finally{s.f()}return e}var rR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return f(n,[{key:"_apply",value:function(e){var t=this._parse(e);return mR(e._query,t),new nP(e.firestore,e.converter,m_(e._query,t))}},{key:"_parse",value:function(e){var t=PP(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new fk(hk.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){pR(o,a);var u,c=[],l=xe(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(vR(r,e,h))}}catch(f){l.e(f)}finally{l.f()}s={arrayValue:{values:c}}}else s=vR(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||pR(o,a),s=VP(n,"where",o,"in"===a||"not-in"===a);return Lw.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tR);var iR=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return f(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:jw.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=xe(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;mR(r,a),r=m_(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new nP(e.firestore,e.converter,m_(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(eR);var aR=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return f(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new fk(hk.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fk(hk.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Dw(t,n);return function(e,t){if(null===h_(e)){var n=f_(e);null!==n&&yR(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new nP(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new s_(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(tR);var oR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return f(n,[{key:"_apply",value:function(e){return new nP(e.firestore,e.converter,y_(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tR);var sR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return f(n,[{key:"_apply",value:function(e){var t=dR(e,this.type,this._docOrFields,this._inclusive);return new nP(e.firestore,e.converter,function(e,t){return new s_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tR);function uR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sR._create("startAt",t,!0)}function cR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sR._create("startAfter",t,!1)}var lR=function(e){v(n,e);var t=k(n);function n(e,r,i){var a;return u(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return f(n,[{key:"_apply",value:function(e){var t=dR(e,this.type,this._docOrFields,this._inclusive);return new nP(e.firestore,e.converter,function(e,t){return new s_(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(tR);function hR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lR._create("endBefore",t,!1)}function fR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lR._create("endAt",t,!0)}function dR(e,t,n,r){if(n[0]=bt(n[0]),n[0]instanceof XP)return function(e,t,n,r,i){if(!r)throw new fk(hk.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=xe(v_(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(vw(t,r.key));else{var c=r.data.field(u.field);if(ew(c))throw new fk(hk.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new fk(hk.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new Nw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=PP(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new fk(hk.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new fk(hk.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!d_(e)&&-1!==c.indexOf("/"))throw new fk(hk.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Pk.fromString(c));if(!Ak.isDocumentKey(l))throw new fk(hk.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Ak(l);s.push(vw(t,h))}else{var f=VP(n,r,c);s.push(f)}}return new Nw(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function vR(e,t,n){if("string"==typeof(n=bt(n))){if(""===n)throw new fk(hk.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d_(t)&&-1!==n.indexOf("/"))throw new fk(hk.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Pk.fromString(n));if(!Ak.isDocumentKey(r))throw new fk(hk.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vw(e,new Ak(r))}if(n instanceof tP)return vw(e,n._key);throw new fk(hk.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(YN(n),"."))}function pR(e,t){if(!Array.isArray(e)||0===e.length)throw new fk(hk.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function mR(e,t){if(t.isInequality()){var n=f_(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new fk(hk.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=h_(e);null!==i&&yR(e,r,i)}var a=function(e,t){var n,r=xe(e);try{for(r.s();!(n=r.n()).done;){var i,a=xe(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new fk(hk.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fk(hk.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function yR(e,t,n){if(!n.isEqual(t))throw new fk(hk.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var gR=function(){function e(){u(this,e)}return f(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw uk()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Ub(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new xP(Jb(e.latitude),Jb(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=tw(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nw(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$b(e);return new Ck(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Pk.fromString(e);ck(wE(n));var r=new iw(n.get(1),n.get(3)),i=new Ak(n.popFirst(5));return r.isEqual(t)||ak("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function kR(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bR=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new bP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tP(this.firestore,null,t)}}]),n}(gR);var wR=function(){function e(t,n){u(this,e),this.hasPendingWrites=t,this.fromCache=n}return f(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),_R=function(e){v(n,e);var t=k(n);function n(e,r,i,a,o,s){var c;return u(this,n),(c=t.call(this,e,r,i,a,s))._firestore=e,c._firestoreImpl=e,c.metadata=o,c}return f(n,[{key:"exists",value:function(){return el(p(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(JP("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(XP),xR=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return el(p(n.prototype),"data",this).call(this,e)}}]),n}(_R),ER=function(){function e(t,n,r,i){u(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new wR(i.hasPendingWrites,i.fromCache),this.query=r}return f(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xR(n._firestore,n._userDataWriter,r.key,r,new wR(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fk(hk.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new xR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:SR(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function SR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return uk()}}function IR(e,t){return e instanceof _R&&t instanceof _R?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ER&&t instanceof ER&&e._firestore===t._firestore&&sP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var CR=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new bP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new tP(this.firestore,null,t)}}]),n}(gR);function TR(e){e=XN(e,tP);var t=XN(e.firestore,hP),n=fP(t),r=new CR(t);return function(e,t){var n=new dk;return e.asyncQueue.enqueueAndForget(we(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=we(ke().mark((function e(t,n,r){var i,a;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=lk(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new fk(hk.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=YC(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,LN(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new _R(t,r,e._key,n,new wR(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function NR(e){e=XN(e,nP);var t=XN(e.firestore,hP),n=fP(t),r=new CR(t);return function(e,t){var n=new dk;return e.asyncQueue.enqueueAndForget(we(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=we(ke().mark((function e(t,n,r){var i,a,o,s,u;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,SI(t,n,!0);case 3:i=e.sent,a=new pT(n,i.ir),o=a.sc(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=YC(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,LN(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ER(t,r,e,n)}))}function PR(e,t,n){e=XN(e,tP);var r=XN(e.firestore,hP),i=kR(e.converter,t,n);return OR(r,[RP(PP(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,nx.none())])}function RR(e,t,n){e=XN(e,tP);for(var r=XN(e.firestore,hP),i=PP(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return OR(r,[("string"==typeof(t=bt(t))||t instanceof wP?UP(i,"updateDoc",e._key,t,n,o):FP(i,"updateDoc",e._key,t)).toMutation(e._key,nx.exists(!0))])}function DR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=bt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||cP(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(cP(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof tP)l=XN(e.firestore,hP),h=c_(e._key.path),c={next:function(t){n[u]&&n[u](LR(l,e,t))},error:n[u+1],complete:n[u+2]};else{var v=XN(e,nP);l=XN(v.firestore,hP),h=v._query;var p=new CR(l);c={next:function(e){n[u]&&n[u](new ER(l,p,v,e))},error:n[u+1],complete:n[u+2]},ZP(e._query)}return function(e,t,n,r){var i=new bN(r),a=new uT(t,i,n);return e.asyncQueue.enqueueAndForget(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=tT,t.next=3,UN(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rT,t.next=3,UN(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(fP(l),h,f,c)}function AR(e,t){return function(e,t){var n=new bN(t);return e.asyncQueue.enqueueAndForget(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lk(e).ku.add(t),t.next()},t.next=3,UN(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lk(e).ku.delete(t)},t.next=3,UN(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(fP(e=XN(e,hP)),cP(t)?t:{next:t})}function OR(e,t){return function(e,t){var n=new dk;return e.asyncQueue.enqueueAndForget(we(ke().mark((function r(){return ke().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ST,r.next=3,MN(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(fP(e),t)}function LR(e,t,n){var r=n.docs.get(t._key),i=new CR(e);return new _R(e,i,t._key,r,new wR(n.hasPendingWrites,n.fromCache),t.converter)}var jR={maxAttempts:5},MR=function(){function e(t,n){u(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=PP(t)}return f(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=FR(e,this._firestore),i=kR(r.converter,t,n),a=RP(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,nx.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=FR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=bt(t))||t instanceof wP?UP(this._dataReader,"WriteBatch.update",i._key,t,n,o):FP(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,nx.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=FR(e,this._firestore);return this._mutations=this._mutations.concat(new yx(t._key,nx.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new fk(hk.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function FR(e,t){if((e=bt(e)).firestore!==t)throw new fk(hk.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var UR=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r))._firestore=e,i}return f(n,[{key:"get",value:function(e){var t=this,r=FR(e,this._firestore),i=new CR(this._firestore);return el(p(n.prototype),"get",this).call(this,e).then((function(e){return new _R(t._firestore,i,r._key,e._document,new wR(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){u(this,e),this._firestore=t,this._transaction=n,this._dataReader=PP(t)}return f(e,[{key:"get",value:function(e){var t=this,n=FR(e,this._firestore),r=new bR(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return uk();var i=e[0];if(i.isFoundDocument())return new XP(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new XP(t._firestore,r,n._key,null,n.converter);throw uk()}))}},{key:"set",value:function(e,t,n){var r=FR(e,this._firestore),i=kR(r.converter,t,n),a=RP(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=FR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=bt(t))||t instanceof wP?UP(this._dataReader,"Transaction.update",i._key,t,n,o):FP(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=FR(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function VR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LP("arrayUnion",t)}function qR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jP("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tk=e}(gn),hn(new _t("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new hP(new yk(e.getProvider("auth-internal")),new wk(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fk(hk.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iw(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),En(Zg,"3.12.0",e),En(Zg,"3.12.0","esm2017")}();function zR(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new fk("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function BR(){if("undefined"===typeof Uint8Array)throw new fk("unimplemented","Uint8Arrays are not available in this environment.")}function WR(){if("undefined"==typeof atob)throw new fk("unimplemented","Blobs are unavailable in Firestore in this environment.")}var KR=function(){function e(t){u(this,e),this._delegate=t}return f(e,[{key:"toBase64",value:function(){return WR(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return BR(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return WR(),new e(bP.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return BR(),new e(bP.fromUint8Array(t))}}]),e}();function GR(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=xe(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var HR=function(){function e(){u(this,e)}return f(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){kP(e=XN(e,hP));var n=fP(e);if(n._uninitializedComponentsProvider)throw new fk(hk.FAILED_PRECONDITION,"SDK cache is already specified.");ok("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new gN;return vP(n,i,new mN(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){kP(e=XN(e,hP));var t=fP(e);if(t._uninitializedComponentsProvider)throw new fk(hk.FAILED_PRECONDITION,"SDK cache is already specified.");ok("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new gN;return vP(t,r,new yN(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new fk(hk.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new dk;return e._queue.enqueueAndForgetEvenWhileRestricted(we(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=we(ke().mark((function e(t){var n;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yk.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yk.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(lI(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),QR=function(){function e(t,n,r){var i=this;u(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof iw||(this._appCompat=t)}return f(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ok("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};eP(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return pP(this._delegate)}},{key:"disableNetwork",value:function(){return mP(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&GN("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new dk;return e.asyncQueue.enqueueAndForget(we(ke().mark((function n(){return ke().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=jT,n.next=3,MN(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(fP(XN(this._delegate,hP)))}},{key:"onSnapshotsInSync",value:function(e){return AR(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new fk("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new uD(this,iP(this._delegate,e))}catch(t){throw eD(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new ZR(this,aP(this._delegate,e))}catch(t){throw eD(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new aD(this,function(e,t){if(e=XN(e,ZN),KN("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new fk(hk.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new nP(e,null,function(e){return new s_(Pk.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw eD(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=XN(e,hP);var r=Object.assign(Object.assign({},jR),n);return function(e){if(e.maxAttempts<1)throw new fk(hk.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new dk;return e.asyncQueue.enqueueAndForget(we(ke().mark((function i(){var a;return ke().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,FN(e);case 2:a=i.sent,new xN(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(fP(e),(function(n){return t(new UR(e,n))}),r)}(this._delegate,(function(n){return e(new XR(t,n))}))}},{key:"batch",value:function(){var e=this;return fP(this._delegate),new $R(new MR(this._delegate,(function(t){return OR(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return yP(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return gP(this._delegate,e).then((function(e){return e?new aD(t,e):null}))}}]),e}(),YR=function(e){v(n,e);var t=k(n);function n(e){var r;return u(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new KR(new bP(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return ZR.forKey(t,this.firestore,null)}}]),n}(gR);var XR=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new YR(t)}return f(e,[{key:"get",value:function(e){var t=this,n=cD(e);return this._delegate.get(n).then((function(e){return new rD(t._firestore,new _R(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=cD(e);return n?(zR("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=cD(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cD(e);return this._delegate.delete(t),this}}]),e}(),$R=function(){function e(t){u(this,e),this._delegate=t}return f(e,[{key:"set",value:function(e,t,n){var r=cD(e);return n?(zR("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=cD(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cD(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),JR=function(){function e(t,n,r){u(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return f(e,[{key:"fromFirestore",value:function(e,t){var n=new xR(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iD(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new YR(t),n),i.set(n,a)),a}}]),e}();JR.INSTANCES=new WeakMap;var ZR=function(){function e(t,n){u(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new YR(t)}return f(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new uD(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new uD(this.firestore,iP(this._delegate,e))}catch(t){throw eD(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=bt(e))instanceof tP&&oP(this._delegate,e)}},{key:"set",value:function(e,t){t=zR("DocumentReference.set",t);try{return t?PR(this._delegate,e,t):PR(this._delegate,e)}catch(n){throw eD(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?RR(this._delegate,e):RR.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw eD(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return OR(XN((e=this._delegate).firestore,hP),[new yx(e._key,nx.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tD(n),a=nD(n,(function(t){return new rD(e.firestore,new _R(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return DR(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?TR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=XN(e,tP);var t=XN(e.firestore,hP);return qN(fP(t),e._key,{source:"server"}).then((function(n){return LR(t,e,n)}))}(this._delegate):function(e){e=XN(e,tP);var t=XN(e.firestore,hP);return qN(fP(t),e._key).then((function(n){return LR(t,e,n)}))}(this._delegate)).then((function(e){return new rD(t.firestore,new _R(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(JR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new fk("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new tP(n._delegate,r,new Ak(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new tP(n._delegate,r,t))}}]),e}();function eD(e,t,n){return e.message=e.message.replace(t,n),e}function tD(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!GR(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function nD(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=GR(e[0])?e[0]:GR(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rD=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"ref",get:function(){return new ZR(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return IR(this._delegate,e._delegate)}}]),e}(),iD=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||uk(),t}}]),n}(rD),aD=function(){function e(t,n){u(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new YR(t)}return f(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,nR(this._delegate,function(e,t,n){var r=t,i=JP("where",e);return rR._create(i,r,n)}(t,n,r)))}catch(i){throw eD(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,nR(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=JP("orderBy",e);return aR._create(r,n)}(t,n)))}catch(r){throw eD(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,nR(this._delegate,($N("limit",n=t),oR._create("limit",n,"F"))))}catch(r){throw eD(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,nR(this._delegate,($N("limitToLast",n=t),oR._create("limitToLast",n,"L"))))}catch(r){throw eD(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,nR(this._delegate,uR.apply(void 0,arguments)))}catch(t){throw eD(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,nR(this._delegate,cR.apply(void 0,arguments)))}catch(t){throw eD(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,nR(this._delegate,hR.apply(void 0,arguments)))}catch(t){throw eD(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,nR(this._delegate,fR.apply(void 0,arguments)))}catch(t){throw eD(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return sP(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?NR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=XN(e,nP);var t=XN(e.firestore,hP),n=fP(t),r=new CR(t);return zN(n,e._query,{source:"server"}).then((function(n){return new ER(t,r,e,n)}))}(this._delegate):function(e){e=XN(e,nP);var t=XN(e.firestore,hP),n=fP(t),r=new CR(t);return ZP(e._query),zN(n,e._query).then((function(n){return new ER(t,r,e,n)}))}(this._delegate)).then((function(e){return new sD(t.firestore,new ER(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tD(n),a=nD(n,(function(t){return new sD(e.firestore,new ER(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return DR(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(JR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),oD=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new iD(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),sD=function(){function e(t,n){u(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"query",get:function(){return new aD(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new iD(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new oD(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new iD(n._firestore,r))}))}},{key:"isEqual",value:function(e){return IR(this._delegate,e._delegate)}}]),e}(),uD=function(e){v(n,e);var t=k(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return f(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new ZR(this.firestore,e):null}},{key:"doc",value:function(e){try{return new ZR(this.firestore,void 0===e?aP(this._delegate):aP(this._delegate,e))}catch(t){throw eD(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=XN(e.firestore,hP),r=aP(e),i=kR(e.converter,t);return OR(n,[RP(PP(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,nx.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new ZR(t.firestore,e)}))}},{key:"isEqual",value:function(e){return oP(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(JR.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(aD);function cD(e){return XN(e,tP)}var lD=function(){function e(){u(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=b(wP,n)}return f(e,[{key:"isEqual",value:function(e){return(e=bt(e))instanceof wP&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Dk.keyField().canonicalString())}}]),e}(),hD=function(){function e(t){u(this,e),this._delegate=t}return f(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new OP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new DP("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=VR.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=qR.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new MP("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),fD={Firestore:QR,GeoPoint:xP,Timestamp:Ck,Blob:KR,Transaction:XR,WriteBatch:$R,DocumentReference:ZR,DocumentSnapshot:rD,Query:aD,QueryDocumentSnapshot:iD,QuerySnapshot:sD,CollectionReference:uD,FieldPath:lD,FieldValue:hD,setLogLevel:function(e){var t;t=e,nk.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new _t("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},fD)))}(e,(function(e,t){return new QR(e,t,new HR)})),e.registerVersion("@firebase/firestore-compat","0.3.9")}(Qn);var dD={apiKey:"AIzaSyCsc2ET0FhO5JQcmIPXL5R99VnMN3iVfRc",authDomain:"church-quest-b3d00.firebaseapp.com",projectId:"church-quest-b3d00",storageBucket:"church-quest-b3d00.appspot.com",messagingSenderId:"209335426786",appId:"1:209335426786:web:8d267ab316308655d308bb"},vD=(kn(dD),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn(),t=fn(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Fh(e,{popupRedirectResolver:vv,persistence:[fd,Vf,zf]}),r=Ve("authTokenSyncURL");if(r){var i=Cv(r);Af(n,i,(function(){return i(n.currentUser)})),Df(n,(function(e){return i(e)}))}var a=Fe("auth");return a&&Uh(n,"http://".concat(a)),n}());function pD(e,t){return function(e,t,n){return Rf.apply(this,arguments)}(vD,e,t)}function mD(e,t){return function(e,t,n){return Nf(bt(e),lf.credential(t,n))}(vD,e,t)}function yD(){return function(e){return bt(e).signOut()}(vD)}function gD(){var e=s((0,r.useState)(),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=function(e,t,n,r){return bt(e).onAuthStateChanged(t,n,r)}(vD,(function(e){return n(e)}));return e}),[]),t}var kD=Qn.initializeApp(dD),bD=kD.firestore(),wD=kD.database().ref(),_D=n(184);function xD(e){var t=e.children;return(0,_D.jsx)("div",{className:"container",children:(0,_D.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light foi-navbar",children:[(0,_D.jsxs)(pe,{className:"navbar-brand",to:"/",children:[" ",(0,_D.jsx)("img",{src:"https://famousclowns.org/wp-content/uploads/2017/11/helmet-of-salvation.png",style:{marginTop:"20px",width:"35px"}}),(0,_D.jsxs)("b",{style:{lineHeight:"20px",fontSize:"15px"},children:[(0,_D.jsxs)("span",{style:{display:"inline-flex"},children:["Church ",(0,_D.jsx)("br",{}),"   Quest"]})," "]})]}),(0,_D.jsx)("button",{className:"navbar-toggler d-lg-none",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,_D.jsx)("span",{className:"navbar-toggler-icon"})}),(0,_D.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[(0,_D.jsxs)("ul",{className:"navbar-nav mr-auto mt-2  mt-lg-0",children:[(0,_D.jsx)("li",{className:"nav-item active",children:(0,_D.jsxs)(pe,{className:"nav-link",to:"/",children:["Home ",(0,_D.jsx)("span",{className:"sr-only",children:"(current)"})]})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)(pe,{className:"nav-link",to:"#",children:"About"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)(pe,{className:"nav-link",to:"#",children:"Features"})}),(0,_D.jsxs)("li",{className:"nav-item dropdown",children:[(0,_D.jsx)(pe,{className:"nav-link dropdown-toggle",to:"#",id:"pagesMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Pages"}),(0,_D.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"pagesMenu",children:[(0,_D.jsx)(pe,{className:"dropdown-item",to:"#",children:"Blog"}),(0,_D.jsx)(pe,{className:"dropdown-item",to:"#",children:"Careers"})]})]}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)(pe,{className:"nav-link",to:"#",children:"contact"})})]}),(0,_D.jsx)("ul",{className:"navbar-nav mt-2 mt-lg-0",children:t})]})]})})}n.p;var ED=n.p+"static/media/slack.628824312c7bb7e76bfcba924f895518.svg";var SD=n.p+"static/media/spotify.5c3dc4ea36228cc99b745de6831d52cc.svg";var ID=n.p+"static/media/paypal.99d11e8938977bf36649aed0791a8bb9.svg";var CD=n.p+"static/media/samsung.23ef53647ed19a623a106a963aa9b35b.svg";var TD=n.p+"static/media/google.b4d55a4659259445368ee34d41606cc2.svg";var ND=n.p+"static/media/amazon.810a60bd7af7afc6b111cf921d857844.svg";function PD(){var e=gD(),t=s((0,r.useState)(!1),2),n=(t[0],t[1]);te();function i(){return(i=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,yD();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("error!");case 9:n(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return(0,_D.jsxs)("div",{children:[(0,_D.jsxs)("header",{className:"foi-header landing-header",children:[(0,_D.jsxs)(xD,{children:[(0,_D.jsx)("li",{className:"nav-item mr-2 mb-3 mb-lg-0",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"portal",children:"Sign up"})}),!e&&(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"portal",children:"Log in"})}),e&&(0,_D.jsx)("li",{className:"nav-item ",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"#",onClick:function(){return i.apply(this,arguments)},children:"Log out "})}),e&&(0,_D.jsx)("li",{className:"nav-item ",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"/dashboard",children:"Dashboard"})})]}),(0,_D.jsx)("div",{className:"header-content",children:(0,_D.jsxs)("div",{className:"row",children:[(0,_D.jsxs)("div",{className:"col-md-6",children:[(0,_D.jsx)("h2",{children:"Welcome to ChurchQuest"}),(0,_D.jsx)("p",{className:"text-dark",children:"Great app that makes your church administration feassible & easy"}),(0,_D.jsx)(pe,{className:"btn btn-primary",to:"portal",children:"Get Started"}),(0,_D.jsx)("div",{className:"my-2",children:(0,_D.jsx)("p",{className:"header-app-download-title",children:"GET OUR MOBILE APP"})}),(0,_D.jsxs)("div",{children:[(0,_D.jsx)("button",{className:"btn btn-app-download mr-2",children:(0,_D.jsx)("img",{src:"https://pic.onlinewebfonts.com/svg/img_103664.png",alt:"ios",style:{overflow:"hidden"}})}),(0,_D.jsx)("button",{className:"btn btn-app-download",children:(0,_D.jsx)("img",{src:"https://th.bing.com/th/id/R.c7f92fc8ed96d918aadee1b51c717ac4?rik=IY7kSGkaQEzCcQ&riu=http%3a%2f%2fsiliconcali.com%2fwp-content%2fuploads%2f2012%2f02%2fblack_android_logo.png&ehk=NuA37h07VaFyJ3G7D2O1Y0RnnkY%2bdKXRtRe7AcrF3SY%3d&risl=&pid=ImgRaw&r=0",alt:"ndroid",style:{overflow:"hidden"}})})]})]}),(0,_D.jsx)("div",{className:"col-md-6",children:(0,_D.jsx)("img",{src:"https://static.wixstatic.com/media/1028fc_8889f37083d94fe495e71727568d6cc9~mv2_d_3570_3411_s_4_2.png/v1/fill/w_510,h_487,al_c,usm_0.66_1.00_0.01/auditor%20transparent-2_PNG.png",alt:"ndroid",className:"img-fluid",style:{overflow:"hidden"}})})]})})]}),(0,_D.jsx)("section",{className:"py-5 mb-5",children:(0,_D.jsxs)("div",{className:"container",children:[(0,_D.jsx)("h2",{className:"section-title",children:"Why ChurchQuest?"}),(0,_D.jsx)("br",{}),(0,_D.jsxs)("div",{className:"row",children:[(0,_D.jsxs)("div",{className:"col-lg-4 mb-4 mb-lg-0",children:[(0,_D.jsxs)("h5",{children:["The ",(0,_D.jsx)("b",{children:"Database Management"})," for your church members "]}),(0,_D.jsx)("p",{className:"text-dark",children:"No matter what kind of home you have to share, you can increase your earnings."}),(0,_D.jsx)("p",{className:"mb-5",children:(0,_D.jsx)("a",{href:"#!",class:"text-primary mb-5",children:"Find out More"})}),(0,_D.jsx)("h5",{children:"Evangelism Aid"}),(0,_D.jsx)("p",{className:"text-dark",children:"No matter what kind of home you have to share, you can increase your earnings."}),(0,_D.jsx)("p",{className:"mb-5",children:(0,_D.jsx)("a",{href:"#!",class:"text-primary mb-5",children:"Find out More"})}),(0,_D.jsx)("h5",{children:"Church Events-Planning "}),(0,_D.jsx)("p",{className:"text-dark",children:"No matter what kind of home you have to share, you can increase your earnings."}),(0,_D.jsx)("p",{className:"mb-5",children:(0,_D.jsx)("a",{href:"#!",class:"text-primary mb-5",children:"Find out More"})})]}),(0,_D.jsxs)("div",{className:"col-lg-4 mb-3 mb-lg-0",children:[(0,_D.jsx)("h5",{children:"First-Timer Followup"}),(0,_D.jsx)("p",{className:"text-dark",children:"No matter what kind of home you have to share, you can increase your earnings."}),(0,_D.jsx)("p",{className:"mb-5",children:(0,_D.jsx)("a",{href:"#!",class:"text-primary mb-5",children:"Find out More"})}),(0,_D.jsx)("h5",{children:"Project Management"}),(0,_D.jsx)("p",{className:"text-dark",children:"No matter what kind of home you have to share, you can increase your earnings."}),(0,_D.jsx)("p",{className:"mb-5",children:(0,_D.jsx)("a",{href:"#!",class:"text-primary mb-5",children:"Find out More"})})]}),(0,_D.jsxs)("div",{className:"col-lg-4",children:[(0,_D.jsx)("h6",{className:"text-gray font-os font-weight-semibold",children:"Trusted by the world's finest churches"}),(0,_D.jsxs)("div",{id:"landingClientCarousel",class:"carousel slide landing-client-carousel","data-ride":"carousel",children:[(0,_D.jsxs)("div",{className:"carousel-inner",role:"listbox",children:[(0,_D.jsx)("div",{className:"carousel-item active",children:(0,_D.jsxs)("div",{className:"d-flex flex-wrap justify-content-center",children:[(0,_D.jsx)("div",{className:"clients-logo",children:(0,_D.jsx)("img",{src:ED,alt:"Slack",class:"img-fluid"})}),(0,_D.jsx)("div",{className:"clients-logo",children:(0,_D.jsx)("img",{src:SD,alt:"Spotify",class:"img-fluid"})}),(0,_D.jsx)("div",{className:"clients-logo",children:(0,_D.jsx)("img",{src:ID,alt:"Paypal",class:"img-fluid"})}),(0,_D.jsx)("div",{className:"clients-logo",children:(0,_D.jsx)("img",{src:ND,alt:"Amazon",class:"img-fluid"})}),(0,_D.jsx)("div",{className:"clients-logo",children:(0,_D.jsx)("img",{src:TD,alt:"Google",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:CD,alt:"Samsung",class:"img-fluid"})})]})}),(0,_D.jsx)("div",{class:"carousel-item",children:(0,_D.jsxs)("div",{class:"d-flex flex-wrap justify-content-center",children:[(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/slack.svg",alt:"Slack",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/spotify.svg",alt:"Spotify",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/paypal.svg",alt:"Paypal",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/amazon.svg",alt:"Amazon",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/google.svg",alt:"Google",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/samsung.svg",alt:"Samsung",class:"img-fluid"})})]})}),(0,_D.jsx)("div",{class:"carousel-item",children:(0,_D.jsxs)("div",{class:"d-flex flex-wrap justify-content-center",children:[(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/slack.svg",alt:"Slack",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/spotify.svg",alt:"Spotify",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/paypal.svg",alt:"Paypal",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/amazon.svg",alt:"Amazon",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/google.svg",alt:"Google",class:"img-fluid"})}),(0,_D.jsx)("div",{class:"clients-logo",children:(0,_D.jsx)("img",{src:"assets/images/clients/samsung.svg",alt:"Samsung",class:"img-fluid"})})]})})]}),(0,_D.jsxs)("ol",{class:"carousel-indicators",children:[(0,_D.jsx)("li",{"data-target":"#landingClientCarousel","data-slide-to":"0",class:"active"}),(0,_D.jsx)("li",{"data-target":"#landingClientCarousel","data-slide-to":"1"}),(0,_D.jsx)("li",{"data-target":"#landingClientCarousel","data-slide-to":"2"})]})]})]})]})]})})]})}var RD=n.p+"static/media/login.8cc4073964d269478ac8.png";function DD(){var e=te(),t=s((0,r.useState)(!1),2),n=t[0],i=t[1],a=gD(),o=s((0,r.useState)(!0),2),u=o[0],c=o[1],l=(0,r.useRef)(),h=(0,r.useRef)();function f(){return(f=we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,mD(l.current.value,h.current.value);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),alert("Oops! Please try again");case 9:i(!1),e("/dashboard");case 11:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}function d(){return(d=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,pD(l.current.value,h.current.value);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("Oops! Please try again");case 9:i(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function v(){return(v=we(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,yD();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),alert("Oops! Please try again");case 9:i(!1),e("/portal");case 11:case"end":return t.stop()}}),t,null,[[1,6]])})))).apply(this,arguments)}return(0,_D.jsxs)("div",{className:"portal",children:[(0,_D.jsxs)(xD,{children:[(0,_D.jsx)("li",{className:"nav-item mr-2 mb-3 mb-lg-0",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"#",onClick:function(){return c(!1)},children:"Sign up"})}),!a&&(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"#",onClick:function(){return c(!0)},children:"Log in"})}),a&&(0,_D.jsx)("li",{className:"nav-item ",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"#",onClick:function(){return v.apply(this,arguments)},children:"Log out "})}),a&&(0,_D.jsx)("li",{className:"nav-item ",children:(0,_D.jsx)(pe,{className:"btn btn-secondary",to:"/dashboard",children:"Dashboard"})})]}),u&&(0,_D.jsx)("main",{className:"page-auth",children:(0,_D.jsx)("div",{className:"container",children:(0,_D.jsx)("div",{className:"row",children:(0,_D.jsx)("div",{className:"col-lg-10 offset-lg-1",children:(0,_D.jsx)("section",{className:"auth-wrapper",children:(0,_D.jsxs)("div",{className:"row",children:[(0,_D.jsxs)("div",{className:"col-md-6 mb-4 mb-md-0",children:[(0,_D.jsx)("h2",{className:"auth-section-title",children:"Log In"}),(0,_D.jsx)("p",{className:"auth-section-subtitle",children:"Sign in to your account to continue."}),a&&(0,_D.jsxs)("p",{children:["Currently logged in as : ",null===a||void 0===a?void 0:a.email]}),(0,_D.jsxs)("div",{className:"form-group",children:[(0,_D.jsxs)("label",{htmlFor:"email",children:["Email ",(0,_D.jsx)("sup",{children:"*"})]}),(0,_D.jsx)("input",{ref:l,type:"email",className:"form-control",id:"email",name:"email",placeholder:"Email *"})]}),(0,_D.jsxs)("div",{className:"form-group",children:[(0,_D.jsxs)("label",{htmlFor:"password",children:["Password ",(0,_D.jsx)("sup",{children:"*"})]}),(0,_D.jsx)("input",{ref:h,type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password *"})]}),(0,_D.jsxs)("div",{className:"form-actions-wrapper d-flex flex-wrap align-items-center justify-content-between",children:[(0,_D.jsxs)("div",{className:"form-check",children:[(0,_D.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"keepLogin"}),(0,_D.jsx)("label",{className:"form-check-label",htmlFor:"keepLogin",children:"keep me login"})]}),(0,_D.jsx)("a",{href:"#!",className:"forgot-password-link",children:"Forgot password?"})]}),(0,_D.jsx)("button",{disabled:n,onClick:function(){return f.apply(this,arguments)},className:"btn btn-primary btn-auth-submit",type:"submit",children:"Sign in"}),(0,_D.jsx)("p",{className:"mb-0",children:(0,_D.jsx)(pe,{to:"",onClick:function(){return c(!1)},className:"text-dark font-weight-bold",children:"New User? Sign Up"})})]}),(0,_D.jsx)("div",{className:"col-md-6 d-flex align-items-center",children:(0,_D.jsx)("img",{src:"https://www.pinclipart.com/picdir/big/212-2129001_no-cell-phone-clip-art.png",alt:"portal",className:"img-fluid"})})]})})})})})}),!u&&(0,_D.jsx)("main",{className:"page-auth",children:(0,_D.jsx)("div",{className:"container",children:(0,_D.jsx)("div",{className:"row",children:(0,_D.jsx)("div",{className:"col-lg-10 offset-lg-1",children:(0,_D.jsx)("section",{className:"auth-wrapper",children:(0,_D.jsxs)("div",{className:"row",children:[(0,_D.jsxs)("div",{className:"col-md-6 mb-4 mb-md-0",children:[(0,_D.jsx)("h2",{className:"auth-section-title",children:"Create a church account"}),(0,_D.jsx)("p",{className:"auth-section-subtitle",children:"Create your account to continue."}),(0,_D.jsx)("br",{}),(0,_D.jsxs)("div",{className:"form-group",children:[(0,_D.jsxs)("label",{htmlFor:"email",children:["Email ",(0,_D.jsx)("sup",{children:"*"})]}),(0,_D.jsx)("input",{ref:l,type:"email",className:"form-control",id:"email",name:"email",placeholder:"Email"})]}),(0,_D.jsxs)("div",{className:"form-group",children:[(0,_D.jsxs)("label",{htmlFor:"password",children:["Password ",(0,_D.jsx)("sup",{children:"*"})]}),(0,_D.jsx)("input",{ref:h,type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password"})]}),(0,_D.jsxs)("div",{className:"form-group",children:[(0,_D.jsxs)("label",{htmlFor:"confirmPassword",children:["Confirm Password ",(0,_D.jsx)("sup",{children:"*"})]}),(0,_D.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password"})]}),(0,_D.jsx)("button",{disabled:n||null!=a,onClick:function(){return d.apply(this,arguments)},className:"btn btn-primary btn-auth-submit",type:"submit",children:"Create account"}),(0,_D.jsx)("p",{className:"mb-0",children:(0,_D.jsx)(pe,{to:"",onClick:function(){return c(!0)},className:"text-dark font-weight-bold",children:"Already have an acocunt? Sign in"})})]}),(0,_D.jsx)("div",{className:"col-md-6 d-flex align-items-center",children:(0,_D.jsx)("img",{src:RD,alt:"login",className:"img-fluid"})})]})})})})})})]})}var AD=n.p+"static/media/logo-white.bde037d484897f83719c96224a67fd4e.svg";var OD=n.p+"static/media/ios.801833eb7ca4f3db6ebd78bd91c5e801.svg";var LD=n.p+"static/media/android.1e72e9b3db6c55b73598e04fc6c2799e.svg";var jD=n.p+"static/media/facebook.a198f7a6932e72ebb170cc9602e7b744.svg";var MD=n.p+"static/media/instagram.3bf024c5b586f03983a52e30fdb8a279.svg";var FD=n.p+"static/media/twitter.1f197b03f966387ebdadae1fd2037daa.svg";var UD=n.p+"static/media/youtube.72372d137bdce295e9166bd6abdf5fab.svg";function VD(){return(0,_D.jsx)("footer",{className:"foi-footer text-white",children:(0,_D.jsxs)("div",{className:"container",children:[(0,_D.jsxs)("div",{className:"row footer-content",children:[(0,_D.jsx)("div",{className:"col-xl-6 col-lg-7 col-md-8",children:(0,_D.jsx)("h2",{className:"mb-0",children:"Do you want to know more or just have a question? write to us."})}),(0,_D.jsx)("div",{className:"col-md-4 col-lg-5 col-xl-6 py-3 py-md-0 d-md-flex align-items-center justify-content-end",children:(0,_D.jsx)("a",{href:"contact.html",className:"btn btn-danger btn-lg",children:"Contact form"})})]}),(0,_D.jsxs)("div",{className:"row footer-widget-area",children:[(0,_D.jsxs)("div",{className:"col-md-3",children:[(0,_D.jsx)("div",{className:"py-3",children:(0,_D.jsx)("img",{src:AD,alt:"FOI"})}),(0,_D.jsx)("p",{className:"font-os font-weight-semibold mb3",children:"Get our mobile app"}),(0,_D.jsxs)("div",{children:[(0,_D.jsx)("button",{className:"btn btn-app-download mr-2",children:(0,_D.jsx)("img",{src:OD,alt:"App store"})}),(0,_D.jsx)("button",{className:"btn btn-app-download",children:(0,_D.jsx)("img",{src:LD,alt:"play store"})})]})]}),(0,_D.jsx)("div",{className:"col-md-3 mt-3 mt-md-0",children:(0,_D.jsx)("nav",{children:(0,_D.jsxs)("ul",{className:"nav flex-column",children:[(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"Account"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"My tasks"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"Projects"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"Edit profile"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"Activity"})})]})})}),(0,_D.jsx)("div",{className:"col-md-3 mt-3 mt-md-0",children:(0,_D.jsx)("nav",{children:(0,_D.jsxs)("ul",{className:"nav flex-column",children:[(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)(pe,{to:"/",className:"nav-link",children:"Home"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"About"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"Services"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsx)("a",{href:"#!",className:"nav-link",children:"Features"})}),(0,_D.jsx)("li",{className:"nav-item",children:(0,_D.jsxs)("a",{href:"#!",className:"nav-link",children:["Reach us ",(0,_D.jsx)("span",{className:"badge badge-pill badge-secondary ml-3",children:"for ict services"})," "]})})]})})}),(0,_D.jsxs)("div",{className:"col-md-3 mt-3 mt-md-0",children:[(0,_D.jsx)("p",{children:"\xa9 ChurchQuest 2023"}),(0,_D.jsx)("p",{children:"All rights reserved."}),(0,_D.jsxs)("nav",{className:"social-menu",children:[(0,_D.jsx)("a",{href:"#!",children:(0,_D.jsx)("img",{src:jD,alt:"facebook"})}),(0,_D.jsx)("a",{href:"#!",children:(0,_D.jsx)("img",{src:MD,alt:"instagram"})}),(0,_D.jsx)("a",{href:"#!",children:(0,_D.jsx)("img",{src:FD,alt:"twitter"})}),(0,_D.jsx)("a",{href:"#!",children:(0,_D.jsx)("img",{src:UD,alt:"youtube"})})]})]})]})]})})}function qD(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function zD(e,t){if(null==e)return{};var n,r,i=qD(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var BD=n(694),WD=n.n(BD),KD=["as","disabled"];function GD(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,s=e.onClick,u=e.tabIndex,c=void 0===u?0:u,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var h={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},h];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},h]}var HD=r.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,KD),a=s(GD(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,_D.jsx)(u,Object.assign({},i,o,{ref:t}))}));HD.displayName="Button";var QD=["xxl","xl","lg","md","sm","xs"],YD=r.createContext({prefixes:{},breakpoints:QD,minBreakpoint:"xs"});YD.Consumer,YD.Provider;function XD(e,t){var n=(0,r.useContext)(YD).prefixes;return e||n[t]||t}var $D=["as","bsPrefix","variant","size","active","disabled","className"],JD=r.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=void 0===i?"primary":i,o=e.size,u=e.active,c=void 0!==u&&u,l=e.disabled,h=void 0!==l&&l,f=e.className,d=zD(e,$D),v=XD(r,"btn"),p=s(GD(Lt({tagName:n,disabled:h},d)),2),m=p[0],y=p[1].tagName;return(0,_D.jsx)(y,Lt(Lt(Lt({},m),d),{},{ref:t,disabled:h,className:WD()(f,v,c&&"active",a&&"".concat(v,"-").concat(a),o&&"".concat(v,"-").concat(o),d.href&&h&&"disabled")}))}));JD.displayName="Button";var ZD=JD,eA=n(7),tA=n.n(eA),nA=["as","className","type","tooltip"],rA={type:tA().string,tooltip:tA().bool,as:tA().elementType},iA=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,s=e.tooltip,u=void 0!==s&&s,c=zD(e,nA);return(0,_D.jsx)(r,Lt(Lt({},c),{},{ref:t,className:WD()(i,"".concat(o,"-").concat(u?"tooltip":"feedback"))}))}));iA.displayName="Feedback",iA.propTypes=rA;var aA=iA,oA=r.createContext({}),sA=["id","bsPrefix","className","type","isValid","isInvalid","as"],uA=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,a=e.className,o=e.type,s=void 0===o?"checkbox":o,u=e.isValid,c=void 0!==u&&u,l=e.isInvalid,h=void 0!==l&&l,f=e.as,d=void 0===f?"input":f,v=zD(e,sA),p=(0,r.useContext)(oA).controlId;return i=XD(i,"form-check-input"),(0,_D.jsx)(d,Lt(Lt({},v),{},{ref:t,type:s,id:n||p,className:WD()(a,i,c&&"is-valid",h&&"is-invalid")}))}));uA.displayName="FormCheckInput";var cA=uA,lA=["bsPrefix","className","htmlFor"],hA=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.htmlFor,o=zD(e,lA),s=(0,r.useContext)(oA).controlId;return n=XD(n,"form-check-label"),(0,_D.jsx)("label",Lt(Lt({},o),{},{ref:t,htmlFor:a||s,className:WD()(i,n)}))}));hA.displayName="FormCheckLabel";var fA=hA;var dA=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],vA=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,s=void 0!==o&&o,u=e.reverse,c=void 0!==u&&u,l=e.disabled,h=void 0!==l&&l,f=e.isValid,d=void 0!==f&&f,v=e.isInvalid,p=void 0!==v&&v,m=e.feedbackTooltip,y=void 0!==m&&m,g=e.feedback,k=e.feedbackType,b=e.className,w=e.style,_=e.title,x=void 0===_?"":_,E=e.type,S=void 0===E?"checkbox":E,I=e.label,C=e.children,T=e.as,N=void 0===T?"input":T,P=zD(e,dA);i=XD(i,"form-check"),a=XD(a,"form-switch");var R=(0,r.useContext)(oA).controlId,D=(0,r.useMemo)((function(){return{controlId:n||R}}),[R,n]),A=!C&&null!=I&&!1!==I||function(e,t){return r.Children.toArray(e).some((function(e){return r.isValidElement(e)&&e.type===t}))}(C,fA),O=(0,_D.jsx)(cA,Lt(Lt({},P),{},{type:"switch"===S?"checkbox":S,ref:t,isValid:d,isInvalid:p,disabled:h,as:N}));return(0,_D.jsx)(oA.Provider,{value:D,children:(0,_D.jsx)("div",{style:w,className:WD()(b,A&&i,s&&"".concat(i,"-inline"),c&&"".concat(i,"-reverse"),"switch"===S&&a),children:C||(0,_D.jsxs)(_D.Fragment,{children:[O,A&&(0,_D.jsx)(fA,{title:x,children:I}),g&&(0,_D.jsx)(aA,{type:k,tooltip:y,children:g})]})})})}));vA.displayName="FormCheck";var pA=Object.assign(vA,{Input:cA,Label:fA}),mA=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),yA=r.forwardRef((function(e,t){var n,i,a=e.bsPrefix,o=e.type,s=e.size,u=e.htmlSize,c=e.id,l=e.className,h=e.isValid,f=void 0!==h&&h,d=e.isInvalid,v=void 0!==d&&d,p=e.plaintext,m=e.readOnly,y=e.as,g=void 0===y?"input":y,k=zD(e,mA),b=(0,r.useContext)(oA).controlId;(a=XD(a,"form-control"),p)?n=_e({},"".concat(a,"-plaintext"),!0):(_e(i={},a,!0),_e(i,"".concat(a,"-").concat(s),s),n=i);return(0,_D.jsx)(g,Lt(Lt({},k),{},{type:o,size:u,ref:t,readOnly:m,id:c||b,className:WD()(l,n,f&&"is-valid",v&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));yA.displayName="FormControl";var gA=Object.assign(yA,{Feedback:aA}),kA=/-(.)/g;var bA=["className","bsPrefix","as"],wA=function(e){return e[0].toUpperCase()+(t=e,t.replace(kA,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function _A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.displayName,i=void 0===n?wA(e):n,a=t.Component,o=t.defaultProps,s=r.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,s=t.as,u=void 0===s?a||"div":s,c=zD(t,bA),l=Lt(Lt({},o),c),h=XD(i,e);return(0,_D.jsx)(u,Lt({ref:n,className:WD()(r,h)},l))}));return s.displayName=i,s}var xA=_A("form-floating"),EA=["controlId","as"],SA=r.forwardRef((function(e,t){var n=e.controlId,i=e.as,a=void 0===i?"div":i,o=zD(e,EA),s=(0,r.useMemo)((function(){return{controlId:n}}),[n]);return(0,_D.jsx)(oA.Provider,{value:s,children:(0,_D.jsx)(a,Lt(Lt({},o),{},{ref:t}))})}));SA.displayName="FormGroup";var IA=SA,CA=["as","bsPrefix","className"],TA=["className"];function NA(e){var t=e.as,n=e.bsPrefix,i=e.className,a=zD(e,CA);n=XD(n,"col");var o=(0,r.useContext)(YD).breakpoints,s=(0,r.useContext)(YD).minBreakpoint,u=[],c=[];return o.forEach((function(e){var t,r,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,r=o.offset,i=o.order):t=o;var l=e!==s?"-".concat(e):"";t&&u.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=i&&c.push("order".concat(l,"-").concat(i)),null!=r&&c.push("offset".concat(l,"-").concat(r))})),[Lt(Lt({},a),{},{className:WD().apply(void 0,[i].concat(u,c))}),{as:t,bsPrefix:n,spans:u}]}var PA=r.forwardRef((function(e,t){var n=s(NA(e),2),r=n[0],i=r.className,a=zD(r,TA),o=n[1],u=o.as,c=void 0===u?"div":u,l=o.bsPrefix,h=o.spans;return(0,_D.jsx)(c,Lt(Lt({},a),{},{ref:t,className:WD()(i,!h.length&&l)}))}));PA.displayName="Col";var RA=PA,DA=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],AA=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"label":n,a=e.bsPrefix,o=e.column,s=void 0!==o&&o,u=e.visuallyHidden,c=void 0!==u&&u,l=e.className,h=e.htmlFor,f=zD(e,DA),d=(0,r.useContext)(oA).controlId;a=XD(a,"form-label");var v="col-form-label";"string"===typeof s&&(v="".concat(v," ").concat(v,"-").concat(s));var p=WD()(l,a,c&&"visually-hidden",s&&v);return h=h||d,s?(0,_D.jsx)(RA,Lt({ref:t,as:"label",className:p,htmlFor:h},f)):(0,_D.jsx)(i,Lt({ref:t,className:p,htmlFor:h},f))}));AA.displayName="FormLabel";var OA=AA,LA=["bsPrefix","className","id"],jA=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.id,o=zD(e,LA),s=(0,r.useContext)(oA).controlId;return n=XD(n,"form-range"),(0,_D.jsx)("input",Lt(Lt({},o),{},{type:"range",ref:t,className:WD()(i,n),id:a||s}))}));jA.displayName="FormRange";var MA=jA,FA=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],UA=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,s=e.isValid,u=void 0!==s&&s,c=e.isInvalid,l=void 0!==c&&c,h=e.id,f=zD(e,FA),d=(0,r.useContext)(oA).controlId;return n=XD(n,"form-select"),(0,_D.jsx)("select",Lt(Lt({},f),{},{size:a,ref:t,className:WD()(o,n,i&&"".concat(n,"-").concat(i),u&&"is-valid",l&&"is-invalid"),id:h||d}))}));UA.displayName="FormSelect";var VA=UA,qA=["bsPrefix","className","as","muted"],zA=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,s=zD(e,qA);return n=XD(n,"form-text"),(0,_D.jsx)(a,Lt(Lt({},s),{},{ref:t,className:WD()(r,n,o&&"text-muted")}))}));zA.displayName="FormText";var BA=zA,WA=r.forwardRef((function(e,t){return(0,_D.jsx)(pA,Lt(Lt({},e),{},{ref:t,type:"switch"}))}));WA.displayName="Switch";var KA=Object.assign(WA,{Input:pA.Input,Label:pA.Label}),GA=["bsPrefix","className","children","controlId","label"],HA=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,s=zD(e,GA);return n=XD(n,"form-floating"),(0,_D.jsxs)(IA,Lt(Lt({ref:t,className:WD()(r,n),controlId:a},s),{},{children:[i,(0,_D.jsx)("label",{htmlFor:a,children:o})]}))}));HA.displayName="FloatingLabel";var QA=HA,YA=["className","validated","as"],XA={_ref:tA().any,validated:tA().bool,as:tA().elementType},$A=r.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=zD(e,YA);return(0,_D.jsx)(a,Lt(Lt({},o),{},{ref:t,className:WD()(n,r&&"was-validated")}))}));$A.displayName="Form",$A.propTypes=XA;var JA=Object.assign($A,{Group:IA,Control:gA,Floating:xA,Check:pA,Switch:KA,Label:OA,Text:BA,Range:MA,Select:VA,FloatingLabel:QA});var ZA=n.p+"static/media/plus-circle.e5881bbc61b5b879d0edd11d602ae5f9.svg",eO=n.p+"static/media/guest-list.82322d4d0b676ff104ba.png",tO=n.p+"static/media/members.5b91ece2d64236677bb5.png";var nO=n.p+"static/media/teams.74e45542285d05b82736672a5f96dee1.svg";n.p;var rO=n.p+"static/media/signout.269056f737e86bd2f74790635d9aa18f.svg";function iO(e){gD();var t=te(),n=s((0,r.useState)(!1),2),i=(n[0],n[1]);function a(){return(a=we(ke().mark((function e(){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,yD();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("error!");case 9:i(!1),t("/portal");case 11:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return(0,_D.jsxs)("div",{className:"sidebar",children:[(0,_D.jsx)("div",{className:"sidebar-brand",style:{textAlign:"center"},children:(0,_D.jsxs)("h4",{children:[(0,_D.jsx)("img",{src:"https://famousclowns.org/wp-content/uploads/2017/11/helmet-of-salvation.png",style:{width:"35px"}}),(0,_D.jsxs)("span",{children:[" Church ",(0,_D.jsx)("br",{})," Quest"]})]})}),(0,_D.jsx)("br",{}),"     ",(0,_D.jsx)("br",{}),(0,_D.jsx)("div",{className:"sidebar-menu",children:(0,_D.jsxs)("ul",{children:[(0,_D.jsx)("li",{children:(0,_D.jsxs)(pe,{to:"#",className:"active",children:[" ",(0,_D.jsx)("span",{className:"las la-igloo"})," ",(0,_D.jsx)("span",{children:"Dashboard"})]})}),(0,_D.jsx)("li",{children:(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("span",{className:"las la-user-plus "})," ",(0,_D.jsx)("span",{children:"Register"})]})}),(0,_D.jsx)("li",{children:(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("span",{className:"las la-users"})," ",(0,_D.jsx)("span",{children:" Members"})]})}),(0,_D.jsx)("li",{children:(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("span",{children:(0,_D.jsx)("img",{src:nO})})," ",(0,_D.jsx)("span",{children:" Admin Mgt"})]})}),(0,_D.jsx)("li",{children:(0,_D.jsxs)(pe,{to:"/portal",onClick:function(){return a.apply(this,arguments)},children:[(0,_D.jsx)("span",{children:(0,_D.jsx)("img",{src:rO})})," ",(0,_D.jsx)("span",{children:" Log out"})]})})]})})]})}var aO=!("undefined"===typeof window||!window.document||!window.document.createElement),oO=!1,sO=!1;try{var uO={get passive(){return oO=!0},get once(){return sO=oO=!0}};aO&&(window.addEventListener("test",uO,uO),window.removeEventListener("test",uO,!0))}catch(JL){}var cO=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!sO){var i=r.once,a=r.capture,o=n;!sO&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,oO?r:a)}e.addEventListener(t,n,r)};function lO(e){return e&&e.ownerDocument||document}var hO,fO=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};function dO(e){if((!hO&&0!==hO||e)&&aO){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),hO=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return hO}var vO=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e}),[e]),t};function pO(e){var t=vO(e);return(0,r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var mO=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var yO=function(e,t){return(0,r.useMemo)((function(){return function(e,t){var n=mO(e),r=mO(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])};function gO(e){var t=function(e){var t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((function(){return function(){return t.current()}}),[])}function kO(e,t){return function(e){var t=lO(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var bO=/([A-Z])/g;var wO=/^ms-/;function _O(e){return function(e){return e.replace(bO,"-$1").toLowerCase()}(e).replace(wO,"-ms-")}var xO=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var EO=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(_O(t))||kO(e).getPropertyValue(_O(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!xO.test(e))}(i)?n+=_O(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(_O(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};var SO=function(e,t,n,r){return cO(e,t,n,r),function(){fO(e,t,n,r)}};function IO(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=SO(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function CO(e,t,n,r){null==n&&(n=function(e){var t=EO(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=IO(e,n,r),a=SO(e,"transitionend",t);return function(){i(),a()}}function TO(e){void 0===e&&(e=lO());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(JL){return e.body}}function NO(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var PO=n(164);var RO,DO=(RO="modal-open","".concat("data-rr-ui-").concat(RO)),AO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;u(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return f(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=_e({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(EO(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(DO,""),EO(r,t)}},{key:"reset",value:function(){var e=this;wt(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(DO),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),OO=AO,LO=(0,r.createContext)(aO?window:void 0);LO.Provider;function jO(){return(0,r.useContext)(LO)}var MO=function(e,t){return aO?null==e?(t||lO()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null};var FO="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,UO="undefined"!==typeof document||FO?r.useLayoutEffect:r.useEffect;var VO=function(e){var t=e.children,n=e.in,i=e.onExited,a=e.mountOnEnter,o=e.unmountOnExit,s=(0,r.useRef)(null),u=(0,r.useRef)(n),c=pO(i);(0,r.useEffect)((function(){n?u.current=!0:c(s.current)}),[n,c]);var l=yO(s,t.ref),h=(0,r.cloneElement)(t,{ref:l});return n?h:o||!u.current&&a?null:h};function qO(e){var t=e.children,n=e.in,i=e.onExited,a=e.onEntered,o=e.transition,u=s((0,r.useState)(!n),2),c=u[0],l=u[1];n&&c&&l(!1);var h=function(e){var t=e.in,n=e.onTransition,i=(0,r.useRef)(null),a=(0,r.useRef)(!0),o=pO(n);return UO((function(){if(i.current){var e=!1;return o({in:t,element:i.current,initial:a.current,isStale:function(){return e}}),function(){e=!0}}}),[t,o]),UO((function(){return a.current=!1,function(){a.current=!0}}),[]),i}({in:!!n,onTransition:function(e){Promise.resolve(o(e)).then((function(){e.isStale()||(e.in?null==a||a(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(function(t){throw e.in||l(!0),t}))}}),f=yO(h,t.ref);return c&&!n?null:(0,r.cloneElement)(t,{ref:f})}function zO(e,t,n){return e?(0,_D.jsx)(e,Object.assign({},n)):t?(0,_D.jsx)(qO,Object.assign({},n,{transition:t})):(0,_D.jsx)(VO,Object.assign({},n))}var BO,WO=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function KO(e){var t=jO(),n=e||function(e){return BO||(BO=new OO({ownerDocument:null==e?void 0:e.document})),BO}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return n.add(i.current)},remove:function(){return n.remove(i.current)},isTopModal:function(){return n.isTopModal(i.current)},setDialogRef:(0,r.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((function(e){i.current.backdrop=e}),[])})}var GO=(0,r.forwardRef)((function(e,t){var n=e.show,i=void 0!==n&&n,a=e.role,o=void 0===a?"dialog":a,u=e.className,c=e.style,l=e.children,h=e.backdrop,f=void 0===h||h,d=e.keyboard,v=void 0===d||d,p=e.onBackdropClick,m=e.onEscapeKeyDown,y=e.transition,g=e.runTransition,k=e.backdropTransition,b=e.runBackdropTransition,w=e.autoFocus,_=void 0===w||w,x=e.enforceFocus,E=void 0===x||x,S=e.restoreFocus,I=void 0===S||S,C=e.restoreFocusOptions,T=e.renderDialog,N=e.renderBackdrop,P=void 0===N?function(e){return(0,_D.jsx)("div",Object.assign({},e))}:N,R=e.manager,D=e.container,A=e.onShow,O=e.onHide,L=void 0===O?function(){}:O,j=e.onExit,M=e.onExited,F=e.onExiting,U=e.onEnter,V=e.onEntering,q=e.onEntered,z=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,WO),B=function(e,t){var n=jO(),i=s((0,r.useState)((function(){return MO(e,null==n?void 0:n.document)})),2),a=i[0],o=i[1];if(!a){var u=MO(e);u&&o(u)}return(0,r.useEffect)((function(){t&&a&&t(a)}),[t,a]),(0,r.useEffect)((function(){var t=MO(e);t!==a&&o(t)}),[e,a]),a}(D),W=KO(R),K=function(){var e=(0,r.useRef)(!0),t=(0,r.useRef)((function(){return e.current}));return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}(),G=function(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){t.current=e})),t.current}(i),H=s((0,r.useState)(!i),2),Q=H[0],Y=H[1],X=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(function(){return W}),[W]),aO&&!G&&i&&(X.current=TO()),i&&Q&&Y(!1);var $=pO((function(){if(W.add(),re.current=SO(document,"keydown",te),ne.current=SO(document,"focus",(function(){return setTimeout(Z)}),!0),A&&A(),_){var e=TO(document);W.dialog&&e&&!NO(W.dialog,e)&&(X.current=e,W.dialog.focus())}})),J=pO((function(){var e;(W.remove(),null==re.current||re.current(),null==ne.current||ne.current(),I)&&(null==(e=X.current)||null==e.focus||e.focus(C),X.current=null)}));(0,r.useEffect)((function(){i&&B&&$()}),[i,B,$]),(0,r.useEffect)((function(){Q&&J()}),[Q,J]),gO((function(){J()}));var Z=pO((function(){if(E&&K()&&W.isTopModal()){var e=TO();W.dialog&&e&&!NO(W.dialog,e)&&W.dialog.focus()}})),ee=pO((function(e){e.target===e.currentTarget&&(null==p||p(e),!0===f&&L())})),te=pO((function(e){v&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&W.isTopModal()&&(null==m||m(e),e.defaultPrevented||L())})),ne=(0,r.useRef)(),re=(0,r.useRef)();if(!B)return null;var ie=Object.assign({role:o,ref:W.setDialogRef,"aria-modal":"dialog"===o||void 0},z,{style:c,className:u,tabIndex:-1}),ae=T?T(ie):(0,_D.jsx)("div",Object.assign({},ie,{children:r.cloneElement(l,{role:"document"})}));ae=zO(y,g,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:j,onExiting:F,onExited:function(){Y(!0),null==M||M.apply(void 0,arguments)},onEnter:U,onEntering:V,onEntered:q,children:ae});var oe=null;return f&&(oe=P({ref:W.setBackdropRef,onClick:ee}),oe=zO(k,b,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:oe})),(0,_D.jsx)(_D.Fragment,{children:PO.createPortal((0,_D.jsxs)(_D.Fragment,{children:[oe,ae]}),B)})}));GO.displayName="Modal";var HO=Object.assign(GO,{Manager:OO});var QO=Function.prototype.bind.call(Function.prototype.call,[].slice);function YO(e,t){return QO(e.querySelectorAll(t))}function XO(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var $O,JO=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ZO=".sticky-top",eL=".navbar-toggler",tL=function(e){v(n,e);var t=k(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,EO(t,_e({},e,"".concat(parseFloat(EO(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],EO(t,_e({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;el(p(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";YO(a,JO).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),YO(a,ZO).forEach((function(n){return t.adjustAndStore(s,n,-e.scrollBarWidth)})),YO(a,eL).forEach((function(n){return t.adjustAndStore(s,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;el(p(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=XO(r.className,i):r.setAttribute("class",XO(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";YO(a,JO).forEach((function(e){return t.restore(o,e)})),YO(a,ZO).forEach((function(e){return t.restore(s,e)})),YO(a,eL).forEach((function(e){return t.restore(s,e)}))}}]),n}(OO);var nL=!1,rL=r.createContext(null),iL="unmounted",aL="exited",oL="entering",sL="entered",uL="exiting",cL=function(e){var t,n;function i(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=aL,r.appearStatus=oL):i=sL:i=t.unmountOnExit||t.mountOnEnter?iL:aL,r.state={status:i},r.nextCallback=null,r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===iL?{status:aL}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==oL&&n!==sL&&(t=oL):n!==oL&&n!==sL||(t=uL)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===oL){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:PO.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===aL&&this.setState({status:iL})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[PO.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||nL?this.safeSetState({status:sL},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:oL},(function(){t.props.onEntering(a,o),t.onTransitionEnd(u,(function(){t.safeSetState({status:sL},(function(){t.props.onEntered(a,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:PO.findDOMNode(this);t&&!nL?(this.props.onExit(r),this.safeSetState({status:uL},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:aL},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:aL},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:PO.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===iL)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,qD(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(rL.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},i}(r.Component);function lL(){}cL.contextType=rL,cL.propTypes={},cL.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:lL,onEntering:lL,onEntered:lL,onExit:lL,onExiting:lL,onExited:lL},cL.UNMOUNTED=iL,cL.EXITED=aL,cL.ENTERING=oL,cL.ENTERED=sL,cL.EXITING=uL;var hL=cL;function fL(e,t){var n=EO(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function dL(e,t){var n=fL(e,"transitionDuration"),r=fL(e,"transitionDelay"),i=CO(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var vL,pL=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],mL=r.forwardRef((function(e,t){var n=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,s=e.onExiting,u=e.onExited,c=e.addEndListener,l=e.children,h=e.childRef,f=zD(e,pL),d=(0,r.useRef)(null),v=yO(d,h),p=function(e){var t;v((t=e)&&"setState"in t?PO.findDOMNode(t):null!=t?t:null)},m=function(e){return function(t){e&&d.current&&e(d.current,t)}},y=(0,r.useCallback)(m(n),[n]),g=(0,r.useCallback)(m(i),[i]),k=(0,r.useCallback)(m(a),[a]),b=(0,r.useCallback)(m(o),[o]),w=(0,r.useCallback)(m(s),[s]),_=(0,r.useCallback)(m(u),[u]),x=(0,r.useCallback)(m(c),[c]);return(0,_D.jsx)(hL,Lt(Lt({ref:t},f),{},{onEnter:y,onEntered:k,onEntering:g,onExit:b,onExited:_,onExiting:w,addEndListener:x,nodeRef:d,children:"function"===typeof l?function(e,t){return l(e,Lt(Lt({},t),{},{ref:p}))}:r.cloneElement(l,{ref:p})}))})),yL=mL,gL=["className","children","transitionClasses","onEnter"],kL=(_e(vL={},oL,"show"),_e(vL,sL,"show"),vL),bL=r.forwardRef((function(e,t){var n=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,s=e.onEnter,u=Lt({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},zD(e,gL)),c=(0,r.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==s||s(e,t)}),[s]);return(0,_D.jsx)(yL,Lt(Lt({ref:t,addEndListener:dL},u),{},{onEnter:c,childRef:i.ref,children:function(e,t){return r.cloneElement(i,Lt(Lt({},t),{},{className:WD()("fade",n,i.props.className,kL[e],o[e])}))}}))}));bL.displayName="Fade";var wL=bL,_L=_A("modal-body"),xL=r.createContext({onHide:function(){}}),EL=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],SL=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.contentClassName,a=e.centered,o=e.size,s=e.fullscreen,u=e.children,c=e.scrollable,l=zD(e,EL);n=XD(n,"modal");var h="".concat(n,"-dialog"),f="string"===typeof s?"".concat(n,"-fullscreen-").concat(s):"".concat(n,"-fullscreen");return(0,_D.jsx)("div",Lt(Lt({},l),{},{ref:t,className:WD()(h,r,o&&"".concat(n,"-").concat(o),a&&"".concat(h,"-centered"),c&&"".concat(h,"-scrollable"),s&&f),children:(0,_D.jsx)("div",{className:WD()("".concat(n,"-content"),i),children:u})}))}));SL.displayName="ModalDialog";var IL=SL,CL=_A("modal-footer"),TL=["className","variant","aria-label"],NL={"aria-label":tA().string,onClick:tA().func,variant:tA().oneOf(["white"])},PL=r.forwardRef((function(e,t){var n=e.className,r=e.variant,i=e["aria-label"],a=void 0===i?"Close":i,o=zD(e,TL);return(0,_D.jsx)("button",Lt({ref:t,type:"button",className:WD()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":a},o))}));PL.displayName="CloseButton",PL.propTypes=NL;var RL=PL,DL=["closeLabel","closeVariant","closeButton","onHide","children"],AL=r.forwardRef((function(e,t){var n=e.closeLabel,i=void 0===n?"Close":n,a=e.closeVariant,o=e.closeButton,s=void 0!==o&&o,u=e.onHide,c=e.children,l=zD(e,DL),h=(0,r.useContext)(xL),f=pO((function(){null==h||h.onHide(),null==u||u()}));return(0,_D.jsxs)("div",Lt(Lt({ref:t},l),{},{children:[c,s&&(0,_D.jsx)(RL,{"aria-label":i,variant:a,onClick:f})]}))})),OL=["bsPrefix","className","closeLabel","closeButton"],LL=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.closeLabel,a=void 0===i?"Close":i,o=e.closeButton,s=void 0!==o&&o,u=zD(e,OL);return n=XD(n,"modal-header"),(0,_D.jsx)(AL,Lt(Lt({ref:t},u),{},{className:WD()(r,n),closeLabel:a,closeButton:s}))}));LL.displayName="ModalHeader";var jL,ML=LL,FL=(jL="h4",r.forwardRef((function(e,t){return(0,_D.jsx)("div",Lt(Lt({},e),{},{ref:t,className:WD()(e.className,jL)}))}))),UL=_A("modal-title",{Component:FL}),VL=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function qL(e){return(0,_D.jsx)(wL,Lt(Lt({},e),{},{timeout:null}))}function zL(e){return(0,_D.jsx)(wL,Lt(Lt({},e),{},{timeout:null}))}var BL=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.style,o=e.dialogClassName,u=e.contentClassName,c=e.children,l=e.dialogAs,h=void 0===l?IL:l,f=e["aria-labelledby"],d=e["aria-describedby"],v=e["aria-label"],p=e.show,m=void 0!==p&&p,y=e.animation,g=void 0===y||y,k=e.backdrop,b=void 0===k||k,w=e.keyboard,_=void 0===w||w,x=e.onEscapeKeyDown,E=e.onShow,S=e.onHide,I=e.container,C=e.autoFocus,T=void 0===C||C,N=e.enforceFocus,P=void 0===N||N,R=e.restoreFocus,D=void 0===R||R,A=e.restoreFocusOptions,O=e.onEntered,L=e.onExit,j=e.onExiting,M=e.onEnter,F=e.onEntering,U=e.onExited,V=e.backdropClassName,q=e.manager,z=zD(e,VL),B=s((0,r.useState)({}),2),W=B[0],K=B[1],G=s((0,r.useState)(!1),2),H=G[0],Q=G[1],Y=(0,r.useRef)(!1),X=(0,r.useRef)(!1),$=(0,r.useRef)(null),J=s((0,r.useState)(null),2),Z=J[0],ee=J[1],te=yO(t,ee),ne=pO(S),re="rtl"===(0,r.useContext)(YD).dir;n=XD(n,"modal");var ie=(0,r.useMemo)((function(){return{onHide:ne}}),[ne]);function ae(){return q||function(e){return $O||($O=new tL(e)),$O}({isRTL:re})}function oe(e){if(aO){var t=ae().getScrollbarWidth()>0,n=e.scrollHeight>lO(e).documentElement.clientHeight;K({paddingRight:t&&!n?dO():void 0,paddingLeft:!t&&n?dO():void 0})}}var se=pO((function(){Z&&oe(Z.dialog)}));gO((function(){fO(window,"resize",se),null==$.current||$.current()}));var ue=function(){Y.current=!0},ce=function(e){Y.current&&Z&&e.target===Z.dialog&&(X.current=!0),Y.current=!1},le=function(){Q(!0),$.current=CO(Z.dialog,(function(){Q(!1)}))},he=function(e){"static"!==b?X.current||e.target!==e.currentTarget?X.current=!1:null==S||S():function(e){e.target===e.currentTarget&&le()}(e)},fe=(0,r.useCallback)((function(e){return(0,_D.jsx)("div",Lt(Lt({},e),{},{className:WD()("".concat(n,"-backdrop"),V,!g&&"show")}))}),[g,V,n]),de=Lt(Lt({},a),W);de.display="block";return(0,_D.jsx)(xL.Provider,{value:ie,children:(0,_D.jsx)(HO,{show:m,ref:te,backdrop:b,container:I,keyboard:!0,autoFocus:T,enforceFocus:P,restoreFocus:D,restoreFocusOptions:A,onEscapeKeyDown:function(e){_?null==x||x(e):(e.preventDefault(),"static"===b&&le())},onShow:E,onHide:S,onEnter:function(e,t){e&&oe(e),null==M||M(e,t)},onEntering:function(e,t){null==F||F(e,t),cO(window,"resize",se)},onEntered:O,onExit:function(e){null==$.current||$.current(),null==L||L(e)},onExiting:j,onExited:function(e){e&&(e.style.display=""),null==U||U(e),fO(window,"resize",se)},manager:ae(),transition:g?qL:void 0,backdropTransition:g?zL:void 0,renderBackdrop:fe,renderDialog:function(e){return(0,_D.jsx)("div",Lt(Lt({role:"dialog"},e),{},{style:de,className:WD()(i,n,H&&"".concat(n,"-static"),!g&&"show"),onClick:b?he:void 0,onMouseUp:ce,"aria-label":v,"aria-labelledby":f,"aria-describedby":d,children:(0,_D.jsx)(h,Lt(Lt({},z),{},{onMouseDown:ue,className:o,contentClassName:u,children:c}))}))}})})}));BL.displayName="Modal";var WL=Object.assign(BL,{Body:_L,Header:ML,Title:UL,Footer:CL,Dialog:IL,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function KL(e){var t=e.children,n=s((0,r.useState)(!1),2),i=n[0],a=n[1];return(0,_D.jsxs)(_D.Fragment,{children:[(0,_D.jsxs)(ZD,{variant:"primary",onClick:function(){return a(!0)},children:["Register ",(0,_D.jsx)("img",{src:ZA})]}),(0,_D.jsxs)(WL,{show:i,onHide:function(){return a(!1)},children:[(0,_D.jsx)(WL.Header,{closeButton:!0,children:(0,_D.jsx)(WL.Title,{children:"Client Church Name"})}),(0,_D.jsx)(WL.Body,{children:t}),(0,_D.jsx)(WL.Footer,{children:(0,_D.jsx)(ZD,{variant:"secondary",onClick:function(){return a(!1)},children:"Close"})})]})]})}function GL(){var e=s((0,r.useState)(""),2),t=e[0],n=e[1],i=te();return(0,_D.jsx)("div",{className:"search-wrapper",children:(0,_D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i("/search?q="+t)},children:[(0,_D.jsx)("span",{className:"las la-search"}),(0,_D.jsx)("input",{type:"search",placeholder:"Search member",onChange:function(e){return n(e.target.value)}})]})})}function HL(){var e=s((0,r.useState)(null),2),t=e[0],n=e[1],i=s((0,r.useState)(null),2),a=i[0],o=i[1],u=s((0,r.useState)(null),2),c=u[0],l=u[1],h=s((0,r.useState)(null),2),f=h[0],d=h[1],v=s((0,r.useState)(null),2),p=v[0],m=v[1],y=s((0,r.useState)(null),2),g=y[0],k=y[1],b=s((0,r.useState)(null),2),w=(b[0],b[1]),_=s((0,r.useState)(!1),2),x=(_[0],_[1],s((0,r.useState)(!1),2)),E=x[0],S=(x[1],s((0,r.useState)(null),2)),I=(S[0],S[1],gD()),C=(te(),function(){var e=we(ke().mark((function e(n){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t,a,c,f,p,g),r={firstName:t,lastName:a,email:c,number:f,address:p,unit:g},alert("Member Detail Submitted"),e.prev=4,e.next=7,wD.child("members").push(r);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}());return(0,_D.jsxs)("div",{className:"dashboard",children:[(0,_D.jsx)("input",{type:"checkbox",id:"nav-toggle"}),(0,_D.jsx)(iO,{}),(0,_D.jsxs)("div",{className:"main-content",children:[(0,_D.jsxs)("header",{children:[(0,_D.jsxs)("div",{children:[" ",(0,_D.jsxs)("h3",{children:[(0,_D.jsx)("label",{for:"nav-toggle",children:(0,_D.jsx)("span",{className:"las la-bars",children:" "})}),"Dashboard"]})]}),(0,_D.jsx)(GL,{}),(0,_D.jsxs)("div",{className:"user-wrapper",children:[(0,_D.jsx)("img",{src:"https://developers.tech2biz.net/images/frontend/default-user-male.png",width:"40px",height:"40px",alt:""}),(0,_D.jsxs)("div",{children:[(0,_D.jsx)("p",{style:{fontSize:"9px"},children:null===I||void 0===I?void 0:I.email}),(0,_D.jsx)("small",{children:"Super Admin"})]})]})]}),(0,_D.jsx)("main",{className:"main",children:(0,_D.jsxs)("div",{className:"cards",children:[(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h1",{children:"54"}),(0,_D.jsx)("span",{children:"Guest"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(KL,{children:(0,_D.jsxs)(JA,{children:[(0,_D.jsxs)(JA.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,_D.jsx)(JA.Control,{type:"text",placeholder:"Kindly input your name"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Control,{type:"number",placeholder:"Your phone number"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Control,{type:"email",placeholder:"name@example.com"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Control,{type:"text",placeholder:"Address"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Control,{type:"text",placeholder:"Single / Married / Diversed"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Control,{type:"text",placeholder:"kindly input your age group"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Control,{type:"text",placeholder:"would like to be a part of our church?"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Control,{type:"text",placeholder:"Who invited you?"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Label,{children:"What you like about our church?"}),(0,_D.jsx)(JA.Control,{as:"textarea",rows:3})]}),(0,_D.jsx)(ZD,{variant:"primary",children:" Submit Detail "})]})})]}),(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{children:[" ",(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("img",{src:eO,height:"50px"})," "]})]})})]}),(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h1",{children:"254"}),(0,_D.jsx)("span",{children:"Congregation"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(KL,{children:(0,_D.jsxs)(JA,{children:[(0,_D.jsxs)(JA.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,_D.jsx)(JA.Label,{children:"Email address"}),(0,_D.jsx)(JA.Control,{type:"email",placeholder:"name@example.com"})]}),(0,_D.jsxs)(JA.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,_D.jsx)(JA.Label,{children:"Example textarea"}),(0,_D.jsx)(JA.Control,{as:"textarea",rows:3})]}),(0,_D.jsx)(ZD,{variant:"primary",children:" Submit Detail "})]})})]}),(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{children:[" ",(0,_D.jsx)("img",{src:tO,height:"50px"})," "]})})]}),(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h1",{children:"354"}),(0,_D.jsx)("span",{children:"Retained  "}),(0,_D.jsx)("br",{}),(0,_D.jsx)(KL,{children:(0,_D.jsxs)("form",{onSubmit:C,children:[(0,_D.jsxs)(JA.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,_D.jsx)(JA.Label,{children:"First Name"}),(0,_D.jsx)(JA.Control,{type:"text",onChange:function(e){return n(e.target.value)},placeholder:"Pls input your first name"}),(0,_D.jsx)(JA.Label,{children:"Last Name"}),(0,_D.jsx)(JA.Control,{type:"text",onChange:function(e){return o(e.target.value)},placeholder:"Pls input your last name"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Label,{children:"Number"}),(0,_D.jsx)(JA.Control,{type:"number",onChange:function(e){return d(e.target.value)},placeholder:"Your phone number"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Label,{children:"Email address"}),(0,_D.jsx)(JA.Control,{type:"email",onChange:function(e){return l(e.target.value)},placeholder:"name@example.com"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Label,{children:"Address"}),(0,_D.jsx)(JA.Control,{type:"text",onChange:function(e){return m(e.target.value)},placeholder:"Your residential address"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Label,{children:"Unit"}),(0,_D.jsx)(JA.Control,{type:"text",onChange:function(e){return k(e.target.value)},placeholder:"Your role in the churchy"}),(0,_D.jsx)("br",{}),(0,_D.jsx)(JA.Label,{children:"Occupation"}),(0,_D.jsx)(JA.Control,{type:"text",onChange:function(e){return w(e.target.value)},placeholder:"You can add your multiple occupation"}),(0,_D.jsx)("br",{})]}),(0,_D.jsx)(ZD,{disabled:E,type:"submit",variant:"primary",children:" Submit Details "})]})})]}),(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{children:[" ",(0,_D.jsx)("img",{src:tO,height:"50px"})]})})]}),(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h1",{children:"612"}),(0,_D.jsx)("span",{children:"Total Members"})]}),(0,_D.jsx)("div",{children:(0,_D.jsx)("span",{className:"las la-users"})})]})]})})]})]})}function QL(){var e=s((0,r.useState)(!1),2),t=e[0],n=e[1],i=s((0,r.useState)(!1),2),a=i[0],o=i[1],u=s((0,r.useState)(null),2),c=u[0],l=u[1],h=gD();te();return(0,r.useEffect)((function(){o(!0);var e=bD.collection("membership").onSnapshot((function(e){if(console.log(e),e.empty)n("No members to load"),o(!1);else{var t=[];e.docs.forEach((function(e){t.push(Lt({id:e.id},e.data()))})),l(t),o(!1)}}),(function(e){n(e.message),o(!1)}));return function(){return e()}}),[]),(0,_D.jsxs)("div",{className:"dashboard",children:[(0,_D.jsx)("input",{type:"checkbox",id:"nav-toggle"}),(0,_D.jsx)(iO,{}),(0,_D.jsx)("div",{className:"main-content",children:(0,_D.jsxs)("header",{children:[(0,_D.jsxs)("div",{children:[" ",(0,_D.jsxs)("h3",{children:[(0,_D.jsx)("label",{for:"nav-toggle",children:(0,_D.jsx)("span",{className:"las la-bars",children:" "})}),"Dashboard"]})]}),(0,_D.jsx)(GL,{}),(0,_D.jsxs)("div",{className:"user-wrapper",children:[(0,_D.jsx)("img",{src:"https://developers.tech2biz.net/images/frontend/default-user-male.png",width:"40px",height:"40px",alt:""}),(0,_D.jsxs)("div",{children:[(0,_D.jsx)("p",{style:{fontSize:"9px"},children:null===h||void 0===h?void 0:h.email}),(0,_D.jsx)("small",{children:"Super Admin"})]})]})]})}),t&&(0,_D.jsx)("p",{className:"error",children:t}),c&&(0,_D.jsx)("main",{className:"main",children:(0,_D.jsxs)("div",{className:"cards",children:[a&&(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h3",{children:"Loading"}),(0,_D.jsx)("span",{children:"Total retained"}),(0,_D.jsx)("br",{})]}),"      0",(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{className:"member-icon",children:[" ",(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("img",{src:tO,height:"50px"})," "]})]})})]}),c.map((function(e){return(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsxs)("p",{children:[(0,_D.jsx)("i",{class:"las la-user","aria-hidden":"true"})," ",e.name]}),(0,_D.jsxs)("p",{children:[(0,_D.jsx)("i",{class:"las la-phone","aria-hidden":"true"})," ",e.number]}),(0,_D.jsxs)("p",{children:[(0,_D.jsx)("i",{class:"las la-envelope","aria-hidden":"true"}),"  ",e.email]}),(0,_D.jsxs)("span",{children:[e.unit," Retained"]}),(0,_D.jsx)("br",{})]}),(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{className:"member-icon",children:[" ",(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("img",{src:tO,height:"50px"})," "]})]})})]},e.id)})),(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h3",{children:"100"}),(0,_D.jsx)("span",{children:"Total retained"}),(0,_D.jsx)("br",{})]}),(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{className:"member-icon",children:[" ",(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("img",{src:tO,height:"50px"})," "]})]})})]}),a&&(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h3",{children:"Loading Components"}),(0,_D.jsx)("span",{children:"....."}),(0,_D.jsx)("br",{})]}),(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{className:"member-icon",children:[" ",(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("img",{src:tO,height:"50px"})," "]})]})})]})]})})]})}function YL(){var e=s((0,r.useState)({}),2),t=e[0],n=e[1],i=s((0,r.useState)(null),2),a=i[0],o=i[1],u=gD(),c=function(){var e=ee().search;return new URLSearchParams(e)}().get("q");(0,r.useEffect)((function(){l()}),[c]);var l=function(){wD.child("members").orderByChild("firstName").equalTo(c).on("value",(function(e){if(e.val()){var t=e.val(),r=e.numChildren();n(t),o(r),console.log(e.numChildren())}}))};return(0,_D.jsxs)("div",{className:"dashboard",children:[(0,_D.jsx)("input",{type:"checkbox",id:"nav-toggle"}),(0,_D.jsx)(iO,{}),(0,_D.jsx)("div",{className:"main-content",children:(0,_D.jsxs)("header",{children:[(0,_D.jsxs)("div",{children:[" ",(0,_D.jsxs)("h3",{children:[(0,_D.jsx)("label",{for:"nav-toggle",children:(0,_D.jsx)("span",{className:"las la-bars",children:" "})}),"Dashboard"]})]}),(0,_D.jsx)(GL,{}),(0,_D.jsxs)("div",{className:"user-wrapper",children:[(0,_D.jsx)("img",{src:"https://developers.tech2biz.net/images/frontend/default-user-male.png",width:"40px",height:"40px",alt:""}),(0,_D.jsxs)("div",{children:[(0,_D.jsx)("p",{style:{fontSize:"9px"},children:null===u||void 0===u?void 0:u.email}),(0,_D.jsx)("small",{children:"Super Admin"})]})]})]})}),(0,_D.jsx)("main",{className:"main",children:(0,_D.jsxs)("div",{className:"cards",children:[Object.keys(t).map((function(e,n){return(0,_D.jsx)("div",{className:"card-single",children:(0,_D.jsxs)("div",{children:[(0,_D.jsxs)("p",{children:[(0,_D.jsx)("i",{class:"las la-user","aria-hidden":"true"})," ",t[e].firstName," ",t[e].lastName," "]}),(0,_D.jsxs)("p",{children:[(0,_D.jsx)("i",{class:"las la-phone","aria-hidden":"true"})," ",t[e].number]}),(0,_D.jsxs)("p",{children:[(0,_D.jsx)("i",{class:"las la-envelope","aria-hidden":"true"}),"  ",t[e].email]})]})},e)})),(0,_D.jsxs)("div",{className:"card-single",children:[(0,_D.jsxs)("div",{children:[(0,_D.jsx)("h3",{children:a}),(0,_D.jsx)("span",{children:"Result(s) Found"}),(0,_D.jsx)("br",{})]}),(0,_D.jsx)("div",{children:(0,_D.jsxs)("span",{className:"member-icon",children:[" ",(0,_D.jsxs)(pe,{to:"#",children:[(0,_D.jsx)("img",{src:tO,height:"50px"})," "]})]})})]})]})})]})}function XL(){return(0,_D.jsxs)("div",{children:[(0,_D.jsxs)(de,{children:[(0,_D.jsx)(oe,{path:"/",element:(0,_D.jsx)(PD,{})}),(0,_D.jsx)(oe,{path:"portal",element:(0,_D.jsx)(DD,{})}),(0,_D.jsx)(oe,{path:"dashboard",element:(0,_D.jsx)(HL,{})}),(0,_D.jsx)(oe,{path:"members",element:(0,_D.jsx)(QL,{})}),(0,_D.jsx)(oe,{path:"search",element:(0,_D.jsx)(YL,{})})]}),(0,_D.jsx)(VD,{})]})}var $L=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};ge.createRoot(document.getElementById("root")).render((0,_D.jsx)(r.StrictMode,{children:(0,_D.jsx)(fe,{children:(0,_D.jsx)(XL,{})})})),$L()}()}();
//# sourceMappingURL=main.8839386a.js.map